"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[3483],{87031:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});a(90246);var i=a(83673),d=a(62323),t=a(98880);const n={class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},o=(0,i._)("div",{class:"text-h4"},"Category",-1),s={class:"flex items-center"},u={class:"q-px-md full-width justify-stretch column inline",style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"}},c={style:{"font-size":"15px",margin:"0 !important"}},r=(0,i._)("div",{class:"flex"},[(0,i._)("p",{class:"text-h6 col"},"Sub categories")],-1),p={class:"q-py-sm col"},b={key:1},m={key:0},C={class:"col-12 flex row"},g={class:"items-start col-12 flex row"},h={key:0,class:"q-pa-md q-pl-xl col-12 row flex"},w=(0,i._)("p",{class:"text-h4 col"},"Childs of Sub category",-1),S={class:"q-py-sm col-12"},y={key:1},f={key:0,class:"col-12"},x={class:"items-start col-12 flex row"};function k(e,l,a,k,_,W){const q=(0,i.up)("q-btn"),v=(0,i.up)("breadcrumps"),D=(0,i.up)("q-td"),I=(0,i.up)("q-icon"),Z=(0,i.up)("q-item-section"),V=(0,i.up)("q-item"),Q=(0,i.up)("q-separator"),L=(0,i.up)("q-list"),j=(0,i.up)("q-menu"),z=(0,i.up)("q-tr"),T=(0,i.up)("q-spinner-tail"),U=(0,i.up)("q-input"),A=(0,i.up)("q-table"),N=(0,i.up)("q-scroll-area"),H=(0,i.up)("modal"),F=(0,i.up)("q-dialog"),M=(0,i.up)("q-page"),K=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(M,{class:"q-py-none q-my-none"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[o,(0,i._)("div",s,[(0,i.Wm)(q,{onClick:l[0]||(l[0]=e=>{_.action="Add",_.prompt=!0}),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})])]),(0,i.Wm)(v,{class:"q-pa-md full-width",map:_.crumps},null,8,["map"]),(0,i._)("div",u,[(0,i.Wm)(N,{class:"col-12 items-start flex column"},{default:(0,i.w5)((()=>[(0,i.Wm)(A,{rows:e.categories,columns:_.columns,"row-key":"id",loading:_.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,i.w5)((a=>[(0,i.Wm)(z,{class:(0,d.C_)(a.rowIndex%2!==0&&"bg-white"),props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{"auto-width":""},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{size:"sm",color:"primary",round:"",dense:"",onClick:e=>{_.expandChildSubCat=!1,_.sub=null,_.childSub=null,a.expand&&_.expandSubId===a.row.id?(a.expand=!1,_.expandSubId=null):(_.expandSubId=a.row.id,a.expand=!0)},icon:a.expand&&_.expandSubId===a.row.id?"remove":"add"},null,8,["onClick","icon"])])),_:2},1024),(0,i.Wm)(D,{key:"name",props:a},{default:(0,i.w5)((()=>[(0,i._)("p",c,(0,d.zw)(a.row.name),1)])),_:2},1032,["props"]),(0,i.Wm)(D,{key:"description",innerHTML:a.row.description,props:a},null,8,["innerHTML","props"]),(0,i.Wm)(D,{key:"actions",props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(j,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(V,{onClick:l=>e.deleteCategory({id:a.row.id}),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[K]]),(0,i.Wm)(Q),(0,i.wy)((0,i.Wm)(V,{onClick:e=>W.edit(a.row),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[K]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"]),(0,i.wy)((0,i.Wm)(z,{props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{colspan:"100%"},{default:(0,i.w5)((()=>[r,(0,i._)("div",p,[(0,i.Wm)(U,{dense:"",filled:"",modelValue:_.sub,"onUpdate:modelValue":l[1]||(l[1]=e=>_.sub=e)},{append:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(q,{size:"sm","no-caps":"",disable:""===_.sub,flat:"",onClick:e=>W.addSubCateg(a.row.id,a.rowIndex),class:"bg-primary",color:"white"},{default:(0,i.w5)((()=>[_.subLoading&&!0===_.subLoading[0]&&_.subLoading[1]===a.rowIndex?((0,i.wg)(),(0,i.j4)(T,{key:0,color:"white"})):((0,i.wg)(),(0,i.iD)("div",b,"Add"))])),_:2},1032,["disable","onClick"]),[[K]])])),_:2},1032,["modelValue"])]),0===a.row.expenseSubCategories.length?((0,i.wg)(),(0,i.iD)("div",m,"No sub-categories found.")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.row.expenseSubCategories,((e,d)=>((0,i.wg)(),(0,i.iD)("div",{key:d,class:"flex row col-12 items-center q-py-sm"},[(0,i._)("div",C,[(0,i._)("div",g,[(0,i.Wm)(U,{readonly:_.editingSubCat!==d,modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,dense:!0,outlined:"",class:"col-12",placeholder:e.name},{before:(0,i.w5)((()=>[(0,i.Wm)(q,{dense:"",size:"sm",color:"primary",round:"",onClick:e=>{_.expandChildSubCat&&_.expandChildSubCat[0]&&_.expandChildSubCat[1]===d?_.expandChildSubCat=!1:_.expandChildSubCat=[!0,d]},class:"q-mr-sm",icon:_.expandChildSubCat&&_.expandChildSubCat[0]&&_.expandChildSubCat[1]===d?"remove":"add"},null,8,["onClick","icon"])])),append:(0,i.w5)((()=>[_.i===d?((0,i.wg)(),(0,i.j4)(T,{key:0})):(0,i.wy)(((0,i.wg)(),(0,i.j4)(q,{key:1,dense:"",disable:_.subs===e.name||null===_.subs,"no-caps":"",flat:"",onClick:l=>{_.subs=e.name,W.editSubCateg(e.id,a.row.id),_.i=d,_.editingSubCat=null},class:"bg-green",color:"white",icon:"check"},null,8,["disable","onClick"])),[[t.F8,_.editingSubCat===d]])])),after:(0,i.w5)((()=>[(0,i.Wm)(q,{dense:"","no-caps":"",flat:"",onClick:e=>{_.editingSubCat=d},color:"amber",icon:"edit"},null,8,["onClick"]),_.loadingDeleteSubCat===e.id?((0,i.wg)(),(0,i.j4)(T,{key:0})):((0,i.wg)(),(0,i.j4)(q,{key:1,"no-caps":"",flat:"",dense:"",icon:"delete",onClick:l=>W.deleteSubCateg(e.id),color:"negative"},null,8,["onClick"]))])),_:2},1032,["readonly","modelValue","onUpdate:modelValue","placeholder"])]),_.expandChildSubCat&&!0===_.expandChildSubCat[0]&&_.expandChildSubCat[1]===d?((0,i.wg)(),(0,i.iD)("div",h,[w,(0,i._)("div",S,[(0,i.Wm)(U,{dense:"",filled:"",modelValue:_.childSub,"onUpdate:modelValue":l[2]||(l[2]=e=>_.childSub=e)},{append:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(q,{size:"sm","no-caps":"",disable:""===_.childSub,flat:"",onClick:e=>W.addChildSubCateg(a.row.expenseSubCategories[d].id,a.row.expenseSubCategories[d].id),class:"bg-primary",color:"white"},{default:(0,i.w5)((()=>[_.childSubLoading&&!0===_.childSubLoading[0]&&_.childSubLoading[1]===a.row.expenseSubCategories[d].id?((0,i.wg)(),(0,i.j4)(T,{key:0,color:"white"})):((0,i.wg)(),(0,i.iD)("div",y,"Add"))])),_:2},1032,["disable","onClick"]),[[K]])])),_:2},1032,["modelValue"])]),0===a.row.expenseSubCategories[d].expenseChildSubCategories.length?((0,i.wg)(),(0,i.iD)("div",f,"No child-sub-categories found.")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.row.expenseSubCategories[d].expenseChildSubCategories,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l,class:"flex row col-12 items-center q-py-sm"},[(0,i._)("div",x,[(0,i.Wm)(U,{readonly:_.editingChildSubCat!==l,modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,dense:!0,outlined:"",class:"col-12",placeholder:e.name},{before:(0,i.w5)((()=>[(0,i.Wm)(I,{name:"fiber_manual_record",class:"q-mr-sm"})])),append:(0,i.w5)((()=>[_.iChild===l?((0,i.wg)(),(0,i.j4)(T,{key:0})):(0,i.wy)(((0,i.wg)(),(0,i.j4)(q,{key:1,dense:"",disable:_.childSubs===e.name||null===_.childSubs,"no-caps":"",flat:"",onClick:a=>{_.childSubs=e.name,W.editChildSubCateg(e.id),_.iChild=l,_.editingChildSubCat=null},class:"bg-green",color:"white",icon:"check"},null,8,["disable","onClick"])),[[t.F8,_.editingChildSubCat===l]])])),after:(0,i.w5)((()=>[(0,i.Wm)(q,{dense:"","no-caps":"",flat:"",onClick:e=>_.editingChildSubCat=l,color:"amber",icon:"edit"},null,8,["onClick"]),_.loadingDeleteChildSubCat===e.id?((0,i.wg)(),(0,i.j4)(T,{key:0})):((0,i.wg)(),(0,i.j4)(q,{key:1,"no-caps":"",flat:"",dense:"",icon:"delete",onClick:l=>W.deleteChildSubCat(e.id),color:"negative"},null,8,["onClick"]))])),_:2},1032,["readonly","modelValue","onUpdate:modelValue","placeholder"])])])))),128))])):(0,i.kq)("",!0)])])))),128))])),_:2},1024)])),_:2},1032,["props"]),[[t.F8,a.expand&&_.expandSubId===a.row.id]])])),_:1},8,["rows","columns","loading"])])),_:1})]),(0,i.Wm)(F,{seamless:"",position:"right",modelValue:_.prompt,"onUpdate:modelValue":l[4]||(l[4]=e=>_.prompt=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(H,{onCloseDialogue:l[3]||(l[3]=l=>{_.prompt=!1,e.getCategories()}),actionType:_.action,body:_.body},null,8,["actionType","body"])])),_:1},8,["modelValue"])])),_:1})}var _=a(93617),W=a(11966),q=a(46303);const v={data(){return{editingChildSubCat:null,editingSubCat:null,loadingDeleteChildSubCat:null,loadingDeleteSubCat:null,expandSubId:null,expandChildSubId:null,prompt:!1,loading:!1,expandChildSubCat:!1,subLoading:!1,childSubLoading:!1,subs:"",childSubs:"",sub:"",childSub:"",i:null,iChild:null,action:"",body:{},crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Category",icon:"category",path:"/finance/categories"}],columns:[{name:"#",align:"center",label:"#",field:"#"},{name:"name",align:"left",label:"Name",field:"name"},{name:"description",align:"left",label:"Description",field:"description"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},components:{breadcrumps:q.Z,modal:W.Z},computed:{...(0,_.rn)("financeStore",["categories"])},methods:{...(0,_.nv)("financeStore",["getCategories","addChildSubCategory","addSubCategory","deleteChildSubCategory","deleteSubCategory","editChildSubCategory","editSubCategory","deleteCategory"]),rowColor(e){if(e.rowIndex%2!==0)return"background: #fff;"},async editSubCateg(e,l){await this.editSubCategory({id:e,expenseCategoryId:l,name:this.subs}),this.i=null},async editChildSubCateg(e){await this.editChildSubCategory({id:e,name:this.childSubs}),this.iChild=null},async addSubCateg(e,l){this.subLoading=[!0,l],await this.addSubCategory({expenseCategoryId:e,name:this.sub}),this.sub=null,this.subLoading=!1},async addChildSubCateg(e,l){this.childSubLoading=[!0,l],await this.addChildSubCategory({expenseSubCategoryId:e,name:this.childSub}),this.childSub=null,this.childSubLoading=!1},edit(e){this.body=e,this.action="Edit",this.prompt=!0},async deleteChildSubCat(e){this.loadingDeleteChildSubCat=e,await this.deleteChildSubCategory({id:Number(e)}),this.loadingDeleteChildSubCat=null},async deleteSubCateg(e){this.loadingDeleteSubCat=e,await this.deleteSubCategory({id:Number(e)}),this.loadingDeleteSubCat=null}},async mounted(){await this.getCategories()}};var D=a(24379),I=a(2165),Z=a(47704),V=a(57678),Q=a(18186),L=a(83884),j=a(20811),z=a(27011),T=a(83414),U=a(52035),A=a(24554),N=a(65869),H=a(64689),F=a(90682),M=a(46778),K=a(60677),P=a(7518),Y=a.n(P);v.render=k;const B=v;Y()(v,"components",{QPage:D.Z,QBtn:I.Z,QScrollArea:Z.Z,QTable:V.Z,QTr:Q.Z,QTd:L.Z,QMenu:j.Z,QList:z.Z,QItem:T.Z,QItemSection:U.Z,QIcon:A.Z,QSeparator:N.Z,QInput:H.Z,QSpinnerTail:F.Z,QDialog:M.Z}),Y()(v,"directives",{ClosePopup:K.Z})}}]);