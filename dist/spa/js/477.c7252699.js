"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[477],{4477:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ee});s(246);var o=s(3673),a=s(2323),l=s(3402),i=s.n(l);const r=e=>((0,o.dD)("data-v-569c5134"),e=e(),(0,o.Cn)(),e),n={class:"flex items-center justify-between"},d=r((()=>(0,o._)("p",{class:"text-h4"},"Tasks",-1))),m=r((()=>(0,o._)("div",{class:"row"},null,-1))),u={class:"flex items-center justify-between"},c={class:"q-mb-none text-white"},p={style:{height:"auto"}},h={class:"bg-white relative-position q-pa-sm q-mb-xs q-ml-xs q-mr-xs rounded-borders",style:{border:"0.25px solid lightgrey","max-width":"14.5rem !important"}},b={class:"flex items-center justify-between"},f=["onClick"],g=["innerHTML"],y={class:"row"},w={class:"flex"},k=r((()=>(0,o._)("img",{src:i()},null,-1))),_={key:0,class:"q-mt-sm text-subtitle1 text-grey"},v={class:"flex items-start q-mt-xs q-ml-xs"},x=r((()=>(0,o._)("img",{src:i()},null,-1))),q={class:"justify-end flex"};function W(e,t,s,l,i,r){const W=(0,o.up)("breadcrmps"),C=(0,o.up)("q-btn"),D=(0,o.up)("q-icon"),j=(0,o.up)("q-item-section"),Z=(0,o.up)("q-item"),V=(0,o.up)("q-separator"),z=(0,o.up)("q-list"),S=(0,o.up)("q-menu"),U=(0,o.up)("q-avatar"),Q=(0,o.up)("q-item-label"),T=(0,o.up)("q-select"),I=(0,o.up)("q-popup-edit"),A=(0,o.up)("q-chip"),M=(0,o.up)("draggable"),Y=(0,o.up)("q-scroll-area"),H=(0,o.up)("q-markup-table"),L=(0,o.up)("modal"),P=(0,o.up)("q-dialog"),$=(0,o.up)("modalt"),R=(0,o.up)("task",!0),B=(0,o.up)("q-page"),E=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(B,{class:"q-pa-md",style:{"overflow-x":"hidden !important"}},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",null,[d,(0,o.Wm)(W,{map:l.crumps},null,8,["map"])]),(0,o.Wm)(C,{onClick:t[0]||(t[0]=e=>{this.action="Add",i.dialogue=!0}),color:"primary",label:"Create Board",unelevated:"",rounded:"","no-caps":""})]),m,(0,o.Wm)(Y,{"thumb-style":i.thumbStyle,"bar-style":i.barStyle,style:{height:"70vh",width:"100% !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{class:"flex q-mt-md tasks-table bg-secondary",flat:""},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.columns,(e=>((0,o.wg)(),(0,o.iD)("th",{class:"round-borders",style:(0,a.j5)(`background-color: ${e.boardAttribute.color}`),key:e.id},[(0,o._)("div",u,[(0,o._)("p",c,(0,a.zw)(e.name),1),(0,o.Wm)(C,{color:"white",dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(Z,{onClick:t=>r.delBoard(e.id),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[E]]),(0,o.Wm)(V),(0,o.wy)((0,o.Wm)(Z,{onClick:t=>{i.body=e,i.action="Edit",i.dialogue=!0},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[E]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])],4)))),128))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.columns,(e=>((0,o.wg)(),(0,o.iD)("td",{key:e.id,style:(0,a.j5)([`background-color: ${e.boardAttribute.accent};`,{width:"15rem",height:"auto"}]),class:"q-mr-sm round-borders"},[(0,o.Wm)(Y,{"thumb-style":i.thumbStyle1,"bar-style":i.barStyle1,style:{height:"50vh",width:"15rem"}},{default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o.Wm)(M,{style:{height:"49vh"},tag:"div",class:"q-mt-sm",clone:r.clone,group:{name:"people",pull:r.pullFunction},onStart:r.start,"component-data":{tag:"div"},onChange:r.change,list:e.tasks,onClone:r.clone,"item-key":"id"},{item:(0,o.w5)((({element:s})=>[(0,o._)("div",h,[(0,o._)("div",b,[(0,o._)("p",{onClick:e=>{i.taskBody=s,i.taskDialogue=!0},class:"q-mb-none cursor-pointer",style:{width:"50% !important",overflow:"hidden !important","text-overflow":"ellipsis !important"}},(0,a.zw)(s.name),9,f),(0,o.Wm)(C,{style:{border:"0.25px solid lightgrey"},dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(Z,{onClick:e=>r.delTask({id:s.id}),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[E]]),(0,o.Wm)(V),(0,o.wy)((0,o.Wm)(Z,{onClick:t=>r.openDialogue(s,e.id),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[E]])])),_:2},1024)])),_:2},1024)])),_:2},1024)]),(0,o._)("p",{class:"q-mt-none text-grey",style:{width:"50% !important",overflow:"hidden !important","text-overflow":"ellipsis !important"},innerHTML:s.description},null,8,g),(0,o._)("div",y,[(0,o._)("div",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.memberUsers.slice(0,2),((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"q-mr-xs q-mt-xs q-mb-xs",key:e.id},[(0,o.Wm)(U,{size:"30px"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{round:"",size:"5px",onClick:t=>r.delMember({id:s.id,members:[e.userId]}),icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"]),k])),_:2},1024)])))),128))]),s.memberUsers.length>2?((0,o.wg)(),(0,o.iD)("p",_,"....+"+(0,a.zw)(s.memberUsers.length-2),1)):(0,o.kq)("",!0),(0,o._)("div",v,[(0,o.Wm)(C,{onClick:e=>r.getUserOptions(s),round:"",size:"11px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{modelValue:i.members,"onUpdate:modelValue":t[2]||(t[2]=e=>i.members=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,o.w5)((e=>[(0,o.Wm)(T,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:i.members,"onUpdate:modelValue":t[1]||(t[1]=e=>i.members=e),options:i.options,label:"Choose members",loading:i.isLoaded,disable:0===i.options.length,hint:0===i.options.length?"All users has been added":""},{option:(0,o.w5)((e=>[(0,o.Wm)(Z,(0,a.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"avatar-list"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{class:"q-mr-xs",size:"30px"},{default:(0,o.w5)((()=>[x])),_:1}),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","loading","disable","hint"]),(0,o.wy)((0,o.Wm)(C,{onClick:e=>r.addMembs(s.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===i.members.length},null,8,["onClick","disable"]),[[E]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"]),(0,o.Wm)(A,{square:"",class:(0,a.C_)([r.priority(s.priority),"absolute-bottom-right q-mb-sm q-mr-sm"]),size:"sm"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(s.priority),1)])),_:2},1032,["class"])])])])])),_:2},1032,["clone","group","onStart","onChange","list","onClone"])])])),_:2},1032,["thumb-style","bar-style"]),(0,o._)("div",q,[(0,o.Wm)(C,{icon:"add",size:"10px",onClick:t=>{i.bId=e.id,i.actiont="Add",i.dialoguet=!0},unelevated:"",round:"","no-caps":"",color:"primary"},null,8,["onClick"])])],4)))),128))])])),_:1})])),_:1},8,["thumb-style","bar-style"]),(0,o.Wm)(P,{seamless:"",position:"right",modelValue:i.dialogue,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{onCloseDialogue:r.getAll,action:i.action,body:i.body},null,8,["onCloseDialogue","action","body"])])),_:1},8,["modelValue"]),(0,o.Wm)(P,{seamless:"",position:"right",modelValue:i.dialoguet,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dialoguet=e)},{default:(0,o.w5)((()=>[(0,o.Wm)($,{onCloseDialogue:r.getAll,action:i.actiont,boardId:i.bId,body:i.bodyt},null,8,["onCloseDialogue","action","boardId","body"])])),_:1},8,["modelValue"]),(0,o.Wm)(P,{modelValue:i.taskDialogue,"onUpdate:modelValue":t[5]||(t[5]=e=>i.taskDialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{task:i.taskBody},null,8,["task"])])),_:1},8,["modelValue"])])),_:1})}var C=s(3617),D=s(6303),j=s(470),Z=s.n(j),V=s(52),z=s.n(V);const S=e=>((0,o.dD)("data-v-cf5d618c"),e=e(),(0,o.Cn)(),e),U={class:"column qu-gutter-sm"},Q={class:"flex items-center justify-start"},T=S((()=>(0,o._)("i",{class:"fas fa-square q-pr-sm",style:{"font-size":"25px",color:"#308be5"}},null,-1))),I={class:"flex items-center justify-start"},A=S((()=>(0,o._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#1d1d1d"}},null,-1))),M={class:"flex items-center justify-start"},Y=S((()=>(0,o._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#82b865"}},null,-1))),H={class:"flex items-center justify-start"},L=S((()=>(0,o._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#cc444b"}},null,-1))),P={class:"flex items-center justify-start"},$=S((()=>(0,o._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#ffae30"}},null,-1)));function R(e,t,s,l,i,r){const n=(0,o.up)("q-toolbar-title"),d=(0,o.up)("q-btn"),m=(0,o.up)("q-toolbar"),u=(0,o.up)("q-input"),c=(0,o.up)("q-radio"),p=(0,o.up)("q-popup-proxy"),h=(0,o.up)("q-card-section"),b=(0,o.up)("q-card"),f=(0,o.up)("q-layout"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(f,{style:{width:"550px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(s.action+" ")+" Board ",1)])),_:1}),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,o.Wm)(h,{class:"q-gutter-md scroll"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{ref:"nameRef",rules:[e=>e&&0!==e.length||"This field is required"],outlined:"",modelValue:i.board.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.board.name=e),label:"Name"},null,8,["rules","modelValue"]),(0,o.Wm)(u,{label:"Board color",readonly:"",outlined:"",modelValue:i.board.color,"onUpdate:modelValue":t[6]||(t[6]=e=>i.board.color=e),ref:"colorRef",rules:[e=>e&&0!==e.length||"This field is required"]},{append:(0,o.w5)((()=>[(0,o._)("i",{class:"fas fa-square",style:(0,a.j5)([`color: ${i.board.color}`,{"font-size":"25px"}])},null,4)])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"pop",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o._)("div",U,[(0,o._)("div",Q,[(0,o.Wm)(c,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[1]||(t[1]=e=>i.board.color=e),val:"#308be5"},null,8,["modelValue"]),T]),(0,o._)("div",I,[(0,o.Wm)(c,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[2]||(t[2]=e=>i.board.color=e),val:"#1d1d1d"},null,8,["modelValue"]),A]),(0,o._)("div",M,[(0,o.Wm)(c,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[3]||(t[3]=e=>i.board.color=e),val:"#82b865"},null,8,["modelValue"]),Y]),(0,o._)("div",H,[(0,o.Wm)(c,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[4]||(t[4]=e=>i.board.color=e),val:"#cc444b"},null,8,["modelValue"]),L]),(0,o._)("div",P,[(0,o.Wm)(c,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[5]||(t[5]=e=>i.board.color=e),val:"#ffae30"},null,8,["modelValue"]),$])])])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{loading:i.loading,onClick:r.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}const B={props:["body","action"],data(){return{id:null,loading:!1,board:{name:"",color:"#308be5",position:0}}},methods:{...(0,C.nv)("projectStore",["addBoard","editBoard"]),async submit(){this.$refs.nameRef.validate(),this.$refs.colorRef.validate(),this.$refs.nameRef.hasError||this.$refs.colorRef.hasError||(this.loading=!0,this.board.position=Number(this.board.position),"Add"===this.action?await this.addBoard(this.board):"Edit"===this.action&&await this.editBoard({...this.board,id:this.id}),this.loading=!1,this.$emit("closeDialogue"))}},mounted(){"Edit"===this.action&&(this.board.name=this.body.name,this.board.color=this.body.boardAttribute.color,this.id=this.body.id)}};var E=s(9214),N=s(151),O=s(9570),F=s(3747),K=s(2165),G=s(5589),J=s(4689),X=s(3944),ee=s(7991),te=s(4554),se=s(7134),oe=s(677),ae=s(7518),le=s.n(ae);B.render=R,B.__scopeId="data-v-cf5d618c";const ie=B;le()(B,"components",{QLayout:E.Z,QCard:N.Z,QToolbar:O.Z,QToolbarTitle:F.Z,QBtn:K.Z,QCardSection:G.Z,QInput:J.Z,QPopupProxy:X.Z,QRadio:ee.Z,QIcon:te.Z,QColor:se.Z}),le()(B,"directives",{ClosePopup:oe.Z});const re=e=>((0,o.dD)("data-v-bfbc1b34"),e=e(),(0,o.Cn)(),e),ne=re((()=>(0,o._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Start date",-1))),de=re((()=>(0,o._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Task deadline",-1)));function me(e,t,s,l,i,r){const n=(0,o.up)("q-toolbar-title"),d=(0,o.up)("q-btn"),m=(0,o.up)("q-toolbar"),u=(0,o.up)("q-input"),c=(0,o.up)("q-item-label"),p=(0,o.up)("q-item-section"),h=(0,o.up)("q-item"),b=(0,o.up)("q-select"),f=(0,o.up)("Datepicker"),g=(0,o.up)("q-editor"),y=(0,o.up)("q-card-section"),w=(0,o.up)("q-card"),k=(0,o.up)("q-layout"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(k,{style:{width:"550px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(s.action+" ")+"Task ",1)])),_:1}),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[_]])])),_:1}),(0,o.Wm)(y,{class:"q-gutter-md scroll"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{ref:"nameRef",rules:[e=>e&&e.length>0||"This field is required"],outlined:"",modelValue:i.task.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.task.name=e),label:"Name","lazy-rules":""},null,8,["rules","modelValue"]),(0,o.Wm)(b,{ref:"projectRef",outlined:"",modelValue:i.project,"onUpdate:modelValue":t[1]||(t[1]=e=>i.project=e),options:i.projectOptions,label:"Assign to a project",loading:i.isLoaded,clearable:""},{option:(0,o.w5)((e=>[(0,o.Wm)(h,(0,o.dG)({onClick:t=>null!==i.project&&e.opt.id!==i.project.id?r.updateProjectOptions(e):""},e.itemProps),{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040,["onClick"])])),_:1},8,["modelValue","options","loading"]),(0,o.Wm)(b,{ref:"memberRef",rules:[e=>e&&e.length>0||"This field is required"],"use-chips":"",outlined:"",modelValue:i.members,"onUpdate:modelValue":t[2]||(t[2]=e=>i.members=e),multiple:"",options:i.memberOptions,counter:"",hint:"Members",label:"Choose members",loading:i.isLoaded,clearable:""},null,8,["rules","modelValue","options","loading"]),(0,o._)("div",null,[ne,(0,o.Wm)(f,{modelValue:i.task.plannedStartDate,"onUpdate:modelValue":t[3]||(t[3]=e=>i.task.plannedStartDate=e),showNowButton:""},null,8,["modelValue"])]),(0,o._)("div",null,[de,(0,o.Wm)(f,{class:"q-mt-sm",modelValue:i.task.plannedEndDate,"onUpdate:modelValue":t[4]||(t[4]=e=>i.task.plannedEndDate=e),showNowButton:""},null,8,["modelValue"])]),(0,o.Wm)(g,{modelValue:i.task.description,"onUpdate:modelValue":t[5]||(t[5]=e=>i.task.description=e),dense:e.$q.screen.lt.md,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"]),(0,o.Wm)(b,{ref:"priorityRef",clearable:"",modelValue:i.task.priority,"onUpdate:modelValue":t[6]||(t[6]=e=>i.task.priority=e),options:["High","Medium","Low"],outlined:"",label:"Priority",rules:[e=>e&&e.length>0||"This field is required"]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{loading:i.loading,onClick:r.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}var ue=s(1082),ce=(s(3544),s(4789));const pe={components:{Datepicker:ce.Z},props:["action","body","boardId"],data(){return{isLoaded:!1,loading:!1,projectOptions:[],client:null,project:null,members:[],memberOptions:[],task:{name:"",priority:"",description:"Description",plannedStartDate:"",plannedEndDate:"",members:[],boardId:null},id:null}},computed:{...(0,C.rn)("userStore",["users"]),...(0,C.rn)("projectStore",["projects"])},methods:{...(0,C.nv)("projectStore",["addProject","editProject","getProjects"]),...(0,C.nv)("projectStore",["addTask","editTask"]),...(0,C.nv)("crmStore",["getClients"]),...(0,C.nv)("userStore",["getUsers"]),updateProjectOptions(e){let t=[],s=[];this.memberOptions=[],this.members=[];for(let a=0;a<this.projects.length;a++)if(e.opt.id===this.projects[a].id){for(let e=0;e<this.projects[a].leaderUsers.length;e++)s.push({id:this.projects[a].leaderUsers[e].userId,label:this.projects[a].leaderUsers[e].name});for(let e=0;e<this.projects[a].memberUsers.length;e++)t.push({id:this.projects[a].memberUsers[e].userId,label:this.projects[a].memberUsers[e].name})}var o=s.concat(t);this.memberOptions=o.reduce(((e,t)=>(e.some((e=>e.label===t.label&&e.id===t.id))||e.push(t),e)),[])},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),ue.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},async submit(){if(this.$refs.memberRef.validate(),this.$refs.nameRef.validate(),this.$refs.priorityRef.validate(),!(this.$refs.memberRef.hasError||this.$refs.nameRef.hasError||this.$refs.priorityRef.hasError)){for(let e=0;e<this.members.length;e++)this.task.members.push(Number(this.members[e].id));this.task.boardId=Number(this.boardId),this.loading=!0,this.task.plannedStartDate=ue.ZP.formatDate(this.task.plannedStartDate,"YYYY-MM-DD HH:mm"),this.task.plannedEndDate=ue.ZP.formatDate(this.task.plannedEndDate,"YYYY-MM-DD HH:mm"),"Add"===this.action?await this.create():(console.log(this.task),await this.update()),this.loading=!1,this.$emit("closeDialogue")}},async create(){await this.addTask(this.task)},async update(){await this.editTask({...this.task,id:Number(this.body.id)})}},async mounted(){if("Edit"===this.action){this.task.name=this.body.name,this.task.description=this.body.description,this.task.priority=this.body.priority,this.task.status=this.body.status,this.task.plannedStartDate=this.dateConversion(this.body.plannedStartDate),this.task.plannedEndDate=this.dateConversion(this.body.plannedEndDate),this.body.project&&(this.project={label:this.body.project.name,id:this.body.project.id});for(let e=0;e<this.body.memberUsers.length;e++)this.members.push({label:this.body.memberUsers[e].name,id:this.body.memberUsers[e].userId})}else this.task.plannedStartDate=ue.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm"),this.task.plannedEndDate=ue.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm");this.isLoaded=!0,await this.getUsers(),await this.getProjects();for(let e=0;e<this.users.length;e++)this.memberOptions.push({label:this.users[e].name,id:this.users[e].id});for(let e=0;e<this.projects.length;e++)this.projectOptions.push({label:this.projects[e].name,id:this.projects[e].id,leaders:this.projects[e].leaderUsers,members:this.projects[e].memberUsers});this.isLoaded=!1}};var he=s(3314),be=s(3414),fe=s(2035),ge=s(2350),ye=s(9989);pe.render=me,pe.__scopeId="data-v-bfbc1b34";const we=pe;le()(pe,"components",{QLayout:E.Z,QCard:N.Z,QToolbar:O.Z,QToolbarTitle:F.Z,QBtn:K.Z,QCardSection:G.Z,QInput:J.Z,QSelect:he.Z,QItem:be.Z,QItemSection:fe.Z,QItemLabel:ge.Z,QEditor:ye.Z}),le()(pe,"directives",{ClosePopup:oe.Z});var ke=s(8880);const _e=e=>((0,o.dD)("data-v-64383259"),e=e(),(0,o.Cn)(),e),ve={class:"text-h6 q-pb-sm"},xe={class:"text-caption q-mb-none"},qe={class:"text-caption"},We={class:"text-caption text-grey-7 q-ma-none"},Ce={class:"flex"},De=_e((()=>(0,o._)("img",{src:i()},null,-1))),je={class:"text-caption text-grey-7"};function Ze(e,t,s,l,i,r){const n=(0,o.up)("q-card-section"),d=(0,o.up)("q-avatar"),m=(0,o.up)("q-chip"),u=(0,o.up)("q-btn"),c=(0,o.up)("q-card-actions"),p=(0,o.up)("q-card"),h=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(p,{style:{width:"25rem !important","min-width":"300px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o._)("div",ve,(0,a.zw)(s.task.name),1),(0,o._)("p",xe,"Start date: "+(0,a.zw)(r.dateConversion(s.task.plannedStartDate)),1),(0,o._)("p",qe,"Deadline: "+(0,a.zw)(r.dateConversion(s.task.plannedEndDate)),1)])),_:1}),(0,o.Wm)(n,{style:{"word-break":"break-all"},innerHTML:s.task.description,class:"q-pt-none"},null,8,["innerHTML"]),(0,o.Wm)(n,{class:"q-pt-none flex column"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("p",We,"Assigned users:",512),[[ke.F8,0!==s.task.memberUsers.length]]),(0,o._)("div",Ce,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.task.memberUsers,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[De])),_:1}),(0,o.Uk)(" "+(0,a.zw)(e.name),1)])),_:2},1024)])))),128))]),(0,o.wy)((0,o._)("p",je,"No one has been assigned to this task!",512),[[ke.F8,0===s.task.memberUsers.length]])])),_:1}),(0,o.Wm)(c,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(u,{color:"negative",flat:"",label:"Close"},null,512),[[h]])])),_:1}),(0,o.Wm)(m,{class:(0,a.C_)([r.priority(s.task.priority),"absolute-top-right q-mr-sm q-mt-sm"]),"no-caps":"",color:r.priority(s.task.priority)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(s.task.priority),1)])),_:1},8,["class","color"])])),_:1})}const Ve={props:["task"],methods:{dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),ue.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},priority(e){switch(e){case"High":return"text-positive bg-green-1";case"Medium":return"text-warning bg-yellow-2";case"Low":return"text-negative bg-red-1"}}}};var ze=s(7030),Se=s(5096),Ue=s(9367);Ve.render=Ze,Ve.__scopeId="data-v-64383259";const Qe=Ve;le()(Ve,"components",{QCard:N.Z,QCardSection:G.Z,QChip:ze.Z,QAvatar:Se.Z,QCardActions:Ue.Z,QBtn:K.Z}),le()(Ve,"directives",{ClosePopup:oe.Z});const Te={components:{breadcrmps:D.Z,draggable:Z(),modal:ie,modalt:we,task:Qe},data(){return{taskBody:null,taskDialogue:!1,projectsToChoose:[],project:null,projects:[],isLoaded:!1,members:[],options:[],columns:[],attempt:0,dialogue:!1,dialoguet:!1,action:"Add",actiont:"Add",boardId:null,body:null,bodyt:null,bId:null,thumbStyle:{bottom:"2px",borderRadius:"7px",backgroundColor:"#027be3",width:"100%",height:"4px",opacity:.75},barStyle:{bottom:"-.75px",borderRadius:"9px",backgroundColor:"#027be3",width:"100%",height:"8px",opacity:.2},thumbStyle1:{right:"4px",borderRadius:"7px",backgroundColor:"#027be3",width:"4px",opacity:.75},barStyle1:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"8px",opacity:.2}}},computed:{...(0,C.rn)("userStore",["users"])},methods:{...(0,C.nv)("projectStore",["getProjects","deleteBoard","addMembers","deleteTask","deleteMember"]),...(0,C.nv)("userStore",["getUsers"]),priority(e){switch(e){case"High":return"text-positive bg-green-1";case"Medium":return"text-warning bg-yellow-2";case"Low":return"text-negative bg-red-1"}},clone({name:e,description:t,memberUsers:s,id:o,priority:a}){return{name:e,description:t,memberUsers:s,id:o,priority:a}},pullFunction(){return!this.controlOnStart||"clone"},start({originalEvent:e}){this.controlOnStart=e.ctrlKey},getAccentColor(e){switch(e){case"#308be5":return"#a1d2f8";case"#82b865":return"#c6dfb9";case"#cc444b":return"#e4b1ab";case"#ffae30":return"#ffd899";case"#1d1d1d":return"lightgrey"}},openDialogue(e,t){let s=0;!0===this.dialoguet?(this.dialoguet=!1,s=200):s=0,setTimeout((()=>{this.bodyt=e,this.actiont="Edit",this.dialoguet=!0,this.boardId=t}),s)},async delTask(e){await this.deleteTask(e),this.getAll()},async delMember(e){await this.deleteMember(e),this.getAll()},async addMembs(e){let t=[];for(let s=0;s<this.members.length;s++)t.push(this.members[s].id);await this.addMembers({id:e,members:t}),await this.getAll(),this.members=[]},getUserOptions(e){let t=[],s=[];this.options=[],setTimeout((()=>{if(e){for(let o=0;o<this.users.length;o++){for(let t=0;t<e.memberUsers.length;t++)Number(e.memberUsers[t].userId)===Number(this.users[o].id)&&s.push({id:this.users[o].id,label:this.users[t].name});t.push({id:this.users[o].id,label:this.users[o].name})}this.options=t.filter((({id:e})=>!s.some((({id:t})=>t===e))))}}),200)},async change(e){if(this.attempt+=1,this.attempt%2!==0)for(let t=0;t<this.columns.length;t++)for(let s=0;s<this.columns[t].tasks.length;s++)if(Number(this.columns[t].tasks[s].id)===Number(e.added.element.id)){await z().post("https://onconnect-backend-api.herokuapp.com/api/v1/tasks/changeBoard",{id:Number(e.added.element.id),boardId:Number(this.columns[t].id)},{headers:{Authorization:localStorage.getItem("accessToken")}})}},async getAll(){let e=await z().get("https://onconnect-backend-api.herokuapp.com/api/v1/boards",{headers:{Authorization:localStorage.getItem("accessToken")}});this.columns=e.data.data;for(let t=0;t<this.columns.length;t++)this.columns[t].boardAttribute={...this.columns[t].boardAttribute,accent:this.getAccentColor(this.columns[t].boardAttribute.color)};!0===this.dialogue&&(this.dialogue=!1),!0===this.dialoguet&&(this.dialoguet=!1)},async delBoard(e){await this.deleteBoard({id:e}),this.getAll()}},async mounted(){this.isLoaded=!0,await this.getAll(),await this.getUsers(),await this.getUserOptions(),this.isLoaded=!1},setup(){return{crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Tasks",icon:"task",path:"/projects/tasks"}]}}};var Ie=s(4379),Ae=s(7704),Me=s(481),Ye=s(811),He=s(7011),Le=s(5869),Pe=s(8870),$e=s(1289),Re=s(6778),Be=s(1277);Te.render=W,Te.__scopeId="data-v-569c5134";const Ee=Te;le()(Te,"components",{QPage:Ie.Z,QBtn:K.Z,QScrollArea:Ae.Z,QMarkupTable:Me.Z,QMenu:Ye.Z,QList:He.Z,QItem:be.Z,QItemSection:fe.Z,QIcon:te.Z,QSeparator:Le.Z,QAvatar:Se.Z,QTooltip:Pe.Z,QPopupEdit:$e.Z,QSelect:he.Z,QItemLabel:ge.Z,QChip:ze.Z,QDialog:Re.Z,QTable:Be.Z}),le()(Te,"directives",{ClosePopup:oe.Z})}}]);