"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[2841],{62841:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ve});l(90246);var s=l(83673),a=l(62323),n=l(98880),i=l(93402),o=l.n(i);const d=e=>((0,s.dD)("data-v-74539944"),e=e(),(0,s.Cn)(),e),r=d((()=>(0,s._)("div",{class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},[(0,s._)("div",{class:"text-h4"},"Expenses")],-1))),u={class:"row justify-between"},p={class:"column"},m=["src"],c={key:1,src:o()},h={class:"column"},x={class:"text-h6"},f={class:"text-subtitle2 text-grey"},b={class:"text-subtitle2 text-grey"},g={class:"text-subtitle2 text-grey"},w={class:"text-subtitle2 text-grey"},v={class:"column col-lg-6 col-md-6 col-xs-12 col-sm-12 items-end q-mt-md"},y={class:"text-h6"},_={class:"text-subtitle2"},q={class:"text-subtitle2"},E={class:"row col-12 justify-between q-mt-sm"},k={class:"column"},W=d((()=>(0,s._)("p",{class:"text-h6",style:{"border-bottom":"1px solid rgb(221, 221, 221)"}},"Supplier",-1))),D={class:"column"},z={class:"text-subtitle2"},F={class:"text-subtitle2"},C={class:"text-subtitle2"},N={class:"text-subtitle2"},$={class:"text-subtitle2"},T={class:"text-subtitle2"},V={class:"q-mt-xl"},P=d((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-left"},"#"),(0,s._)("th",{class:"text-left"},"Item"),(0,s._)("th",{class:"text-left"},"Description"),(0,s._)("th",{class:"text-left"},"Unit price"),(0,s._)("th",{class:"text-left"},"Quantity"),(0,s._)("th",{class:"text-left"},"Amount")])],-1))),Q={class:"text-left"},Z={class:"text-left"},A={class:"text-left"},I={class:"text-left"},S={class:"text-left"},U={class:"text-left"},R={class:"row q-mt-xl"},j=d((()=>(0,s._)("div",{class:"col-9"},null,-1))),B={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12 column q-gutter-sm"},L={class:"text-grey q-pa-none"},H=["innerHTML"],M={class:"text-h6 text-grey q-mt-lg"},J={class:"text-subtitle1 text-grey-5"},K={class:"row q-pb-xl"},O={class:"flex column flex-center q-pr-md q-pt-md"},Y=["src"],G={class:"text-center text-caption text-black",style:{"max-width":"100px"}},X=["href"],ee={class:"text-h6 text-grey q-mt-lg"},te={class:"text-subtitle1 text-grey-5"},le={class:"row q-pb-xl"},se={class:"flex column flex-center q-pr-md q-pt-md"},ae={class:"text-center text-caption text-black",style:{"max-width":"100px"}},ne=["href"],ie=d((()=>(0,s._)("div",{class:"text-h6"},"Are you sure?",-1)));function oe(e,t,l,i,o,d){const oe=(0,s.up)("q-spinner"),de=(0,s.up)("q-page"),re=(0,s.up)("breadcrumps"),ue=(0,s.up)("q-avatar"),pe=(0,s.up)("DownloadPDFButton"),me=(0,s.up)("q-markup-table"),ce=(0,s.up)("q-input"),he=(0,s.up)("q-separator"),xe=(0,s.up)("q-card"),fe=(0,s.up)("q-btn"),be=(0,s.up)("q-badge"),ge=(0,s.up)("q-icon"),we=(0,s.up)("q-file"),ve=(0,s.up)("q-banner"),ye=(0,s.up)("q-popup-proxy"),_e=(0,s.up)("q-scroll-area"),qe=(0,s.up)("q-card-section"),Ee=(0,s.up)("q-card-actions"),ke=(0,s.up)("q-dialog"),We=(0,s.Q2)("close-popup");return o.isLoaded?((0,s.wg)(),(0,s.j4)(de,{key:1,class:"q-py-none q-my-none"},{default:(0,s.w5)((()=>[r,(0,s.Wm)(re,{class:"q-pa-md full-width",map:o.crumps},null,8,["map"]),(0,s.Wm)(_e,{class:"q-px-md",style:{height:"calc(100vh - 93px)"}},{default:(0,s.w5)((()=>[(0,s.Wm)(xe,{class:"q-pa-xl"},{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s._)("div",p,[(0,s.Wm)(ue,{square:"",size:"100px","font-size":"52px"},{default:(0,s.w5)((()=>[e.user.brand.logo?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.user.brand.logo},null,8,m)):((0,s.wg)(),(0,s.iD)("img",c))])),_:1}),(0,s._)("div",h,[(0,s._)("p",x,(0,a.zw)(e.user.brand.name),1),(0,s._)("p",f,"Email: "+(0,a.zw)(e.user.brand.email),1),(0,s._)("p",b,"Address: "+(0,a.zw)(e.user.brand.address),1),(0,s._)("p",g,"PhoneNumber: "+(0,a.zw)(e.user.brand.phoneNumber),1),(0,s._)("p",w,"Website: "+(0,a.zw)(e.user.brand.website),1)])]),(0,s._)("div",v,[(0,s._)("p",null,[(0,s.Wm)(pe,{body:d.getJSPDFProps()},null,8,["body"])]),(0,s._)("p",y,(0,a.zw)(e.oneExpense.expenseNumber),1),(0,s._)("p",_,"Expense Date: "+(0,a.zw)(d.dateConversion(e.oneExpense.date)),1),(0,s._)("p",q,"Due Date: "+(0,a.zw)(d.dateConversion(e.oneExpense.dueDate)),1)])]),(0,s._)("div",E,[(0,s._)("div",k,[W,(0,s._)("p",null,"Name: "+(0,a.zw)(e.oneExpense.supplierName),1),(0,s._)("p",null,"Email: "+(0,a.zw)(e.oneExpense.supplierEmail),1),(0,s._)("p",null,"Phone Number: "+(0,a.zw)(e.oneExpense.supplierPhoneNumbers),1)]),(0,s._)("div",D,[(0,s._)("p",z,"Currency Code: "+(0,a.zw)(e.oneExpense.currencyCode)+"/"+(0,a.zw)(e.oneExpense.exchangeRate),1),(0,s._)("p",F,"Billing Address: "+(0,a.zw)(e.oneExpense.billingAddress),1),(0,s._)("p",C,"Bank Fee: "+(0,a.zw)(e.oneExpense.bankFee),1),(0,s._)("p",N,"Payment Method: "+(0,a.zw)(e.oneExpense.paymentMethodName),1),(0,s._)("p",$,(0,a.zw)(e.oneExpense.category),1),(0,s._)("p",T,"Tax Type: "+(0,a.zw)(e.oneExpense.taxName),1)])]),(0,s._)("div",V,[(0,s.Wm)(me,{flat:"",bordered:""},{default:(0,s.w5)((()=>[P,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.oneExpense.expenseItems,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{style:(0,a.j5)(d.rowColor(t)),key:t},[(0,s._)("td",Q,(0,a.zw)(t+1),1),(0,s._)("td",Z,(0,a.zw)(e.name),1),(0,s._)("td",A,(0,a.zw)(e.description),1),(0,s._)("td",I,(0,a.zw)(e.unitPrice),1),(0,s._)("td",S,(0,a.zw)(e.qty),1),(0,s._)("td",U,(0,a.zw)(e.qty*e.unitPrice),1)],4)))),128))])])),_:1})]),(0,s._)("div",R,[j,(0,s._)("div",B,[(0,s.Wm)(ce,{mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",readonly:"",modelValue:o.stotal,"onUpdate:modelValue":t[0]||(t[0]=e=>o.stotal=e),label:"Subtotal"},null,8,["modelValue"]),(0,s.Wm)(ce,{mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",readonly:"",rules:[e=>Number(e)<=100||"Not more than 100!"],modelValue:o.taxRate,"onUpdate:modelValue":t[1]||(t[1]=e=>o.taxRate=e),label:"Tax Ratio%"},null,8,["rules","modelValue"]),(0,s.Wm)(ce,{mask:"#","fill-mask":"0","reverse-fill-mask":"",readonly:"","model-value":"Number",modelValue:o.discount,"onUpdate:modelValue":t[2]||(t[2]=e=>o.discount=e),label:"Discount%"},null,8,["modelValue"]),(0,s.Wm)(ce,{readonly:"",modelValue:o.total,"onUpdate:modelValue":t[3]||(t[3]=e=>o.total=e),label:"Grand total",type:"number"},null,8,["modelValue"])])]),(0,s.Wm)(he,{class:"q-mt-lg"}),(0,s._)("div",L,[(0,s._)("p",{class:"q-mt-md",innerHTML:e.oneExpense.description},null,8,H)])])),_:1}),(0,s.wy)((0,s._)("p",M,"Uploaded images",512),[[n.F8,0!==o.images.length]]),(0,s.Wm)(xe,{class:"q-pa-md q-mt-md"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("p",J,"No images has been uploaded.",512),[[n.F8,0===o.images.length]]),(0,s.wy)((0,s._)("div",K,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.images,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("div",O,[(0,s.Wm)(ue,{square:"",size:"100px"},{default:(0,s.w5)((()=>[(0,s.Wm)(be,{style:{background:"transparent !important"},transparent:"",floating:""},{default:(0,s.w5)((()=>[(0,s.Wm)(fe,{onClick:t=>(o.fileId=e.id,o.confirm=!0),round:"",size:"7.5px",icon:"delete",color:"negative",class:"absolute-top-right"},null,8,["onClick"])])),_:2},1024),(0,s._)("img",{src:e.url},null,8,Y)])),_:2},1024),(0,s._)("p",G,(0,a.zw)(e.name),1),(0,s._)("a",{href:e.url,target:"_blank"},[(0,s.Wm)(fe,{class:"text-primary bg-blue-1",unelevated:"",label:"Download","no-caps":""})],8,X)])])))),128))],512),[[n.F8,0!==o.images.length]]),(0,s.Wm)(fe,{label:"Upload images",icon:"backup",color:"grey","no-caps":"",push:"",flat:"",unelevated:"",class:"absolute-bottom-right q-mr-sm q-mb-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(ye,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ve,null,{default:(0,s.w5)((()=>[(0,s.Wm)(we,{filter:d.checkType,onRejected:d.onRejectedImage,clearable:"",label:"Image",outlined:"",modelValue:o.image,"onUpdate:modelValue":t[4]||(t[4]=e=>o.image=e)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(ge,{name:"attach_file"})])),_:1},8,["filter","onRejected","modelValue"]),(0,s.wy)((0,s.Wm)(fe,{label:"Upload",onClick:t[5]||(t[5]=e=>{d.addExpFile("image"),o.image=null}),disable:!o.image,"no-caps":"",flat:"",color:"primary",class:"q-mt-sm",size:"md"},null,8,["disable"]),[[We]])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.wy)((0,s._)("p",ee,"Uploaded files",512),[[n.F8,0!==o.files.length]]),(0,s.Wm)(xe,{class:"q-pa-md q-mt-md"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("p",te,"No files has been uploaded.",512),[[n.F8,0===o.files.length]]),(0,s.wy)((0,s._)("div",le,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.files,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("div",se,[(0,s.Wm)(ue,{square:"",size:"100px"},{default:(0,s.w5)((()=>[(0,s.Wm)(be,{style:{background:"transparent !important"},transparent:"",floating:""},{default:(0,s.w5)((()=>[(0,s.Wm)(fe,{onClick:t=>(o.fileId=e.id,o.confirm=!0),round:"",size:"7.5px",icon:"delete",color:"negative",class:"absolute-top-right"},null,8,["onClick"])])),_:2},1024),(0,s.Wm)(ge,{color:"grey",name:"attach_file"})])),_:2},1024),(0,s._)("p",ae,(0,a.zw)(e.name),1),(0,s._)("a",{href:e.url,target:"_blank"},[(0,s.Wm)(fe,{class:"text-primary bg-blue-1",unelevated:"",label:"Download","no-caps":""})],8,ne)])])))),128))],512),[[n.F8,0!==o.files.length]]),(0,s.Wm)(fe,{label:"Upload files",icon:"backup",color:"grey","no-caps":"",push:"",flat:"",unelevated:"",class:"absolute-bottom-right q-mr-sm q-mb-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(ye,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ve,null,{default:(0,s.w5)((()=>[(0,s.Wm)(we,{filter:d.checkFileType,onRejected:d.onRejectedFile,clearable:"",label:"File",outlined:"",modelValue:o.file,"onUpdate:modelValue":t[6]||(t[6]=e=>o.file=e)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(ge,{name:"attach_file"})])),_:1},8,["filter","onRejected","modelValue"]),(0,s.wy)((0,s.Wm)(fe,{label:"Upload",onClick:t[7]||(t[7]=e=>{d.addExpFile("file"),o.file=null}),"no-caps":"",disable:!o.file,flat:"",color:"primary",class:"q-mt-sm",size:"md"},null,8,["disable"]),[[We]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(ke,{modelValue:o.confirm,"onUpdate:modelValue":t[8]||(t[8]=e=>o.confirm=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(xe,{style:{width:"300px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(qe,null,{default:(0,s.w5)((()=>[ie])),_:1}),(0,s.Wm)(Ee,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(fe,{flat:"",label:"Cancel",color:"negative"},null,512),[[We]]),(0,s.wy)((0,s.Wm)(fe,{flat:"",label:"Delete",onClick:d.deleteExpenseFile,color:"primary"},null,8,["onClick"]),[[We]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})):((0,s.wg)(),(0,s.j4)(de,{key:0,class:"flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(oe,{color:"primary",size:"md"})])),_:1}))}var de=l(93617),re=l(30052),ue=l.n(re),pe=l(46303),me=l(6942);const ce={components:{BreadCrumpsVue:pe.Z,DownloadPDFButton:me.Z},data(){return{crumps:[],files:[],file:null,image:null,images:[],confirm:!1,fileId:null,isLoaded:!1,taxRate:0,total:0,discount:0,stotal:0}},computed:{...(0,de.rn)("example",["user"]),...(0,de.rn)("financeStore",["oneExpense"])},methods:{...(0,de.nv)("financeStore",["getExpense","addExpenseFile"]),...(0,de.nv)("example",["getUser"]),async deleteExpenseFile(){await ue().post("http://localhost:5050/api/v1/expenses/removeFile",{id:this.oneExpense.id,attachId:this.fileId},{headers:{Authorization:localStorage.getItem("accessToken")}});await this.getExpense(this.$route.params.id),this.fileAndImages()},dateConversion(e){return" "+e.split("T")[0]},rowColor(e){if(e%2===0)return"background: #f2f2f2 !important;"},checkType(e){return e.filter((e=>e.type.includes("image")))},checkFileType(e){return e.filter((e=>!e.type.includes("image")))},onRejectedImage(){this.$q.notify({type:"negative",message:"Only images are allowed!"})},onRejectedFile(){this.$q.notify({type:"negative",message:"Only files are allowed!"})},async addExpFile(e){let t=new FormData;t.append("id",this.oneExpense.id),"file"===e?t.append("files",this.file):t.append("files",this.image),await this.addExpenseFile(t),await this.getExpense(this.$route.params.id),this.fileAndImages()},fileAndImages(){this.files=[],this.images=[];for(let e=0;e<this.oneExpense.attachments.length;e++)this.oneExpense.attachments[e].contentType.includes("image")?this.images.push(this.oneExpense.attachments[e]):this.files.push(this.oneExpense.attachments[e])},getJSPDFProps(){var e,t,l,s,a,n,i,o,d,r,u,p,m,c,h,x,f,b;return{outputType:"save",returnJsPDFDocObject:!0,fileName:"Expense.pdf",orientationLandscape:!1,compress:!0,logo:{src:`http://localhost:5050/api/v1/readAsStream/?key=${null===(e=this.user)||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.logo}`,type:null,width:26.66,height:26.66,margin:{top:0,left:0}},business:{name:`${null===(l=this.user)||void 0===l||null===(s=l.brand)||void 0===s?void 0:s.name}`,address:`${null===(a=this.user)||void 0===a||null===(n=a.brand)||void 0===n?void 0:n.address}`,phone:`${null===(i=this.user)||void 0===i||null===(o=i.brand)||void 0===o?void 0:o.phoneNumber}`,email:`${null===(d=this.user)||void 0===d||null===(r=d.brand)||void 0===r?void 0:r.email}`,website:`${null===(u=this.user)||void 0===u||null===(p=u.brand)||void 0===p?void 0:p.website}`},contact:{label:"Expense issued for:",name:`${null===this||void 0===this||null===(m=this.oneExpense)||void 0===m?void 0:m.supplierName}`,address:`${null===this||void 0===this||null===(c=this.oneExpense)||void 0===c?void 0:c.supplierAddress}`,phone:`${null===this||void 0===this||null===(h=this.oneExpense)||void 0===h?void 0:h.supplierPhoneNumbers}`,email:`${null===this||void 0===this||null===(x=this.oneExpense)||void 0===x?void 0:x.supplierEmail}`},invoice:{label:"#",num:`${this.oneExpense.expenseNumber}`,invDate:`Expense Date: ${this.dateConversion(this.oneExpense.date)}`,invGenDate:`Due Date: ${this.dateConversion(this.oneExpense.dueDate)}`,headerBorder:!1,tableBodyBorder:!1,header:[{title:"#",style:{width:10}},{title:"Name",style:{width:30}},{title:"Description",style:{width:80}},{title:"Unit Price"},{title:"Quantity"},{title:"Total Amount"}],table:Array.from(null===(f=this.oneExpense)||void 0===f?void 0:f.expenseItems,((e,t)=>[`${t+1}`,`${e.name}`,`${e.description}`,`${e.unitPrice}`,`${e.qty}`,""+e.qty*e.unitPrice])),invSubTotalLabel:"Sub Total:",invSubTotal:`${this.stotal}`,invTotalLabel:"Total:",invTotal:`${this.total}`,invCurrency:"USD",row1:{col1:"Tax:",col2:`${this.taxRate}`,col3:"%",style:{fontFamily:"serif",fontSize:10}},row2:{col1:"Discount:",col2:`${this.discount}`,col3:"%",style:{fontSize:10}},invDescLabel:"Note",invDesc:null===(b=this.oneExpense)||void 0===b?void 0:b.description},footer:{text:""},pageEnable:!0,pageLabel:"page "}}},async mounted(){await this.getUser(),await this.getExpense(this.$route.params.id),this.discount=100*Number(this.oneExpense.discount),this.taxRate=100*Number(this.oneExpense.taxRate),this.stotal=Number(this.oneExpense.subTotalAmount),this.total=Number(this.oneExpense.totalAmount),this.fileAndImages(),this.isLoaded=!0}};var he=l(24379),xe=l(6833),fe=l(47704),be=l(10151),ge=l(2165),we=l(83944),ve=l(15607),ye=l(81052),_e=l(24554),qe=l(75096),Ee=l(30481),ke=l(64689),We=l(65869),De=l(69721),ze=l(46778),Fe=l(25589),Ce=l(99367),Ne=l(60677),$e=l(7518),Te=l.n($e);ce.render=oe,ce.__scopeId="data-v-74539944";const Ve=ce;Te()(ce,"components",{QPage:he.Z,QSpinner:xe.Z,QScrollArea:fe.Z,QCard:be.Z,QBtn:ge.Z,QPopupProxy:we.Z,QBanner:ve.Z,QFile:ye.Z,QIcon:_e.Z,QAvatar:qe.Z,QMarkupTable:Ee.Z,QInput:ke.Z,QSeparator:We.Z,QBadge:De.Z,QDialog:ze.Z,QCardSection:Fe.Z,QCardActions:Ce.Z}),Te()(ce,"directives",{ClosePopup:Ne.Z})}}]);