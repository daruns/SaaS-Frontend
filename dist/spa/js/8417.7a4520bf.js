"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[8417],{38417:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var l=a(83673);const o={class:"full-width flex justify-between items-center header-height-standard q-px-md",style:{"border-bottom":"1px solid lightgrey"}},i=(0,l._)("div",{class:"text-h4"},"Deduction Types",-1),n={class:"flex items-center"};function s(e,t,a,s,d,r){const u=(0,l.up)("q-btn"),p=(0,l.up)("tbl"),m=(0,l.up)("modal"),c=(0,l.up)("q-dialog"),y=(0,l.up)("q-scroll-area"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{class:"q-py-none q-my-none"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[i,(0,l._)("div",n,[(0,l.Wm)(u,{onClick:t[0]||(t[0]=e=>d.dialogue=!0),color:"primary",label:"Add "+s.tab[0].toUpperCase()+s.tab.substr(1,s.tab.length),unelevated:"",rounded:"","no-caps":""},null,8,["label"])])]),(0,l.Wm)(y,{style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(p),(0,l.Wm)(c,{seamless:"",position:"right",modelValue:d.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{onCloseDialogue:t[1]||(t[1]=e=>d.dialogue=!1),type:s.tab,actionType:"Add",id:{}},null,8,["type"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var d=a(62323);const r={style:{"font-size":"20px"}},u={style:{"font-size":"20px"}},p={style:{"font-size":"20px"}};function m(e,t,a,o,i,n){const s=(0,l.up)("q-td"),m=(0,l.up)("q-icon"),c=(0,l.up)("q-item-section"),y=(0,l.up)("q-item"),h=(0,l.up)("q-separator"),f=(0,l.up)("q-list"),g=(0,l.up)("q-menu"),b=(0,l.up)("q-btn"),w=(0,l.up)("q-tr"),T=(0,l.up)("q-table"),W=(0,l.up)("modal"),_=(0,l.up)("q-dialog"),q=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(T,{rows:n.data,columns:i.columns,"row-key":"id",loading:i.loading,"rows-per-page-options":[20,50,100,0],flat:"",class:"bg-secondary q-pa-md"},{body:(0,l.w5)((t=>[(0,l.Wm)(w,{class:(0,d.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{class:"items-center justify-start",key:"name",props:t},{default:(0,l.w5)((()=>[(0,l._)("p",r,(0,d.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,l.Wm)(s,{class:"items-center justify-start",key:"rate",props:t},{default:(0,l.w5)((()=>[(0,l._)("p",u,(0,d.zw)(Number(t.row.rate))+" "+(0,d.zw)(t.row.durationType),1)])),_:2},1032,["props"]),(0,l.Wm)(s,{class:"items-center justify-start",key:"fund",props:t},{default:(0,l.w5)((()=>[(0,l._)("p",p,(0,d.zw)(t.row.fund),1)])),_:2},1032,["props"]),(0,l.Wm)(s,{class:"text-right",key:"actions",props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"min-width":"75px"}},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(y,{onClick:a=>e.deleteDeductionType({id:t.row.id}),style:{},clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[q]]),(0,l.Wm)(h),(0,l.wy)((0,l.Wm)(y,{onClick:e=>n.editDeductionType(t.row),clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,l.Wm)(_,{onCloseDialogue:t[1]||(t[1]=e=>i.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:i.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dialogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{onCloseDialogue:t[0]||(t[0]=e=>i.dialogue=!1),body:i.body,id:i.id,actionType:"Edit"},null,8,["body","id"])])),_:1},8,["modelValue"])])}var c=a(93617);const y=(0,l._)("div",null,"Duration Type:",-1),h={class:"q-gutter-sm"};function f(e,t,a,o,i,n){const s=(0,l.up)("q-toolbar-title"),r=(0,l.up)("q-btn"),u=(0,l.up)("q-toolbar"),p=(0,l.up)("q-input"),m=(0,l.up)("q-radio"),c=(0,l.up)("q-card-section"),f=(0,l.up)("q-card"),g=(0,l.up)("q-layout"),b=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(g,{style:{width:"500px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(a.actionType)+" Deduction Type ",1)])),_:1}),(0,l.wy)((0,l.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[b]])])),_:1}),(0,l.Wm)(c,{class:"q-gutter-sm scroll"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{ref:"nameRef",outlined:"",modelValue:i.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.credentials.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the name"]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{ref:"fundRef",outlined:"",modelValue:i.credentials.fund,"onUpdate:modelValue":t[1]||(t[1]=e=>i.credentials.fund=e),modelModifiers:{number:!0},label:"Salary to be Reduced",type:"number",rules:[e=>e&&e>0||"Please type the Salary"]},null,8,["modelValue","rules"]),y,(0,l._)("div",h,[(0,l.Wm)(m,{modelValue:i.credentials.durationType,"onUpdate:modelValue":t[2]||(t[2]=e=>i.credentials.durationType=e),val:"days",label:"Days"},null,8,["modelValue"]),(0,l.Wm)(m,{modelValue:i.credentials.durationType,"onUpdate:modelValue":t[3]||(t[3]=e=>i.credentials.durationType=e),val:"weeks",label:"Weeks"},null,8,["modelValue"]),(0,l.Wm)(m,{modelValue:i.credentials.durationType,"onUpdate:modelValue":t[4]||(t[4]=e=>i.credentials.durationType=e),val:"months",label:"Months"},null,8,["modelValue"])]),(0,l.Wm)(p,{ref:"rateRef",outlined:"",modelValue:i.credentials.rate,"onUpdate:modelValue":t[5]||(t[5]=e=>i.credentials.rate=e),modelModifiers:{number:!0},label:i.credentials.durationType,type:"number"},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,l.Wm)(u,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{loading:i.loading,onClick:n.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var g=a(49549);const b={components:{VueTelInput:g.VueTelInput},props:["actionType","body"],data(){return{show:!0,id:null,loading:!1,credentials:{name:null,fund:0,rate:0,durationType:"days"}}},methods:{toggleShow(){this.show=!this.show},...(0,c.nv)("payrollStore",["createDeductionType","updateDeductionType"]),async submit(){if(this.$refs.nameRef.validate(),this.$refs.fundRef.validate(),!this.$refs.nameRef.hasError&&!this.$refs.fundRef.hasError){this.loading=!0;try{let e={};"Add"===this.actionType?(e={name:this.credentials.name,fund:Number(this.credentials.fund),rate:Number(this.credentials.rate),durationType:this.credentials.durationType},await this.createDeductionType(e),this.$q.notify({type:"positive",message:"Department created",color:"positive",position:"top",timeout:"500"})):(e["id"]=Number(this.id),this.credentials.name&&(e["name"]=this.credentials.name),this.credentials.fund&&(e["fund"]=Number(this.credentials.fund)),this.credentials.rate&&(e["rate"]=Number(this.credentials.rate)),this.credentials.durationType&&(e["durationType"]=this.credentials.durationType),await this.updateDeductionType(e),this.$q.notify({type:"positive",message:"Department updated",color:"positive",position:"top",timeout:"500"}))}catch(e){return this.$q.notify({type:"negative",message:"Something went wrong while Department creating",color:"negative",position:"top",timeout:"500"}),this.loading=!0,this.$emit("closeDialogue"),null}this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){this.show=!1,"Edit"===this.actionType&&(this.id=this.body.id,this.credentials.name=this.body.name,this.credentials.fund=Number(this.body.fund),this.credentials.rate=Number(this.body.rate),this.credentials.durationType=this.body.durationType)}};var w=a(19214),T=a(10151),W=a(39570),_=a(13747),q=a(2165),v=a(25589),x=a(64689),D=a(77991),V=a(60677),Q=a(7518),Z=a.n(Q);b.render=f;const k=b;Z()(b,"components",{QLayout:w.Z,QCard:T.Z,QToolbar:W.Z,QToolbarTitle:_.Z,QBtn:q.Z,QCardSection:v.Z,QInput:x.Z,QRadio:D.Z}),Z()(b,"directives",{ClosePopup:V.Z});const C={computed:{...(0,c.rn)("payrollStore",["deductionTypes"]),data(){return this.deductionTypes}},data(){return{body:null,id:null,dialogue:!1,loading:!1,columns:[{name:"name",label:"Name",align:"left",field:"name"},{name:"rate",label:"Duration",align:"left",field:"rate"},{name:"fund",label:"Salary Deduction",align:"left",field:"fund"},{name:"actions",label:"Actions",align:"right",field:"actions"}]}},components:{modal:k},methods:{...(0,c.nv)("payrollStore",["getDeductionTypes","deleteDeductionType"]),editDeductionType(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getDeductionTypes(),this.loading=!1}};var z=a(57678),S=a(18186),N=a(83884),U=a(20811),I=a(27011),R=a(83414),$=a(52035),j=a(24554),P=a(65869),A=a(46778);C.render=m;const B=C;Z()(C,"components",{QTable:z.Z,QTr:S.Z,QTd:N.Z,QBtn:q.Z,QMenu:U.Z,QList:I.Z,QItem:R.Z,QItemSection:$.Z,QIcon:j.Z,QSeparator:P.Z,QDialog:A.Z}),Z()(C,"directives",{ClosePopup:V.Z});var E=a(61959);const M={components:{tbl:B,modal:k},data(){return{dialogue:!1}},setup(){return{tab:(0,E.iH)("deductionType")}}};var L=a(24379),H=a(47704);M.render=s;const F=M;Z()(M,"components",{QPage:L.Z,QBtn:q.Z,QScrollArea:H.Z,QDialog:A.Z})}}]);