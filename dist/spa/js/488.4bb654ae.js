"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[488],{6488:(e,l,t)=>{t.r(l),t.d(l,{default:()=>M});var a=t(3673),i=t(2323),o=t(3402),s=t.n(o);const n=e=>((0,a.dD)("data-v-1e039183"),e=e(),(0,a.Cn)(),e),d={class:"flex justify-between items-center"},r=n((()=>(0,a._)("p",{class:"text-h4"},"Suppliers",-1))),p=n((()=>(0,a._)("img",{src:s()},null,-1))),u={style:{"font-size":"20px"}};function m(e,l,t,o,s,n){const m=(0,a.up)("breadcrumps"),c=(0,a.up)("q-btn"),h=(0,a.up)("q-avatar"),f=(0,a.up)("q-td"),b=(0,a.up)("q-icon"),y=(0,a.up)("q-item-section"),w=(0,a.up)("q-item"),g=(0,a.up)("q-separator"),C=(0,a.up)("q-list"),_=(0,a.up)("q-menu"),v=(0,a.up)("q-tr"),W=(0,a.up)("q-table"),z=(0,a.up)("modal"),q=(0,a.up)("q-dialog"),k=(0,a.up)("q-page"),V=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(k,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",null,[r,(0,a.Wm)(m,{map:s.crumps},null,8,["map"])]),(0,a.Wm)(c,{onClick:l[0]||(l[0]=e=>{s.body=null,s.action="Add",s.dialogue=!0}),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})]),(0,a.Wm)(W,{rows:e.suppliers,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,a.w5)((l=>[(0,a.Wm)(v,{class:(0,i.C_)(l.rowIndex%2!==0&&"bg-white"),props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{key:"logo",props:l},{default:(0,a.w5)((()=>[l.row.logo?((0,a.wg)(),(0,a.j4)(h,{key:0,size:"30px"},{default:(0,a.w5)((()=>[p])),_:1})):((0,a.wg)(),(0,a.j4)(h,{key:1,size:"30px","font-size":"20px",color:"grey","text-color":"white",icon:"person"}))])),_:2},1032,["props"]),(0,a.Wm)(f,{class:"flex items-center justify-start",key:"name",props:l},{default:(0,a.w5)((()=>[(0,a._)("p",u,(0,i.zw)(l.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"phoneNumbers",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.row.phoneNumbers),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"email",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.row.email),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"website",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.row.website),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"address",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.row.address),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"rate",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.row.rate),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"zipCode",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.row.zipCode),1)])),_:2},1032,["props"]),(0,a.Wm)(f,{key:"zipCode",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{style:{"min-width":"75px"}},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(w,{onClick:t=>e.deleteSupplier({id:l.row.id}),style:{},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[V]]),(0,a.Wm)(g),(0,a.wy)((0,a.Wm)(w,{onClick:e=>{s.body=l.row,s.action="Edit",s.dialogue=!0},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[V]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,a.Wm)(q,{onCloseDialogue:l[2]||(l[2]=e=>s.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:s.dialogue,"onUpdate:modelValue":l[3]||(l[3]=e=>s.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{id:s.id,onCloseDialogue:l[1]||(l[1]=e=>s.dialogue=!1),actionType:s.action,body:s.body},null,8,["id","actionType","body"])])),_:1},8,["modelValue"])])),_:1})}var c=t(3617);const h={class:"flex items-center"},f=(0,a._)("p",{style:{padding:"0 !important","font-size":"1rem"}},"Rate: ",-1);function b(e,l,t,o,s,n){const d=(0,a.up)("q-toolbar-title"),r=(0,a.up)("q-btn"),p=(0,a.up)("q-toolbar"),u=(0,a.up)("q-input"),m=(0,a.up)("vue-tel-input"),c=(0,a.up)("q-rating"),b=(0,a.up)("q-card-section"),y=(0,a.up)("q-card"),w=(0,a.up)("q-layout"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(w,{style:{width:"550px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.actionType)+" Supplier ",1)])),_:1}),(0,a.wy)((0,a.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,a.Wm)(b,{class:"q-gutter-md scroll"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ref:"companyRef",outlined:"",modelValue:s.credentials.name,"onUpdate:modelValue":l[0]||(l[0]=e=>s.credentials.name=e),label:"Company","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the company name"]},null,8,["modelValue","rules"]),(0,a.Wm)(u,{ref:"emailRef",outlined:"",type:"email",modelValue:s.credentials.email,"onUpdate:modelValue":l[1]||(l[1]=e=>s.credentials.email=e),label:"E-mail","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type a valid E-mail"]},null,8,["modelValue","rules"]),(0,a.Wm)(m,{required:"",onCountryChanged:n.countryChange,class:"phone-input q-mt-sm",defaultCountry:"iq",customValidate:!1,onOnInput:n.valid,onInput:n.phoneValidate,modelValue:s.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>s.phone=e)},null,8,["onCountryChanged","onOnInput","onInput","modelValue"]),(0,a._)("div",h,[f,(0,a.Wm)(c,{modelValue:s.credentials.rate,"onUpdate:modelValue":l[3]||(l[3]=e=>s.credentials.rate=e),size:"2em",class:"q-mb-md q-ml-sm",max:5,color:"primary"},null,8,["modelValue"])]),(0,a.Wm)(u,{ref:"webRef",outlined:"",modelValue:s.credentials.website,"onUpdate:modelValue":l[4]||(l[4]=e=>s.credentials.website=e),label:"Website","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the website"]},null,8,["modelValue","rules"]),(0,a.Wm)(u,{ref:"addressRef",outlined:"",modelValue:s.credentials.address,"onUpdate:modelValue":l[5]||(l[5]=e=>s.credentials.address=e),label:"Address","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the address"]},null,8,["modelValue","rules"]),(0,a.Wm)(u,{ref:"zipRef",outlined:"",modelValue:s.credentials.zipCode,"onUpdate:modelValue":l[6]||(l[6]=e=>s.credentials.zipCode=e),label:"Zipcode","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the zipcode"]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,a.Wm)(p,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:s.loading,onClick:n.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var y=t(9549);const w={props:["actionType","body"],data(){return{phone:"",dialCode:"",loading:!1,phoneNumbers:null,credentials:{name:"",email:"",website:"",address:"",zipCode:"",logo:null,rate:0}}},components:{VueTelInput:y.VueTelInput},methods:{...(0,c.nv)("financeStore",["createSupplier","updateSupplier","getClients","getOneClient"]),phoneValidate(e){isNaN(Number(e.data))&&(this.phone=this.phone.substring(0,this.phone.length-1))},valid(e,l){l.valid?document.querySelector(".vue-tel-input").removeAttribute("style"):document.querySelector(".vue-tel-input").setAttribute("style","border-color:#cc444b !important;")},countryChange(e){let l=0;this.dialCode="+"+e.dialCode,this.phone=this.phone.substring(this.dialCode.length,this.phone.length),0===l&&this.valid("",{valid:!0}),l+=1},async submit(){this.$refs.companyRef.validate(),this.$refs.emailRef.validate(),this.$refs.webRef.validate(),this.$refs.zipRef.validate(),this.$refs.addressRef.validate(),this.$refs.companyRef.hasError||this.$refs.emailRef.hasError||this.$refs.webRef.hasError||this.$refs.zipRef.hasError|this.$refs.addressRef.hasError||(this.loading=!0,"Add"===this.actionType?(await this.createSupplier({...this.credentials,phoneNumbers:this.dialCode+this.phone}),this.$q.notify({type:"positive",message:"Supplier created",color:"positive",position:"top",timeout:"500"})):(await this.updateSupplier({...this.credentials,phoneNumbers:this.dialCode+this.phone,id:Number(this.body.id)}),this.$q.notify({type:"positive",message:"Supplier updated",color:"positive",position:"top",timeout:"500"})),this.loading=!1,this.$emit("closeDialogue"))}},async mounted(){"Edit"===this.actionType&&(this.loading=!0,this.credentials.name=this.body.name,this.credentials.website=this.body.website,this.phone=this.body.phoneNumbers,this.credentials.email=this.body.email,this.credentials.website=this.body.website,this.credentials.address=this.body.address,this.credentials.zipCode=this.body.zipCode,this.credentials.rate=this.body.rate,this.loading=!1)}};var g=t(9214),C=t(151),_=t(9570),v=t(3747),W=t(2165),z=t(5589),q=t(4689),k=t(201),V=t(8833),Z=t(677),x=t(7518),Q=t.n(x);w.render=b;const S=w;Q()(w,"components",{QLayout:g.Z,QCard:C.Z,QToolbar:_.Z,QToolbarTitle:v.Z,QBtn:W.Z,QCardSection:z.Z,QInput:q.Z,QBtnToggle:k.Z,QRating:V.Z}),Q()(w,"directives",{ClosePopup:Z.Z});var R=t(6303);const I={computed:{...(0,c.rn)("financeStore",["suppliers"])},data(){return{id:null,dialogue:!1,loading:!1,body:null,action:"",crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Suppliers",icon:"badge",path:"/finance/suppliers"}],columns:[{name:"logo",required:!0,label:"#",align:"center",field:e=>e.name,format:e=>`${e}`},{name:"name",required:!0,label:"Company/Individual",align:"left",field:e=>e.name,format:e=>`${e}`},{name:"phoneNumbers",align:"left",label:"Phone number",field:"phoneNumbers"},{name:"email",label:"E-mail",align:"left",field:"email"},{name:"website",label:"Website",align:"left",field:"website"},{name:"address",label:"Address",align:"left",field:"address"},{name:"rate",label:"Rate",align:"left",field:"rate"},{name:"zipCode",label:"Zip code",align:"left",field:"zipCode"},{name:"actions",label:"Actions",align:"left",field:"actions"}]}},components:{modal:S,breadcrumps:R.Z},methods:{...(0,c.nv)("financeStore",["getSuppliers","updateSupplier","deleteSupplier"]),editClient(e){this.id=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getSuppliers(),this.loading=!1}};var T=t(4379),U=t(1277),$=t(8186),N=t(3884),E=t(5096),P=t(811),A=t(7011),j=t(3414),D=t(2035),O=t(4554),B=t(5869),L=t(6778);I.render=m,I.__scopeId="data-v-1e039183";const M=I;Q()(I,"components",{QPage:T.Z,QBtn:W.Z,QTable:U.Z,QTr:$.Z,QTd:N.Z,QAvatar:E.Z,QMenu:P.Z,QList:A.Z,QItem:j.Z,QItemSection:D.Z,QIcon:O.Z,QSeparator:B.Z,QDialog:L.Z}),Q()(I,"directives",{ClosePopup:Z.Z})}}]);