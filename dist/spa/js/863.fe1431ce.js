"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[863],{3863:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Be});var a=l(3673),o=l(2323),s=l(8880),n=l(3402),r=l.n(n);const i=(0,a._)("img",{alt:"oneconnect logo",src:r(),style:{height:"30px",width:"30px"}},null,-1),m={class:"flex flex-center q-mr-sm"},d=(0,a.Uk)("4"),c=(0,a.Uk)("2"),u=["src"],g=(0,a.Uk)("Settings"),p=(0,a.Uk)("Log out"),h={class:"q-ml-sm q-mt-xs",style:{"margin-top":"7px"}},f=(0,a._)("i",{style:{"font-size":"24px"},class:"las la-edit"},null,-1),w={key:0,class:"q-pa-md text-grey"},y={class:(0,o.C_)("q-pa-xs")},b={key:0,class:"flex"},_=["src"],x={key:1},W={key:2,class:"flex items-center"},v=["src"],q={class:"flex"},k={key:0,class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},I={key:1,class:"q-ma-none"},C={key:0,class:"q-ma-none"},S={key:3,class:"flex items-center"},U=["src"],D={class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},N={key:4,class:"flex"},z=["src"],R={key:1,class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},V={class:"q-mt-xs"},Z={key:0,class:"fit flex items-center justify-start column bg-grey-1"},Q={class:"q-mt-sm row"},M={style:{width:"33.33% !important"},class:"flex column flex-center q-pr-md q-pl-md q-pb-md q-pt-xs"},T=["src"],P={class:"q-ma-none text-grey"},O=["src"],J={class:"q-mr-none q-mt-none q-mb-none q-ml-sm text-grey"},j={key:1,class:"flex flex-center"},H={key:0,class:"flex column flex-center q-mt-xl"},L=["src"],B={class:"text-h6 q-ma-none text-grey"},A={key:1,class:"q-mt-xl flex column",style:{width:"100% !important"}},F={class:"flex justify-between"},Y=(0,a._)("p",{class:"text-body1 text-weight-medium"},"Username:",-1),E={class:"text-body1 text-grey text-weight-medium"},K=(0,a._)("div",{class:"flex justify-between"},[(0,a._)("p",{class:"text-body1 text-weight-medium"},"DOB:"),(0,a._)("p",{class:"text-body1 text-grey text-weight-medium"},"24 July")],-1),$=(0,a._)("div",{class:"flex justify-between"},[(0,a._)("p",{class:"text-body1 text-weight-medium"},"Email:"),(0,a._)("p",{class:"text-body1 text-grey text-weight-medium"},"jane@gmail.com")],-1),G=(0,a._)("div",{class:"flex justify-between"},[(0,a._)("p",{class:"text-body1 text-weight-medium"},"Phone:"),(0,a._)("p",{class:"text-body1 text-grey text-weight-medium"},"9647508363828")],-1),X=(0,a._)("span",{class:"q-ml-sm"},"Add Members",-1),ee=["src"],te=["src"],le=(0,a._)("span",{class:"q-ml-sm"},"Create a new channel",-1),ae=["src"],oe=["src"],se=(0,a._)("span",{class:"q-ml-sm"},"Change channel name",-1),ne=(0,a._)("span",{class:"q-ml-sm"},"Change channel photo",-1);function re(e,t,l,n,r,re){const ie=(0,a.up)("q-btn"),me=(0,a.up)("q-space"),de=(0,a.up)("q-badge"),ce=(0,a.up)("q-avatar"),ue=(0,a.up)("q-item-section"),ge=(0,a.up)("q-item"),pe=(0,a.up)("q-list"),he=(0,a.up)("q-menu"),fe=(0,a.up)("q-toolbar-title"),we=(0,a.up)("q-toolbar"),ye=(0,a.up)("q-header"),be=(0,a.up)("q-icon"),_e=(0,a.up)("q-input"),xe=(0,a.up)("q-item-label"),We=(0,a.up)("q-scroll-area"),ve=(0,a.up)("q-drawer"),qe=(0,a.up)("q-card-section"),ke=(0,a.up)("q-card"),Ie=(0,a.up)("q-expansion-item"),Ce=(0,a.up)("router-view"),Se=(0,a.up)("q-page-container"),Ue=(0,a.up)("q-layout"),De=(0,a.up)("confirm"),Ne=(0,a.up)("q-dialog"),ze=(0,a.up)("q-chip"),Re=(0,a.up)("q-select"),Ve=(0,a.up)("q-card-actions"),Ze=(0,a.up)("q-file"),Qe=(0,a.Q2)("close-popup"),Me=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(Ue,{view:"lHr LpR lFr",class:"shadow-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(ye,{class:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(we,{class:"bg-primary text-white shadow-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(fe,{class:"flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,{flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=e=>r.drawer=!r.drawer)}),(0,a.Wm)(ie,{flat:"",round:""},{default:(0,a.w5)((()=>[i])),_:1}),(0,a.Wm)(me),(0,a._)("div",m,[(0,a.Wm)(ie,{flat:"",color:"white",round:"",icon:"email",size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{color:"red",rounded:"",floating:""},{default:(0,a.w5)((()=>[d])),_:1})])),_:1}),(0,a.Wm)(ie,{flat:"",color:"white",round:"",icon:"notifications",size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{rounded:"",color:"red",floating:""},{default:(0,a.w5)((()=>[c])),_:1})])),_:1})]),(0,a.Wm)(ie,{flat:"",round:""},{default:(0,a.w5)((()=>[null!==e.user.avatar?((0,a.wg)(),(0,a.iD)("img",{key:0,alt:"User logo",src:e.user.avatar,style:{height:"30px",width:"30px","border-radius":"50%"}},null,8,u)):((0,a.wg)(),(0,a.j4)(ce,{key:1,size:"35px","font-size":"10px",color:"grey","text-color":"white",icon:"person"})),(0,a.Wm)(he,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ge,{to:"/profile",clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[g])),_:1})])),_:1},512),[[Qe]]),(0,a.Wm)(ge,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,{onClick:re.logout},{default:(0,a.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ie,{flat:"",round:"",onClick:t[1]||(t[1]=e=>r.drawer1=!r.drawer1)},{default:(0,a.w5)((()=>[(0,a._)("i",{style:{"font-size":"24px"},class:(0,o.C_)("bi-text-indent-"+(r.drawer1?"left":"right"))},null,2)])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ve,{modelValue:r.drawer,"onUpdate:modelValue":t[3]||(t[3]=e=>r.drawer=e),"show-if-above":"",width:300,breakpoint:1185},{default:(0,a.w5)((()=>[(0,a.Wm)(We,{ref:"scrollAreaRef",style:{height:"100%","border-right":"1px solid #ddd"}},{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ge,{class:"flex justify-around",style:{position:"sticky",top:"0","z-index":"5","background-color":"white"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_e,{class:"full-width q-mt-xs",outlined:"",rounded:"",label:"Search"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(be,{name:"search",class:"q-ml-sm"})])),_:1}),(0,a._)("div",h,[(0,a.Wm)(ie,{ripple:!1,class:"bg-blue-1",onClick:t[2]||(t[2]=e=>r.createRoom=!0),flat:"",round:"",color:"primary"},{default:(0,a.w5)((()=>[f])),_:1})])])),_:1}),0===r.rooms.length?((0,a.wg)(),(0,a.iD)("div",w,"No rooms to show!")):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(r.rooms,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l},[(0,a._)("div",y,[(0,a.wy)((0,a.Wm)(ge,{style:{"border-radius":"10px"},class:(0,o.C_)(t.id===e.chat.id?"bg-blue-1":""),onClick:e=>re.getMessages(t,l),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Wm)(xe,null,{default:(0,a.w5)((()=>["channel"!==t.room_type||t.name||t.avatar?!t.avatar&&t.name?((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("p",null,(0,o.zw)(t.name),1)])):"channel"===t.room_type&&t.avatar&&!t.name?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(ce,{size:"50px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.avatar},null,8,v)])),_:2},1024),(0,a._)("div",null,[(0,a._)("div",q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.users,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"flex",key:e.id},[t<2?((0,a.wg)(),(0,a.iD)("p",k,(0,o.zw)(e.name),1)):(0,a.kq)("",!0),t<1?((0,a.wg)(),(0,a.iD)("p",I,",")):(0,a.kq)("",!0)])))),128)),t.users.length>2?((0,a.wg)(),(0,a.iD)("p",C,"...")):(0,a.kq)("",!0)])])])):"channel"===t.room_type&&t.avatar&&t.name?((0,a.wg)(),(0,a.iD)("div",S,[(0,a.Wm)(ce,{size:"50px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.avatar},null,8,U)])),_:2},1024),(0,a._)("p",D,(0,o.zw)(t.name),1)])):((0,a.wg)(),(0,a.iD)("div",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.users,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"flex items-center"},[t.id!==e.user.id?((0,a.wg)(),(0,a.j4)(ce,{key:0,size:"50px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.avatar?t.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,z)])),_:2},1024)):(0,a.kq)("",!0),t.id===e.user.id?((0,a.wg)(),(0,a.iD)("p",R,(0,o.zw)(t.name),1)):(0,a.kq)("",!0)])))),128))])):((0,a.wg)(),(0,a.iD)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.users,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"text-ellipses",key:e.id},[(0,a.wy)((0,a.Wm)(ce,{class:(0,o.C_)(1===l&&"q-ml-xs"),size:"35px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.avatar?e.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,_)])),_:2},1032,["class"]),[[s.F8,l<2]]),(0,a.wy)((0,a.Wm)(ce,{class:"q-ml-xs bg-grey-3 text-grey",size:"35px"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)("+"+(t.users.length-2)),1)])),_:2},1536),[[s.F8,2===l&&t.users.length>2]])])))),128))]))])),_:2},1024),(0,a.Wm)(xe,{caption:"",lines:"1"},{default:(0,a.w5)((()=>[(0,a._)("p",V,(0,o.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text:"No messages!"),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(ue,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(xe,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(0!==t.messages.length?re.format(t.messages[t.messages.length-1].created_at):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"]),[[Me]])])])))),128))])),_:1})])),_:1},512)])),_:1},8,["modelValue"]),(0,a.Wm)(ve,{"show-if-above":"",side:"right",bordered:"",modelValue:r.drawer1,"onUpdate:modelValue":t[7]||(t[7]=e=>r.drawer1=e),width:300,breakpoint:1185,class:"bg-grey-1"},{default:(0,a.w5)((()=>[e.chat?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a.Wm)(We,{style:{height:"30vh !important","border-bottom":"0.25px solid lightgrey"},class:"full-width"},{default:(0,a.w5)((()=>[(0,a._)("div",Q,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.allUsers,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a._)("div",M,[(0,a.Wm)(ce,{size:"60px"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{rounded:"",color:t.online?"green":"grey-5",class:"absolute-bottom-right q-mr-sm"},null,8,["color"]),r.roomInfo&&e.user.id===r.roomInfo.creator_id||t.id===e.user.id?((0,a.wg)(),(0,a.j4)(ie,{key:0,round:"",size:"5px",onClick:e=>{r.membToDelete=t.id,r.cnfrm=!0},icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"])):(0,a.kq)("",!0),(0,a._)("img",{src:t.avatar?t.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,T)])),_:2},1024),(0,a._)("p",P,(0,o.zw)(t.name),1)])])))),128))])])),_:1}),(0,a.Wm)(We,{style:{height:"70vh !important"},class:"full-width"},{default:(0,a.w5)((()=>[r.roomInfo&&"channel"===r.roomInfo.room_type?((0,a.wg)(),(0,a.j4)(pe,{key:0,padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Ie,{label:"Customize channel"},{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{class:"bg-grey-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ie,{align:"left",onClick:t[4]||(t[4]=e=>r.changeName=!0),rounded:"","no-caps":"",class:"bg-blue-1 full-width",flat:"",icon:"edit",label:"Change channel name",color:"primary"}),(0,a.Wm)(ie,{align:"left",onClick:t[5]||(t[5]=e=>r.changePhoto=!0),rounded:"","no-caps":"",class:"bg-blue-1 q-mt-sm full-width",flat:"",icon:"image",label:"Change channel photo",color:"primary"})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(Ie,{label:"Channel members"},{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{class:"bg-grey-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.allUsers,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"flex items-center"},[(0,a.Wm)(ce,{class:(0,o.C_)(0!==t&&"q-mt-sm"),size:"35px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.avatar?e.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,O)])),_:2},1032,["class"]),(0,a._)("p",J,(0,o.zw)(e.name),1)])))),128)),(0,a.Wm)(ie,{onClick:t[6]||(t[6]=e=>r.addMembers=!0),rounded:"","no-caps":"",class:"bg-blue-1 q-mt-sm",flat:"",icon:"add",label:"Add people",color:"primary"})])),_:1})])),_:1})])),_:1})])),_:1})):((0,a.wg)(),(0,a.iD)("div",j,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.allUsers,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[t.id!==e.user.id&&2===r.allUsers.length?((0,a.wg)(),(0,a.iD)("div",H,[(0,a.Wm)(ce,{size:"60px"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{rounded:"",color:t.online?"green":"grey-5",class:"absolute-bottom-right q-mr-sm"},null,8,["color"]),(0,a._)("img",{src:t.avatar?t.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,L)])),_:2},1024),(0,a._)("p",B,(0,o.zw)(t.name),1)])):(0,a.kq)("",!0),t.id!==e.user.id&&2===r.allUsers.length?((0,a.wg)(),(0,a.iD)("div",A,[(0,a._)("div",F,[Y,(0,a._)("p",E,(0,o.zw)(t.username),1)]),K,$,G])):(0,a.kq)("",!0)])))),128))]))])),_:1})])):(0,a.kq)("",!0)])),_:1},8,["modelValue"]),(0,a.Wm)(Se,{style:{"overflow-y":"hidden !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Ce)])),_:1})])),_:1}),(0,a.Wm)(Ne,{modelValue:r.cnfrm,"onUpdate:modelValue":t[8]||(t[8]=e=>r.cnfrm=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(De,{onConfirm:re.deleteMemeber},null,8,["onConfirm"])])),_:1},8,["modelValue"]),(0,a.Wm)(Ne,{modelValue:r.addMembers,"onUpdate:modelValue":t[10]||(t[10]=e=>r.addMembers=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{style:{width:"400px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(qe,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{icon:"group",color:"primary","text-color":"white"}),X])),_:1}),(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Re,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",loading:r.isLoading,modelValue:r.members1,"onUpdate:modelValue":t[9]||(t[9]=e=>r.members1=e),options:r.options1,label:"Choose members"},{option:(0,a.w5)((e=>[(0,a.Wm)(ge,(0,o.vs)((0,a.F4)(e.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(ue,{class:"avatar-list"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{class:"q-mr-xs",size:"35px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,ee)])),_:2},1024),(0,a.Wm)(xe,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"selected-item":(0,a.w5)((e=>[(0,a.Wm)(ze,{removable:"",dense:"",onRemove:t=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"blue-1","text-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{color:"secondary","text-color":"white"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,te)])),_:2},1024),(0,a.Uk)(" "+(0,o.zw)(e.opt.label),1)])),_:2},1032,["onRemove","tabindex"])])),_:1},8,["rules","loading","modelValue","options"])])),_:1}),(0,a.Wm)(Ve,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ie,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[Qe]]),(0,a.wy)((0,a.Wm)(ie,{onClick:re.addNewMembers,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:0===r.members1.length},null,8,["onClick","disable"]),[[Qe]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(Ne,{ref:"roomDialoge",modelValue:r.createRoom,"onUpdate:modelValue":t[12]||(t[12]=e=>r.createRoom=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{style:{width:"400px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(qe,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{icon:"chat",color:"primary","text-color":"white"}),le])),_:1}),(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Re,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",loading:r.isLoading,modelValue:r.members,"onUpdate:modelValue":t[11]||(t[11]=e=>r.members=e),options:r.options,label:"Choose members"},{option:(0,a.w5)((e=>[(0,a.Wm)(ge,(0,o.vs)((0,a.F4)(e.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(ue,{class:"avatar-list"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{class:"q-mr-xs",size:"35px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,ae)])),_:2},1024),(0,a.Wm)(xe,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"selected-item":(0,a.w5)((e=>[(0,a.Wm)(ze,{removable:"",dense:"",onRemove:t=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"blue-1","text-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{color:"secondary","text-color":"white"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,oe)])),_:2},1024),(0,a.Uk)(" "+(0,o.zw)(e.opt.label),1)])),_:2},1032,["onRemove","tabindex"])])),_:1},8,["rules","loading","modelValue","options"])])),_:1}),(0,a.Wm)(Ve,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ie,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[Qe]]),(0,a.wy)((0,a.Wm)(ie,{onClick:re.addMembs,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:0===r.members.length},null,8,["onClick","disable"]),[[Qe]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(Ne,{modelValue:r.changeName,"onUpdate:modelValue":t[14]||(t[14]=e=>r.changeName=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{style:{width:"400px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{icon:"edit",color:"primary","text-color":"white"}),se])),_:1}),(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_e,{modelValue:r.channelName,"onUpdate:modelValue":t[13]||(t[13]=e=>r.channelName=e),outlined:"",label:"Channel name"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(Ve,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ie,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[Qe]]),(0,a.wy)((0,a.Wm)(ie,{onClick:re.changeChannelName,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:!r.channelName},null,8,["onClick","disable"]),[[Qe]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(Ne,{modelValue:r.changePhoto,"onUpdate:modelValue":t[16]||(t[16]=e=>r.changePhoto=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{style:{width:"400px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{icon:"edit",color:"primary","text-color":"white"}),ne])),_:1}),(0,a.Wm)(qe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Ze,{filter:re.checkType,onRejected:re.onRejectedImage,label:"Choose photo",outlined:"",modelValue:r.channelPhoto,"onUpdate:modelValue":t[15]||(t[15]=e=>r.channelPhoto=e)},{prepend:(0,a.w5)((()=>[(0,a.Wm)(be,{name:"attach_file"})])),_:1},8,["filter","onRejected","modelValue"])])),_:1}),(0,a.Wm)(Ve,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ie,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[Qe]]),(0,a.wy)((0,a.Wm)(ie,{onClick:re.changeChannelPhoto,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:!r.channelPhoto},null,8,["onClick","disable"]),[[Qe]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}l(7070);var ie=l(1082),me=l(3617),de=l(1887),ce=l(52),ue=l.n(ce);const ge=new WebSocket("wss://oneconnect.it:4000"),pe={data(){return{isLoggedIn:localStorage.getItem("accessToken"),isExpanded:!0,isExpanded2:!0,membToDelete:null,members:[],addMembers:!1,createRoom:!1,channelName:"",channelPhoto:null,changePhoto:!1,options:[],members1:[],options1:[],onlineUsers:[],allUsers:[],rooms:[],roomInfo:null,loading:!1,isLoading:!1,drawer:!1,drawer1:!1,cnfrm:!1,changeName:!1}},computed:{...(0,me.rn)("example",["user"]),...(0,me.rn)("userStore",["users"]),...(0,me.rn)("chatStore",["chat"]),getHeight(){return"height: 50vh !important;"}},components:{confirm:de.Z},methods:{...(0,me.nv)("userStore",["getUsers"]),...(0,me.nv)("example",["getUser"]),...(0,me.nv)("chatStore",["getChat","clearChat"]),async changeChannelName(){let e=this;ge.send(JSON.stringify({editRoom:{id:Number(e.chat.id),avatar:e.roomInfo.avatar,name:e.channelName}}))},async changeChannelPhoto(){let e=this,t=new FormData;t.append("files",this.channelPhoto);try{let l=await ue().post("https://onconnect-backend-api.herokuapp.com/api/v1/chats/addFiles",t,{headers:{Authorization:localStorage.getItem("accessToken")}});l.data.success?ge.send(JSON.stringify({editRoom:{id:Number(e.chat.id),name:e.roomInfo.name,avatar:l.data.data[0].url}})):this.$q.notify({type:"negative",message:"Something went wrong!"})}catch(l){console.log(l),this.$q.notify({type:"negative",message:"Something went wrong!"})}},addNewMembers(){let e=this,t=[];for(let l=0;l<this.members1.length;l++)t.push(this.members1[l].id);ge.send(JSON.stringify({addRoomUsers:{id:e.chat.id,users:t}})),t=[],this.members1=[],this.addMembers=!1},deleteMemeber(){let e=this;ge.send(JSON.stringify({deleteRoomUsers:{id:e.chat.id,users:[e.membToDelete]}})),this.membToDelete=null,this.cnfrm=!1},checkType(e){return e.filter((e=>e.type.includes("image")))},onRejectedImage(){this.$q.notify({type:"negative",message:"Only images are allowed!"})},async getMessages(e,t){document.body.offsetWidth<=1185&&(this.drawer=!1),localStorage.setItem("roomIndex",t),this.roomInfo=e,console.log(this.roomInfo),ge.send(JSON.stringify({getMessagesByRoomId:{room_id:e.id}}))},getMessagesImmediate(){let e=this;ge.send(JSON.stringify({getMessagesByRoomId:{room_id:Number(e.chat.id)}}))},format(e){return ie.ZP.formatDate(e,"HH:mm")},addMembs(){let e=[];for(let t=0;t<this.members.length;t++)e.push(Number(this.members[t].id));ge.send(JSON.stringify({createRoom:{users:e}})),e=[],this.members=[],this.createRoom=!1},updateScroll(){var e=document.getElementById("room-container");e.scrollTop=e.scrollHeight},logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("tab"),localStorage.removeItem("isLoggedIn"),this.$router.push("/login")},getUserOptions(){let e=[];this.options=[],setTimeout((()=>{for(let t=0;t<this.users.length;t++)e.push({id:this.users[t].id,label:this.users[t].name,avatar:this.users[t].avatar})}),100),this.options=e,this.options1=e}},async beforeMount(){this.isLoading=!0;let e=this;ge.addEventListener("open",(async function(e){ge.send(JSON.stringify({accessToken:localStorage.getItem("accessToken").substring(7,localStorage.getItem("accessToken").length)}))})),ge.addEventListener("message",(async function(t){const l=JSON.parse(t.data);if("addRoom"===l.reqType&&e.getMessages(l.rooms.rooms[l.rooms.rooms.length-1],0),l.onlineUsers){e.onlineUsers=l.onlineUsers;let t=e.chat.users.filter((({id:e})=>!l.onlineUsers.some((({id:t})=>t===e)))),a=e.chat.users.filter((({id:e})=>l.onlineUsers.some((({id:t})=>t===e))));e.allUsers=[];for(let l=0;l<a.length;l++)e.allUsers.push({...a[l],online:!0});for(let l=0;l<t.length;l++)e.allUsers.push({...t[l],online:!1})}if(l.messagesByRoomId&&e.roomInfo.id===l.messagesByRoomId.room_id&&(await e.getChat({id:e.roomInfo.id,name:e.roomInfo.name,avatar:e.roomInfo.avatar,room_type:e.roomInfo.room_type,users:e.roomInfo.users,messages:l.messagesByRoomId.roomMessages}),e.updateScroll(),ge.send(JSON.stringify({ping:!0}))),l.messagePerRoom)for(let a=0;a<e.rooms.length;a++)e.rooms[a].id===l.messagePerRoom.messfinal.room_id&&(e.rooms[a].messages.push(l.messagePerRoom.messfinal),await e.getMessagesImmediate());if(l.rooms){if(e.rooms=[],e.rooms=JSON.parse(t.data).rooms.rooms.reverse(),0===e.rooms.length)return void await e.clearChat();e.chat&&localStorage.getItem("roomIndex")&&Number(localStorage.getItem("roomIndex"))>=0&&e.rooms.length>=Number(localStorage.getItem("roomIndex"))?(setTimeout((()=>{ge.send(JSON.stringify({getMessagesByRoomId:{room_id:e.rooms[Number(localStorage.getItem("roomIndex"))].id}}))}),100),e.roomInfo=e.rooms[Number(localStorage.getItem("roomIndex"))]):(ge.send(JSON.stringify({getMessagesByRoomId:{room_id:e.rooms[0].id}})),e.roomInfo=e.rooms[0],localStorage.setItem("roomIndex",0))}else l.typing})),await this.getUser(),await this.getUsers(),this.getUserOptions(),this.isLoading=!1,ge.send(JSON.stringify({ping:!0})),setInterval((()=>{ge.send(JSON.stringify({ping:!0}))}),1e4)}};var he=l(9214),fe=l(3812),we=l(9570),ye=l(3747),be=l(2165),_e=l(2025),xe=l(9721),We=l(5096),ve=l(811),qe=l(7011),ke=l(3414),Ie=l(2035),Ce=l(2901),Se=l(7704),Ue=l(4689),De=l(4554),Ne=l(2350),ze=l(4615),Re=l(151),Ve=l(5589),Ze=l(2652),Qe=l(6778),Me=l(3314),Te=l(7030),Pe=l(9367),Oe=l(4974),Je=l(677),je=l(860),He=l(7518),Le=l.n(He);pe.render=re;const Be=pe;Le()(pe,"components",{QLayout:he.Z,QHeader:fe.Z,QToolbar:we.Z,QToolbarTitle:ye.Z,QBtn:be.Z,QSpace:_e.Z,QBadge:xe.Z,QAvatar:We.Z,QMenu:ve.Z,QList:qe.Z,QItem:ke.Z,QItemSection:Ie.Z,QDrawer:Ce.Z,QScrollArea:Se.Z,QInput:Ue.Z,QIcon:De.Z,QItemLabel:Ne.Z,QExpansionItem:ze.Z,QCard:Re.Z,QCardSection:Ve.Z,QPageContainer:Ze.Z,QDialog:Qe.Z,QSelect:Me.Z,QChip:Te.Z,QCardActions:Pe.Z,QFile:Oe.Z}),Le()(pe,"directives",{ClosePopup:Je.Z,Ripple:je.Z})}}]);