"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[13],{13:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});o(246);var a=o(3673),i=o(2323),n=o(3402),l=o.n(n);const d={class:"flex justify-between items-center"},s=(0,a._)("p",{class:"text-h4"},"Payment Methods",-1),r=(0,a._)("img",{src:l()},null,-1),m={style:{"font-size":"20px"}};function p(e,t,o,n,l,p){const u=(0,a.up)("breadcrumps"),c=(0,a.up)("q-btn"),f=(0,a.up)("q-avatar"),h=(0,a.up)("q-td"),y=(0,a.up)("q-icon"),w=(0,a.up)("q-item-section"),g=(0,a.up)("q-item"),b=(0,a.up)("q-separator"),_=(0,a.up)("q-list"),M=(0,a.up)("q-menu"),v=(0,a.up)("q-tr"),q=(0,a.up)("q-table"),x=(0,a.up)("modal"),D=(0,a.up)("q-dialog"),k=(0,a.up)("q-page"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(k,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",null,[s,(0,a.Wm)(u,{map:l.crumps},null,8,["map"])]),(0,a.Wm)(c,{onClick:t[0]||(t[0]=e=>{l.body=null,l.action="Add",l.dialogue=!0}),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})]),(0,a.Wm)(q,{rows:e.paymentMethods,columns:l.columns,"row-key":"id",loading:l.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,a.w5)((t=>[(0,a.Wm)(v,{class:(0,i.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{key:"logo",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{size:"30px"},{default:(0,a.w5)((()=>[r])),_:1})])),_:2},1032,["props"]),(0,a.Wm)(h,{class:"flex items-center justify-start",key:"name",props:t},{default:(0,a.w5)((()=>[(0,a._)("p",m,(0,i.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(h,{key:"description",innerHTML:t.row.description,props:t},null,8,["innerHTML","props"]),(0,a.Wm)(h,{key:"pin",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.pin),1)])),_:2},1032,["props"]),(0,a.Wm)(h,{key:"cvs",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.cvs),1)])),_:2},1032,["props"]),(0,a.Wm)(h,{key:"expireDate",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(p.dateConversion(t.row.expireDate)),1)])),_:2},1032,["props"]),(0,a.Wm)(h,{key:"actions",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{style:{"z-index":"10"},dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{style:{"min-width":"75px"}},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(g,{onClick:o=>e.deletePaymentMethod({id:t.row.id}),style:{},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[W]]),(0,a.Wm)(b),(0,a.wy)((0,a.Wm)(g,{onClick:e=>{l.body=t.row,l.action="Edit",l.dialogue=!0},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[W]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,a.Wm)(D,{onCloseDialogue:t[2]||(t[2]=e=>l.dialogue=!1),seamless:"",position:"right",modelValue:l.dialogue,"onUpdate:modelValue":t[3]||(t[3]=e=>l.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{id:l.id,onCloseDialogue:t[1]||(t[1]=e=>l.dialogue=!1),action:l.action,body:l.body},null,8,["id","action","body"])])),_:1},8,["modelValue"])])),_:1})}var u=o(3617);const c=(0,a._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Due date",-1);function f(e,t,o,n,l,d){const s=(0,a.up)("q-toolbar-title"),r=(0,a.up)("q-btn"),m=(0,a.up)("q-toolbar"),p=(0,a.up)("q-input"),u=(0,a.up)("q-editor"),f=(0,a.up)("Datepicker"),h=(0,a.up)("q-card-section"),y=(0,a.up)("q-card"),w=(0,a.up)("q-layout"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(w,{style:{width:"550px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(o.action+" ")+" Payment Method ",1)])),_:1}),(0,a.wy)((0,a.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,a.Wm)(h,{class:"q-gutter-md scroll"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{rules:[e=>e&&0!==e.length||"This field is required"],ref:"nameRef",outlined:"",modelValue:l.paymentMethod.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.paymentMethod.name=e),label:"Name"},null,8,["rules","modelValue"]),(0,a.Wm)(u,{modelValue:l.paymentMethod.description,"onUpdate:modelValue":t[1]||(t[1]=e=>l.paymentMethod.description=e),dense:e.$q.screen.lt.md,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"]),(0,a._)("div",null,[c,(0,a.Wm)(f,{modelValue:l.paymentMethod.expireDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.paymentMethod.expireDate=e),showNowButton:""},null,8,["modelValue"])]),(0,a.Wm)(p,{rules:[e=>e&&0!==e.length||"This field is required"],ref:"pinRef",outlined:"",modelValue:l.paymentMethod.pin,"onUpdate:modelValue":t[3]||(t[3]=e=>l.paymentMethod.pin=e),label:"PIN"},null,8,["rules","modelValue"]),(0,a.Wm)(p,{rules:[e=>e&&0!==e.length||"This field is required"],ref:"cvsRef",outlined:"",modelValue:l.paymentMethod.cvs,"onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod.cvs=e),label:"CVV"},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,a.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:l.loading,onClick:d.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}var h=o(1082),y=o(4789);const w={components:{Datepicker:y.Z},props:["body","action"],data(){return{loading:!1,id:null,paymentMethod:{name:"",description:"Description",expireDate:"",pin:"",cvs:""}}},methods:{...(0,u.nv)("financeStore",["addPaymentMethod","updatePaymentMethod"]),async submit(){this.$refs.nameRef.validate(),this.$refs.pinRef.validate(),this.$refs.cvsRef.validate(),this.$refs.nameRef.hasError||this.$refs.pinRef.hasError||this.$refs.cvsRef.hasError||(this.paymentMethod.expireDate=h.ZP.formatDate(new Date(this.paymentMethod.expireDate),"YYYY-MM-DD HH:mm"),this.loading=!0,"Add"===this.action?await this.addPaymentMethod({...this.paymentMethod}):"Edit"===this.action&&await this.updatePaymentMethod({...this.paymentMethod,id:this.body.id}),this.loading=!1,this.$emit("closeDialogue"))}},mounted(){if("Edit"===this.action){this.id=this.body.id,this.paymentMethod.name=this.body.name,this.paymentMethod.description=this.body.description;let e=new Date(this.body.expireDate);return e.setHours(e.getHours()-3),this.paymentMethod.expireDate=h.ZP.formatDate(e,"YYYY-MM-DD HH:mm"),this.paymentMethod.cvs=this.body.cvs,void(this.paymentMethod.pin=this.body.pin)}this.paymentMethod.expireDate=h.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm")}};var g=o(9214),b=o(151),_=o(9570),M=o(3747),v=o(2165),q=o(5589),x=o(4689),D=o(9989),k=o(677),W=o(7518),Z=o.n(W);w.render=f;const C=w;Z()(w,"components",{QLayout:g.Z,QCard:b.Z,QToolbar:_.Z,QToolbarTitle:M.Z,QBtn:v.Z,QCardSection:q.Z,QInput:x.Z,QEditor:D.Z}),Z()(w,"directives",{ClosePopup:k.Z});var z=o(6303);const Q={computed:{...(0,u.rn)("financeStore",["paymentMethods"])},data(){return{id:null,dialogue:!1,loading:!1,body:null,action:"",crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Payment",icon:"payment",path:"/finance/payment"}],columns:[{name:"logo",required:!0,label:"#",align:"center",field:e=>e.name,format:e=>`${e}`},{name:"name",required:!0,label:"Company/Individual",align:"left",field:e=>e.name,format:e=>`${e}`},{name:"description",label:"Description",align:"left",field:"description"},{name:"pin",label:"PIN code",align:"left",field:"pin"},{name:"cvs",label:"CVV",align:"left",field:"cvs"},{name:"expireDate",label:"Expire date",align:"left",field:"expireDate"},{name:"actions",label:"Actions",align:"left",field:"actions"}]}},components:{modal:C,breadcrumps:z.Z},methods:{...(0,u.nv)("financeStore",["getPaymentMethods","deletePaymentMethod"]),editClient(e){this.id=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0)return"background: #fff;"},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),h.ZP.formatDate(t,"YYYY-MM-DD HH:mm")}},async mounted(){this.loading=!0,await this.getPaymentMethods(),this.loading=!1}};var V=o(4379),P=o(1277),$=o(8186),Y=o(3884),S=o(5096),H=o(811),I=o(7011),T=o(3414),R=o(2035),U=o(4554),E=o(5869),L=o(6778);Q.render=p;const A=Q;Z()(Q,"components",{QPage:V.Z,QBtn:v.Z,QTable:P.Z,QTr:$.Z,QTd:Y.Z,QAvatar:S.Z,QMenu:H.Z,QList:I.Z,QItem:T.Z,QItemSection:R.Z,QIcon:U.Z,QSeparator:E.Z,QDialog:L.Z}),Z()(Q,"directives",{ClosePopup:k.Z})}}]);