"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[1682],{81682:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var o=a(83673);const n={class:"full-width flex justify-between items-center header-height-standard q-px-md",style:{"border-bottom":"1px solid lightgrey"}},i=(0,o._)("div",{class:"text-h4"},"Designations",-1),l={class:"flex items-center"};function s(e,t,a,s,d,r){const m=(0,o.up)("q-btn"),p=(0,o.up)("tbl"),u=(0,o.up)("modal"),c=(0,o.up)("q-dialog"),g=(0,o.up)("q-scroll-area"),h=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(h,{class:"q-py-none q-my-none"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[i,(0,o._)("div",l,[(0,o.Wm)(m,{onClick:t[0]||(t[0]=e=>d.dialogue=!0),color:"primary",label:"Add "+s.tab[0].toUpperCase()+s.tab.substr(1,s.tab.length),unelevated:"",rounded:"","no-caps":""},null,8,["label"])])]),(0,o.Wm)(g,{style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p),(0,o.Wm)(c,{seamless:"",position:"right",modelValue:d.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{onCloseDialogue:t[1]||(t[1]=e=>d.dialogue=!1),type:s.tab,actionType:"Add",id:{}},null,8,["type"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var d=a(62323);const r={style:{"font-size":"20px"}},m={style:{"font-size":"20px"}};function p(e,t,a,n,i,l){const s=(0,o.up)("q-td"),p=(0,o.up)("q-icon"),u=(0,o.up)("q-item-section"),c=(0,o.up)("q-item"),g=(0,o.up)("q-separator"),h=(0,o.up)("q-list"),f=(0,o.up)("q-menu"),w=(0,o.up)("q-btn"),y=(0,o.up)("q-tr"),b=(0,o.up)("q-table"),q=(0,o.up)("modal"),_=(0,o.up)("q-dialog"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(b,{rows:l.data,columns:i.columns,"row-key":"id",loading:i.loading,flat:"",class:"bg-secondary q-pa-md"},{body:(0,o.w5)((t=>[(0,o.Wm)(y,{class:(0,d.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"items-center justify-start",key:"name",props:t},{default:(0,o.w5)((()=>[(0,o._)("p",r,(0,d.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(s,{class:"items-center justify-start",key:"department",props:t},{default:(0,o.w5)((()=>{var e;return[(0,o._)("p",m,(0,d.zw)(null===(e=t.row.department)||void 0===e?void 0:e.name),1)]})),_:2},1032,["props"]),(0,o.Wm)(s,{class:"text-right",key:"department",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(c,{onClick:a=>e.deleteDesignation({id:t.row.id}),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[v]]),(0,o.Wm)(g),(0,o.wy)((0,o.Wm)(c,{onClick:e=>l.editDesignation(t.row),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[v]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,o.Wm)(_,{onCloseDialogue:t[1]||(t[1]=e=>i.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:i.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{onCloseDialogue:t[0]||(t[0]=e=>i.dialogue=!1),body:i.body,id:i.id,actionType:"Edit"},null,8,["body","id"])])),_:1},8,["modelValue"])])}var u=a(93617);function c(e,t,a,n,i,l){const s=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),m=(0,o.up)("q-toolbar"),p=(0,o.up)("q-input"),u=(0,o.up)("q-select"),c=(0,o.up)("q-card-section"),g=(0,o.up)("q-card"),h=(0,o.up)("q-layout"),f=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(h,{style:{width:"500px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,d.zw)(a.actionType)+" Designation ",1)])),_:1}),(0,o.wy)((0,o.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[f]])])),_:1}),(0,o.Wm)(c,{class:"q-gutter-sm scroll"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{ref:"nameRef",outlined:"",modelValue:i.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.credentials.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the company name"]},null,8,["modelValue","rules"]),(0,o.Wm)(u,{modelValue:i.department,"onUpdate:modelValue":t[1]||(t[1]=e=>i.department=e),ref:"departmentIdRef","no-caps":"",loading:i.departmentLoading,outlined:"",options:i.departmentOptions},null,8,["modelValue","loading","options"])])),_:1})])),_:1}),(0,o.Wm)(m,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{loading:i.loading,onClick:l.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}a(10071);var g=a(49549);const h={components:{VueTelInput:g.VueTelInput},props:["actionType","body"],data(){return{show:!0,departmentLoading:!0,id:null,loading:!1,department:null,departmentOptions:[],credentials:{name:"",departmentId:null}}},computed:{...(0,u.rn)("hrmStore",["departments"])},methods:{toggleShow(){this.show=!this.show},...(0,u.nv)("hrmStore",["createDesignation","updateDesignation","getDesignations","getDepartments","getOneDesignation"]),async submit(){if(this.$refs.nameRef.validate(),this.$refs.departmentIdRef.validate(),!this.$refs.nameRef.hasError&&!this.$refs.departmentIdRef.hasError){this.loading=!0;let e={name:this.credentials.name,departmentId:Number(this.department.id)};console.log(this.credentials.name),"Add"===this.actionType?(await this.createDesignation(e),this.$q.notify({type:"positive",message:"Designation created",color:"positive",position:"top",timeout:"500"})):(e["id"]=Number(this.id),console.log(e),await this.updateDesignation(e),this.$q.notify({type:"positive",message:"Designation updated",color:"positive",position:"top",timeout:"500"})),this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){this.show=!1,this.departmentLoading=!0,await this.getDepartments(),this.departmentLoading=!1;for(let e of this.departments)this.departmentOptions.push({label:e.name,id:e.id});"Edit"===this.actionType&&(this.id=this.body.id,this.credentials.name=this.body.name,this.department={label:this.body.department.name,id:this.body.department.id})}};var f=a(19214),w=a(10151),y=a(39570),b=a(13747),q=a(2165),_=a(25589),v=a(64689),W=a(63314),x=a(60677),D=a(7518),Q=a.n(D);h.render=c;const Z=h;Q()(h,"components",{QLayout:f.Z,QCard:w.Z,QToolbar:y.Z,QToolbarTitle:b.Z,QBtn:q.Z,QCardSection:_.Z,QInput:v.Z,QSelect:W.Z}),Q()(h,"directives",{ClosePopup:x.Z});const k={computed:{...(0,u.rn)("hrmStore",["designations"]),data(){return this.designations}},data(){return{body:null,id:null,dialogue:!1,loading:!1,columns:[{name:"name",label:"Name",align:"left",field:"name"},{name:"department",label:"Department",align:"left",field:"department"},{name:"actions",label:"Actions",align:"right",field:"actions"}]}},components:{modal:Z},methods:{...(0,u.nv)("hrmStore",["getDesignations","deleteDesignation"]),editDesignation(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getDesignations(),this.loading=!1}};var C=a(57678),T=a(18186),I=a(83884),V=a(20811),S=a(27011),z=a(83414),$=a(52035),L=a(24554),R=a(65869),U=a(46778);k.render=p;const j=k;Q()(k,"components",{QTable:C.Z,QTr:T.Z,QTd:I.Z,QBtn:q.Z,QMenu:V.Z,QList:S.Z,QItem:z.Z,QItemSection:$.Z,QIcon:L.Z,QSeparator:R.Z,QDialog:U.Z}),Q()(k,"directives",{ClosePopup:x.Z});var A=a(61959);const P={components:{tbl:j,modal:Z},data(){return{dialogue:!1}},setup(){return{tab:(0,A.iH)("designation")}}};var B=a(24379),E=a(47704);P.render=s;const N=P;Q()(P,"components",{QPage:B.Z,QBtn:q.Z,QScrollArea:E.Z,QDialog:U.Z})}}]);