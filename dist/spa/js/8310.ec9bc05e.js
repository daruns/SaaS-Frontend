"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[8310],{68310:(e,t,l)=>{l.r(t),l.d(t,{default:()=>le});l(90246);var o=l(83673),n=l(62323),i=l(93402),s=l.n(i);const a=e=>((0,o.dD)("data-v-6d5aa69e"),e=e(),(0,o.Cn)(),e),d=a((()=>(0,o._)("div",{class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},[(0,o._)("div",{class:"text-h4"},"Invoice")],-1))),u={class:"q-px-md"},c={class:"row justify-between"},r={class:"column col-lg-6 col-md-6 col-sm-12 col-xs-12 q-gutter-lg"},v=["src"],m={key:1,src:s()},p={class:"column"},h=a((()=>(0,o._)("p",{class:"text-h6"},"Client",-1))),b=a((()=>(0,o._)("p",null,[(0,o._)("hr",{class:"text-light"})],-1))),_={class:"text-subtitle2"},f={class:"text-subtitle2"},w={class:"text-subtitle2"},x={class:"text-subtitle2"},y={class:"column col-lg-6 col-md-6 col-xs-12 col-sm-12 items-end"},g={class:"text-h6",style:{"padding-bottom":"25px !important"}},I={class:"text-subtitle2"},D={class:"text-subtitle2"},q={style:{"justify-content":"start !important"},class:"row q-mt-xl"},N={class:"column"},$=a((()=>(0,o._)("p",null,"Invoice to:",-1))),k={class:"text-bold"},z={class:"q-mt-xl"},C=a((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-left"},"#"),(0,o._)("th",{class:"text-left"},"Item"),(0,o._)("th",{class:"text-left"},"Description"),(0,o._)("th",{class:"text-left"},"Unit price"),(0,o._)("th",{class:"text-left"},"Quantity"),(0,o._)("th",{class:"text-left"},"Amount")])],-1))),P={class:"text-left"},T={class:"text-left"},S={class:"text-left"},V={class:"text-left"},W={class:"text-left"},A={class:"text-left"},L={class:"row q-mt-xl"},Q=a((()=>(0,o._)("div",{class:"col-9"},null,-1))),U={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12 column q-gutter-sm"},Z={class:"text-grey q-pa-none"},j=["innerHTML"];function R(e,t,l,i,s,a){const R=(0,o.up)("q-spinner"),B=(0,o.up)("q-page"),F=(0,o.up)("breadcrumps"),E=(0,o.up)("q-avatar"),H=(0,o.up)("DownloadPDFButton"),J=(0,o.up)("q-markup-table"),M=(0,o.up)("q-input"),G=(0,o.up)("q-separator"),O=(0,o.up)("q-card");return s.isLoaded?((0,o.wg)(),(0,o.j4)(B,{key:1,class:"q-py-none q-my-none"},{default:(0,o.w5)((()=>[d,(0,o.Wm)(F,{class:"q-pa-md full-width",map:s.crumps},null,8,["map"]),(0,o._)("div",u,[(0,o.Wm)(O,{class:"q-pa-lg"},{default:(0,o.w5)((()=>{var l,i,d,u,R,B,F,O;return[(0,o._)("div",c,[(0,o._)("div",r,[(0,o.Wm)(E,{square:"",size:"100px","font-size":"52px"},{default:(0,o.w5)((()=>{var t,l,n,i;return[null!==(t=e.user)&&void 0!==t&&null!==(l=t.brand)&&void 0!==l&&l.logo?((0,o.wg)(),(0,o.iD)("img",{key:0,src:null===(n=e.user)||void 0===n||null===(i=n.brand)||void 0===i?void 0:i.logo},null,8,v)):((0,o.wg)(),(0,o.iD)("img",m))]})),_:1}),(0,o._)("div",p,[h,b,(0,o._)("p",_,"Name: "+(0,n.zw)(e.oneInvoice.client.name),1),(0,o._)("p",f,"Business Type: "+(0,n.zw)(e.oneInvoice.client.businessType),1),(0,o._)("p",w,"Address: "+(0,n.zw)(e.oneInvoice.client.address),1),(0,o._)("p",x,"Email: "+(0,n.zw)(e.oneInvoice.client.email),1)])]),(0,o._)("div",y,[(0,o._)("p",null,[(0,o.Wm)(H,{body:a.getJSPDFProps()},null,8,["body"])]),(0,o._)("p",g,(0,n.zw)(e.oneInvoice.invoiceNumber),1),(0,o._)("p",I,"Invoice Date: "+(0,n.zw)(a.dateConversion(e.oneInvoice.date)),1),(0,o._)("p",D,"Due Date: "+(0,n.zw)(a.dateConversion(e.oneInvoice.dueDate)),1)])]),(0,o._)("div",q,[(0,o._)("div",N,[$,(0,o._)("p",k,"Client Name: "+(0,n.zw)(null===(l=e.oneInvoice)||void 0===l||null===(i=l.clientContact)||void 0===i?void 0:i.name),1),(0,o._)("p",null,"Email: "+(0,n.zw)(null===(d=e.oneInvoice)||void 0===d||null===(u=d.clientContact)||void 0===u?void 0:u.email),1),(0,o._)("p",null,"Phone Number: "+(0,n.zw)(null===(R=e.oneInvoice)||void 0===R||null===(B=R.clientContact)||void 0===B?void 0:B.businessPhoneNumber1),1),(0,o._)("p",null,"Address: "+(0,n.zw)(null===(F=e.oneInvoice)||void 0===F||null===(O=F.clientContact)||void 0===O?void 0:O.businessPhoneNumber2),1)])]),(0,o._)("div",z,[(0,o.Wm)(J,{flat:"",bordered:""},{default:(0,o.w5)((()=>[C,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.oneInvoice.invoiceItems,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{style:(0,n.j5)(a.rowColor(t)),key:t},[(0,o._)("td",P,(0,n.zw)(t+1),1),(0,o._)("td",T,(0,n.zw)(e.name),1),(0,o._)("td",S,(0,n.zw)(e.description),1),(0,o._)("td",V,(0,n.zw)(e.unitPrice),1),(0,o._)("td",W,(0,n.zw)(e.qty),1),(0,o._)("td",A,(0,n.zw)(e.qty*e.unitPrice),1)],4)))),128))])])),_:1})]),(0,o._)("div",L,[Q,(0,o._)("div",U,[(0,o.Wm)(M,{mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",readonly:"",modelValue:s.stotal,"onUpdate:modelValue":t[0]||(t[0]=e=>s.stotal=e),label:"Subtotal"},null,8,["modelValue"]),(0,o.Wm)(M,{mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",readonly:"",rules:[e=>Number(e)<=100||"Not more than 100!"],modelValue:s.taxRatio,"onUpdate:modelValue":t[1]||(t[1]=e=>s.taxRatio=e),label:"Tax Ratio%"},null,8,["rules","modelValue"]),(0,o.Wm)(M,{mask:"#","fill-mask":"0","reverse-fill-mask":"",readonly:"","model-value":"Number",modelValue:s.discount,"onUpdate:modelValue":t[2]||(t[2]=e=>s.discount=e),label:"Discount%"},null,8,["modelValue"]),(0,o.Wm)(M,{readonly:"",modelValue:s.total,"onUpdate:modelValue":t[3]||(t[3]=e=>s.total=e),label:"Grand total",type:"number"},null,8,["modelValue"])])]),(0,o.Wm)(G,{class:"q-mt-lg"}),(0,o._)("div",Z,[(0,o._)("p",{class:"q-mt-md",innerHTML:e.oneInvoice.description},null,8,j)])]})),_:1})])])),_:1})):((0,o.wg)(),(0,o.j4)(B,{key:0,class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{color:"primary",size:"md"})])),_:1}))}var B=l(46303),F=l(93617),E=l(6942);const H={components:{breadcrumps:B.Z,DownloadPDFButton:E.Z},data(){return{isLoaded:!1,taxRatio:0,total:0,discount:0,stotal:0,crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Invoice",icon:"receipt",path:"/finance/invoice"}]}},computed:{...(0,F.rn)("financeStore",["oneInvoice"]),...(0,F.rn)("example",["user"])},methods:{...(0,F.nv)("example",["getUser"]),...(0,F.nv)("financeStore",["getInvoice"]),dateConversion(e){return console.log," "+e.split("T")[0]},rowColor(e){if(e%2===0)return"background: #f2f2f2 !important;"},getJSPDFProps(){var e,t,l,o,n,i,s,a,d,u,c,r,v,m,p,h,b,_,f;return{outputType:"save",returnJsPDFDocObject:!0,fileName:"Invoice.pdf",orientationLandscape:!1,compress:!0,logo:{src:`http://localhost:5050/api/v1/readAsStream/?key=${null===(e=this.user)||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.logo}`,type:null,width:26.66,height:26.66,margin:{top:0,left:0}},business:{name:`${null===(l=this.user)||void 0===l||null===(o=l.brand)||void 0===o?void 0:o.name}`,address:`${null===(n=this.user)||void 0===n||null===(i=n.brand)||void 0===i?void 0:i.address}`,phone:`${null===(s=this.user)||void 0===s||null===(a=s.brand)||void 0===a?void 0:a.phoneNumber}`,email:`${null===(d=this.user)||void 0===d||null===(u=d.brand)||void 0===u?void 0:u.email}`,website:`${null===(c=this.user)||void 0===c||null===(r=c.brand)||void 0===r?void 0:r.website}`},contact:{label:"Invoice to",name:`${null===this||void 0===this||null===(v=this.oneInvoice)||void 0===v?void 0:v.clientName}`,address:`${null===this||void 0===this||null===(m=this.oneInvoice)||void 0===m?void 0:m.clientAddress}`,phone:`${null===this||void 0===this||null===(p=this.oneInvoice)||void 0===p?void 0:p.clientPhoneNumbers}`,email:`${null===this||void 0===this||null===(h=this.oneInvoice)||void 0===h?void 0:h.clientEmail}`},invoice:{label:"",num:`${null===(b=this.oneInvoice)||void 0===b?void 0:b.invoiceNumber}`,invDate:`Date: ${this.dateConversion(this.oneInvoice.date)}`,invGenDate:`Due Date: ${this.dateConversion(this.oneInvoice.dueDate)}`,headerBorder:!1,tableBodyBorder:!1,header:[{title:"#",style:{width:10}},{title:"Name",style:{width:30}},{title:"Description",style:{width:80}},{title:"Unit Price"},{title:"Quantity"},{title:"Total Amount"}],table:Array.from(null===(_=this.oneInvoice)||void 0===_?void 0:_.invoiceItems,((e,t)=>[`${t+1}`,`${e.name}`,`${e.description}`,`${e.unitPrice}`,`${e.qty}`,""+e.qty*e.unitPrice])),invSubTotalLabel:"Sub Total:",invSubTotal:`${this.stotal}`,invTotalLabel:"Total:",invTotal:`${this.total}`,invCurrency:"USD",row1:{col1:"Tax:",col2:`${this.taxRatio}`,col3:"%",style:{fontFamily:"serif",fontSize:10}},row2:{col1:"Discount:",col2:`${this.discount}`,col3:"%",style:{fontSize:10}},invDescLabel:"Note",invDesc:null===(f=this.oneInvoice)||void 0===f?void 0:f.description},footer:{text:""},pageEnable:!0,pageLabel:"page "}}},async mounted(){await this.getInvoice(this.$route.params.id),await this.getUser(),this.isLoaded=!0,this.discount=Number(this.oneInvoice.discount),this.taxRatio=Number(this.oneInvoice.taxRate),this.stotal=Number(this.oneInvoice.subTotalAmount),this.discount=Number(this.oneInvoice.discount),this.total=Number(this.oneInvoice.totalAmount)}};var J=l(24379),M=l(6833),G=l(10151),O=l(75096),K=l(30481),Y=l(64689),X=l(65869),ee=l(7518),te=l.n(ee);H.render=R,H.__scopeId="data-v-6d5aa69e";const le=H;te()(H,"components",{QPage:J.Z,QSpinner:M.Z,QCard:G.Z,QAvatar:O.Z,QMarkupTable:K.Z,QInput:Y.Z,QSeparator:X.Z})}}]);