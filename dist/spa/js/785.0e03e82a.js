"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[785],{931:(e,t,s)=>{s.r(t),s.d(t,{default:()=>J});var l=s(3673);const o={class:"flex justify-between items-center"},a=(0,l._)("p",{class:"text-h4"},"Projects",-1);function i(e,t,s,i,r,d){const n=(0,l.up)("breadcrmps"),m=(0,l.up)("q-btn"),u=(0,l.up)("projects"),c=(0,l.up)("modal"),p=(0,l.up)("q-dialog"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{class:"q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",null,[a,(0,l.Wm)(n,{map:i.crumps},null,8,["map"])]),(0,l.Wm)(m,{onClick:t[0]||(t[0]=e=>r.dialogue=!0),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})]),(0,l.Wm)(u),(0,l.Wm)(p,{seamless:"",position:"right",modelValue:r.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>r.dialogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onCloseDialogue:t[1]||(t[1]=e=>r.dialogue=!1),actionType:"Add"})])),_:1},8,["modelValue"])])),_:1})}var r=s(6303),d=s(2323),n=s(3402),m=s.n(n);const u=e=>((0,l.dD)("data-v-5e41aade"),e=e(),(0,l.Cn)(),e),c={class:"row row1"},p={style:{"max-width":"100% !important"},class:"flex column justify-start"},h={class:"text-h6 q-mr-none",style:{"min-width":"80% !important","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"}},b=u((()=>(0,l._)("p",{class:"text-subtitle2 q-mb-none"},"Deadline:",-1))),g={class:"text-grey"},w=u((()=>(0,l._)("p",{class:"text-subtitle2 q-mb-sm"},"Project Leader:",-1))),f={class:"row q-mb-lg"},_=u((()=>(0,l._)("img",{src:m()},null,-1))),x={key:0,class:"text-subtitle1 q-pt-xs q-ma-none text-grey"},q=u((()=>(0,l._)("img",{src:m()},null,-1))),W=u((()=>(0,l._)("p",{class:"text-subtitle2 q-mb-sm"},"Team:",-1))),y={class:"row"},k=u((()=>(0,l._)("img",{src:m()},null,-1))),v={key:0,class:"text-subtitle1 q-pa-none q-ma-none text-grey"},j=u((()=>(0,l._)("img",{src:m()},null,-1)));function C(e,t,s,o,a,i){const r=(0,l.up)("q-icon"),n=(0,l.up)("q-item-section"),m=(0,l.up)("q-item"),u=(0,l.up)("q-separator"),C=(0,l.up)("q-list"),P=(0,l.up)("q-menu"),U=(0,l.up)("q-btn"),Z=(0,l.up)("router-link"),Q=(0,l.up)("q-tooltip"),z=(0,l.up)("q-avatar"),V=(0,l.up)("q-item-label"),D=(0,l.up)("q-select"),L=(0,l.up)("q-popup-edit"),I=(0,l.up)("q-card-section"),T=(0,l.up)("q-card"),S=(0,l.up)("modal"),M=(0,l.up)("q-dialog"),O=(0,l.up)("q-page"),A=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(O,{class:"q-mt-md"},{default:(0,l.w5)((()=>[(0,l._)("div",c,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.projects,((s,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:"col-lg-3 col-md-4 col-sm-6 col-xs-12 q-pr-sm"},[(0,l.Wm)(T,{flat:"",class:"q-mt-sm",bordered:"",style:{position:"relative !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"absolute-top-right",dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{style:{"min-width":"75px"}},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(m,{onClick:t=>e.deleteProject({id:s.id}),style:{},clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,l.Wm)(u),(0,l.wy)((0,l.Wm)(m,{onClick:e=>{a.body=s,a.dialogue=!0},clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[A]])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(I,{class:"flex justify-start text-overflow"},{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l.Wm)(Z,{style:{"max-width":"100% !important",color:"black"},to:`/projects/${s.id}`},{default:(0,l.w5)((()=>[(0,l._)("p",h,(0,d.zw)(s.name),1)])),_:2},1032,["to"]),b,(0,l._)("p",g,(0,d.zw)(s.plannedEndDate.split("T")[0]),1),w,(0,l._)("div",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.leaderUsers.slice(0,2),(t=>((0,l.wg)(),(0,l.iD)("div",{class:"q-mr-xs q-mt-xs q-mb-xs",key:t.id},[(0,l.Wm)(z,{size:"30px"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{onClick:l=>e.deleteProjectLeader({id:s.id,leaders:[t.userId]}),round:"",size:"5px",icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"]),_,(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(t.name),1)])),_:2},1024)])),_:2},1024)])))),128)),s.leaderUsers.length>2?((0,l.wg)(),(0,l.iD)("p",x,"....+"+(0,d.zw)(s.leaderUsers.length-2),1)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,d.C_)(["flex justify-center items-start q-mt-xs",s.leaderUsers.length>2&&"q-ml-xs"])},[(0,l.Wm)(U,{onClick:e=>i.getLeaderOptions(s),round:"",size:"10px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:a.leaders,"onUpdate:modelValue":t[1]||(t[1]=e=>a.leaders=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,l.w5)((e=>[(0,l.Wm)(D,{rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:a.leaders,"onUpdate:modelValue":t[0]||(t[0]=e=>a.leaders=e),options:a.options,label:"Choose leaders",disable:0===a.options.length,hint:0===a.options.length?"All users has been added":""},{option:(0,l.w5)((e=>[(0,l.Wm)(m,(0,d.vs)((0,l.F4)(e.itemProps)),{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"avatar-list"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"q-mr-xs",size:"30px"},{default:(0,l.w5)((()=>[q])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","disable","hint"]),(0,l.wy)((0,l.Wm)(U,{class:"q-mt-xs q-mb-xs",onClick:e=>i.addProjectLeaders(s.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===a.leaders.length},null,8,["onClick","disable"]),[[A]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])],2)]),W,(0,l._)("div",y,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.memberUsers.slice(0,2),(t=>((0,l.wg)(),(0,l.j4)(z,{class:"q-mr-xs",key:t.id,size:"30px"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{onClick:l=>e.deleteProjectMember({id:s.id,members:[t.userId]}),round:"",size:"5px",icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"]),k,(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(t.name),1)])),_:2},1024)])),_:2},1024)))),128)),s.memberUsers.length>2?((0,l.wg)(),(0,l.iD)("p",v,"....+"+(0,d.zw)(s.memberUsers.length-2),1)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,d.C_)(["flex justify-center items-start",s.memberUsers.length>2&&"q-ml-xs"])},[(0,l.Wm)(U,{onClick:e=>i.getUserOptions(s),round:"",size:"10px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:a.members,"onUpdate:modelValue":t[3]||(t[3]=e=>a.members=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,l.w5)((e=>[(0,l.Wm)(D,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:a.members,"onUpdate:modelValue":t[2]||(t[2]=e=>a.members=e),options:a.options,label:"Choose members",disable:0===a.options.length,hint:0===a.options.length?"All users has been added":""},{option:(0,l.w5)((e=>[(0,l.Wm)(m,(0,d.vs)((0,l.F4)(e.itemProps)),{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"avatar-list"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"q-mr-xs",size:"30px"},{default:(0,l.w5)((()=>[j])),_:1}),(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","disable","hint"]),(0,l.wy)((0,l.Wm)(U,{onClick:e=>i.addProjectMembers(s.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===a.members.length},null,8,["onClick","disable"]),[[A]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])],2)])])])),_:2},1024)])),_:2},1024)])))),128))]),(0,l.Wm)(M,{seamless:"",position:"right",modelValue:a.dialogue,"onUpdate:modelValue":t[5]||(t[5]=e=>a.dialogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{onCloseDialogue:t[4]||(t[4]=e=>a.dialogue=!1),actionType:"Edit",body:a.body},null,8,["body"])])),_:1},8,["modelValue"])])),_:1})}var P=s(3617),U=s(8288);const Z={computed:{...(0,P.rn)("projectStore",["projects"]),...(0,P.rn)("userStore",["users"])},components:{modal:U.Z},data(){return{loading:!1,dialogue:!1,id:"",body:{},options:[],members:[],leaders:[]}},methods:{...(0,P.nv)("projectStore",["getProjects","deleteProject","addProjectMember","deleteProjectMember","addProjectLeader","deleteProjectLeader"]),...(0,P.nv)("userStore",["getUsers"]),async addProjectMembers(e){let t=[];for(let s=0;s<this.members.length;s++)t.push(this.members[s].id);await this.addProjectMember({id:e,members:t}),this.members=[]},async addProjectLeaders(e){let t=[];for(let s=0;s<this.leaders.length;s++)t.push(this.leaders[s].id);await this.addProjectLeader({id:e,leaders:t}),this.leaders=[]},getUserOptions(e){let t=[],s=[];this.options=[],setTimeout((()=>{if(e){for(let l=0;l<this.users.length;l++){for(let t=0;t<e.memberUsers.length;t++)Number(e.memberUsers[t].userId)===Number(this.users[l].id)&&s.push({id:this.users[l].id,label:this.users[t].name});t.push({id:this.users[l].id,label:this.users[l].name})}this.options=t.filter((({id:e})=>!s.some((({id:t})=>t===e))))}}),200)},getLeaderOptions(e){let t=[],s=[];this.options=[],setTimeout((()=>{if(e){for(let l=0;l<this.users.length;l++){for(let t=0;t<e.leaderUsers.length;t++)Number(e.leaderUsers[t].userId)===Number(this.users[l].id)&&s.push({id:this.users[l].id,label:this.users[t].name});t.push({id:this.users[l].id,label:this.users[l].name})}this.options=t.filter((({id:e})=>!s.some((({id:t})=>t===e))))}}),200)}},async mounted(){this.loading=!0,await this.getProjects(),await this.getUsers(),this.loading=!1}};var Q=s(4379),z=s(151),V=s(2165),D=s(811),L=s(7011),I=s(3414),T=s(2035),S=s(4554),M=s(5869),O=s(5589),A=s(5096),N=s(8870),E=s(1289),H=s(3314),K=s(2350),Y=s(6778),B=s(677),F=s(7518),R=s.n(F);Z.render=C,Z.__scopeId="data-v-5e41aade";const $=Z;R()(Z,"components",{QPage:Q.Z,QCard:z.Z,QBtn:V.Z,QMenu:D.Z,QList:L.Z,QItem:I.Z,QItemSection:T.Z,QIcon:S.Z,QSeparator:M.Z,QCardSection:O.Z,QAvatar:A.Z,QTooltip:N.Z,QPopupEdit:E.Z,QSelect:H.Z,QItemLabel:K.Z,QDialog:Y.Z}),R()(Z,"directives",{ClosePopup:B.Z});const G={components:{breadcrmps:r.Z,Projects:$,modal:U.Z},data(){return{dialogue:!1}},setup(){return{crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Projects",icon:"work",path:"/users"}]}}};G.render=i;const J=G;R()(G,"components",{QPage:Q.Z,QBtn:V.Z,QDialog:Y.Z})}}]);