"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[492],{1492:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ut});var l=s(3673),a=s(2323),o=s(3402),n=s.n(o);const m=(0,l._)("img",{alt:"oneconnect logo",src:n(),style:{height:"30px",width:"30px"}},null,-1),i={class:"flex flex-center q-mr-sm"},r=(0,l.Uk)("4"),d=(0,l.Uk)("2"),c=["src"],u=(0,l.Uk)("Settings"),g=(0,l.Uk)("Log out"),p={class:"q-ml-sm q-mt-xs",style:{"margin-top":"7px"}},h=(0,l._)("i",{style:{"font-size":"24px"},class:"las la-edit"},null,-1),w={key:0,class:"q-pa-md text-grey"},f={class:(0,a.C_)("q-pa-xs")},y={key:0,class:"flex"},_=["src"],x={class:"flex col"},b={class:"flex"},q={key:0,class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},v={key:1,class:"q-ma-none"},k={key:0,class:"q-ma-none"},W={class:"q-mt-xs q-ml-sm text-grey",style:{width:"80% !important"}},I={key:1,class:"flex"},C=["src"],D={style:{transform:"translateX(-35px) !important"},class:"items-center q-mt-md col"},z={class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},N={class:"q-mt-xs q-ml-sm text-grey",style:{width:"80% !important"}},S={key:2,class:"flex items-center"},U=["src"],R={class:"flex col"},V={class:"flex q-mt-md"},Z={key:0,class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},Q={key:1,class:"q-ma-none"},M={key:0,class:"q-ma-none"},j={class:"q-mt-xs q-ml-sm text-grey",style:{width:"80% !important"}},P={key:3,class:"flex items-center"},T=["src"],H={class:"items-center q-mt-md col"},O={class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},J={class:"q-mt-xs q-ml-sm text-grey",style:{width:"80% !important"}},L={key:4,class:"flex"},Y={class:"flex items-center"},B={class:"flex"},K=["src"],A={class:"items-center q-mt-sm col"},E={class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},F={class:"q-mt-xs q-ml-sm text-ellipses text-grey",style:{width:"80% !important"}},$={key:5,class:"flex"},X={class:"flex items-center"},G={key:0,class:"flex"},ee=["src"],te={class:"items-center q-mt-sm col"},se={class:"q-mr-none q-mt-none q-mb-none q-ml-sm"},le={class:"q-mt-xs text-ellipses q-ml-sm text-grey",style:{width:"60% !important"}},ae={class:"flex flex-center q-mr-sm absolute-right"},oe={key:0,class:"fit flex items-center justify-start column bg-grey-1"},ne={class:"q-mt-sm row"},me={style:{width:"33.33% !important"},class:"flex column flex-center q-pr-md q-pl-md q-pb-md q-pt-xs"},ie=["src"],re={class:"q-ma-none text-grey"},de=["src"],ce={class:"q-mr-none q-mt-none q-mb-none q-ml-sm text-grey"},ue={key:1,class:"flex flex-center q-pa-lg"},ge={key:0,class:"flex column flex-center q-mt-xl"},pe=["src"],he={class:"text-h6 q-ma-none text-grey"},we={key:1,class:"flex column flex-center q-mt-xl"},fe=["src"],ye={class:"text-h6 q-ma-none text-grey"},_e={key:2,class:"q-mt-xl flex column",style:{width:"100% !important"}},xe={class:"flex justify-between"},be=(0,l._)("p",{class:"text-body1 text-weight-medium"},"Username:",-1),qe={class:"text-body1 text-grey text-weight-medium"},ve={class:"flex justify-between"},ke=(0,l._)("p",{class:"text-body1 text-weight-medium"},"Email:",-1),We={class:"text-body1 text-grey text-weight-medium"},Ie={class:"flex justify-between"},Ce=(0,l._)("p",{class:"text-body1 text-weight-medium"},"Phone:",-1),De={class:"text-body1 text-grey text-weight-medium"},ze={key:3,class:"q-mt-xl flex column",style:{width:"100% !important"}},Ne={class:"flex justify-between"},Se=(0,l._)("p",{class:"text-body1 text-weight-medium"},"Username:",-1),Ue={class:"text-body1 text-grey text-weight-medium"},Re={class:"flex justify-between"},Ve=(0,l._)("p",{class:"text-body1 text-weight-medium"},"Email:",-1),Ze={class:"text-body1 text-grey text-weight-medium"},Qe={class:"flex justify-between"},Me=(0,l._)("p",{class:"text-body1 text-weight-medium"},"Phone:",-1),je={class:"text-body1 text-grey text-weight-medium"},Pe=(0,l._)("span",{class:"q-ml-sm"},"Add Members",-1),Te=["src"],He=["src"],Oe=(0,l._)("span",{class:"q-ml-sm"},"Create a new channel",-1),Je=["src"],Le=["src"],Ye=(0,l._)("span",{class:"q-ml-sm"},"Change channel name",-1),Be=(0,l._)("span",{class:"q-ml-sm"},"Change channel photo",-1);function Ke(e,t,s,o,n,Ke){const Ae=(0,l.up)("q-btn"),Ee=(0,l.up)("q-space"),Fe=(0,l.up)("q-badge"),$e=(0,l.up)("q-avatar"),Xe=(0,l.up)("q-item-section"),Ge=(0,l.up)("q-item"),et=(0,l.up)("q-list"),tt=(0,l.up)("q-menu"),st=(0,l.up)("q-toolbar-title"),lt=(0,l.up)("q-toolbar"),at=(0,l.up)("q-header"),ot=(0,l.up)("q-icon"),nt=(0,l.up)("q-input"),mt=(0,l.up)("q-item-label"),it=(0,l.up)("q-drawer"),rt=(0,l.up)("q-scroll-area"),dt=(0,l.up)("q-card-section"),ct=(0,l.up)("q-card"),ut=(0,l.up)("q-expansion-item"),gt=(0,l.up)("conversation"),pt=(0,l.up)("q-page-container"),ht=(0,l.up)("q-layout"),wt=(0,l.up)("confirm"),ft=(0,l.up)("q-dialog"),yt=(0,l.up)("q-chip"),_t=(0,l.up)("q-select"),xt=(0,l.up)("q-card-actions"),bt=(0,l.up)("q-file"),qt=(0,l.Q2)("close-popup"),vt=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(ht,{view:"lHr LpR lFr",class:"shadow-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(at,{class:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(lt,{class:"bg-primary text-white shadow-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(st,{class:"flex"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ae,{flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=e=>n.drawer=!n.drawer)}),(0,l.Wm)(Ae,{flat:"",round:""},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(Ee),(0,l._)("div",i,[(0,l.Wm)(Ae,{flat:"",color:"white",round:"",icon:"email",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(Fe,{color:"red",rounded:"",floating:""},{default:(0,l.w5)((()=>[r])),_:1})])),_:1}),(0,l.Wm)(Ae,{flat:"",color:"white",round:"",icon:"notifications",size:"sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(Fe,{rounded:"",color:"red",floating:""},{default:(0,l.w5)((()=>[d])),_:1})])),_:1})]),(0,l.Wm)(Ae,{flat:"",round:""},{default:(0,l.w5)((()=>[null!==e.user.avatar?((0,l.wg)(),(0,l.iD)("img",{key:0,alt:"User logo",src:e.user.avatar,style:{height:"30px",width:"30px","border-radius":"50%"}},null,8,c)):((0,l.wg)(),(0,l.j4)($e,{key:1,size:"35px","font-size":"10px",color:"grey","text-color":"white",icon:"person"})),(0,l.Wm)(tt,null,{default:(0,l.w5)((()=>[(0,l.Wm)(et,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Ge,{to:"/profile",clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Xe,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:1},512),[[qt]]),(0,l.Wm)(Ge,{clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Xe,{onClick:Ke.logout},{default:(0,l.w5)((()=>[g])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(Ae,{flat:"",round:"",onClick:t[1]||(t[1]=e=>n.drawer1=!n.drawer1)},{default:(0,l.w5)((()=>[(0,l._)("i",{style:{"font-size":"24px"},class:(0,a.C_)("bi-text-indent-"+(n.drawer1?"left":"right"))},null,2)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(it,{modelValue:n.drawer,"onUpdate:modelValue":t[3]||(t[3]=e=>n.drawer=e),"show-if-above":"",width:300,breakpoint:1185},{default:(0,l.w5)((()=>[(0,l.Wm)(et,{style:{"overflow-y":"scroll !important","overflow-x":"hidden !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(Ge,{class:"flex justify-around",style:{position:"sticky",top:"0","z-index":"5","background-color":"white"}},{default:(0,l.w5)((()=>[(0,l.Wm)(nt,{class:"full-width q-mt-xs",outlined:"",rounded:"",label:"Search"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(ot,{name:"search",class:"q-ml-sm"})])),_:1}),(0,l._)("div",p,[(0,l.Wm)(Ae,{ripple:!1,class:"bg-blue-1",onClick:t[2]||(t[2]=e=>n.createRoom=!0),flat:"",round:"",color:"primary"},{default:(0,l.w5)((()=>[h])),_:1})])])),_:1}),0===n.rooms.length?((0,l.wg)(),(0,l.iD)("div",w,"No rooms to show!")):((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(n.rooms,((t,s)=>((0,l.wg)(),(0,l.iD)("div",{key:s},[(0,l._)("div",f,[(0,l.wy)((0,l.Wm)(Ge,{style:{"border-radius":"10px"},class:(0,a.C_)(t.id===e.chat.id?"bg-blue-1":""),onClick:e=>Ke.getMessages(t,s),clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Xe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(mt,null,{default:(0,l.w5)((()=>["channel"!==t.room_type||t.name||t.avatar?!t.avatar&&t.name?((0,l.wg)(),(0,l.iD)("div",I,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.users,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[t<2?((0,l.wg)(),(0,l.iD)("div",{key:0,style:(0,a.j5)(1===t?"transform: translate(-45px,20px) !important;":"transform: translate(10px) !important;"),class:"text-ellipses"},[(0,l.Wm)($e,{class:(0,a.C_)(1===t&&"q-ml-xs"),size:"40px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.avatar?e.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,C)])),_:2},1032,["class"])],4)):(0,l.kq)("",!0)])))),128)),(0,l._)("div",D,[(0,l._)("p",z,(0,a.zw)(t.name),1),(0,l._)("p",N,(0,a.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text.slice(0,30):"No messages!"),1)])])):"channel"===t.room_type&&t.avatar&&!t.name?((0,l.wg)(),(0,l.iD)("div",S,[(0,l.Wm)($e,{size:"50px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:t.avatar},null,8,U)])),_:2},1024),(0,l._)("div",R,[(0,l._)("div",V,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.users,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"flex",key:e.id},[t<2?((0,l.wg)(),(0,l.iD)("p",Z,(0,a.zw)(e.name),1)):(0,l.kq)("",!0),t<1?((0,l.wg)(),(0,l.iD)("p",Q,",")):(0,l.kq)("",!0)])))),128)),t.users.length>2?((0,l.wg)(),(0,l.iD)("p",M,"...")):(0,l.kq)("",!0)]),(0,l._)("div",null,[(0,l._)("p",j,(0,a.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text.slice(0,30):"No messages!"),1)])])])):"channel"===t.room_type&&t.avatar&&t.name?((0,l.wg)(),(0,l.iD)("div",P,[(0,l.Wm)($e,{size:"50px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:t.avatar},null,8,T)])),_:2},1024),(0,l._)("div",H,[(0,l._)("p",O,(0,a.zw)(t.name),1),(0,l._)("p",J,(0,a.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text.slice(0,30):"No messages!"),1)])])):1===t.users.length?((0,l.wg)(),(0,l.iD)("div",L,[(0,l._)("div",Y,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.users,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("div",B,[(0,l.Wm)($e,{size:"50px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.avatar?e.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,K)])),_:2},1024),(0,l._)("div",A,[(0,l._)("p",E,(0,a.zw)(e.name),1),(0,l._)("p",F,(0,a.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text.slice(0,30):"No messages!"),1)])])])))),128))])])):((0,l.wg)(),(0,l.iD)("div",$,[(0,l._)("div",X,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.users,(s=>((0,l.wg)(),(0,l.iD)("div",{key:s.id},[e.user.id!==s.id?((0,l.wg)(),(0,l.iD)("div",G,[(0,l.Wm)($e,{size:"50px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:s.avatar?s.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,ee)])),_:2},1024),(0,l._)("div",te,[(0,l._)("p",se,(0,a.zw)(s.name),1),(0,l._)("p",le,(0,a.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text.slice(0,30):"No messages!"),1)])])):(0,l.kq)("",!0)])))),128))])])):((0,l.wg)(),(0,l.iD)("div",y,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.users,((e,s)=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[s<2?((0,l.wg)(),(0,l.iD)("div",{key:0,style:(0,a.j5)(1===s&&t.users.length>1?"transform: translate(-45px,20px) !important;":`transform: translate(${t.users.length>1?"10":"0"}px) !important;`),class:"text-ellipses"},[(0,l.Wm)($e,{class:(0,a.C_)(1===s&&"q-ml-xs"),size:t.users.length>1?"40px":"50px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.avatar?e.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,_)])),_:2},1032,["class","size"])],4)):(0,l.kq)("",!0)])))),128)),(0,l._)("div",{class:(0,a.C_)([t.users.length>1?"q-mt-md":"q-mt-sm","items-center col"]),style:(0,a.j5)(t.users.length>1&&"transform: translateX(-35px) !important;")},[(0,l._)("div",x,[(0,l._)("div",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.users,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"flex",key:e.id},[t<2?((0,l.wg)(),(0,l.iD)("p",q,(0,a.zw)(e.name),1)):(0,l.kq)("",!0),t<1?((0,l.wg)(),(0,l.iD)("p",v,",")):(0,l.kq)("",!0)])))),128)),t.users.length>2?((0,l.wg)(),(0,l.iD)("p",k,"...")):(0,l.kq)("",!0)])]),(0,l._)("p",W,(0,a.zw)(0!==t.messages.length?t.messages[t.messages.length-1].text.slice(0,30):"No messages!"),1)],6)]))])),_:2},1024)])),_:2},1024),(0,l.Wm)(Xe,{side:"",top:""},{default:(0,l.w5)((()=>[(0,l.Wm)(mt,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(0!==t.messages.length?Ke.format(t.messages[t.messages.length-1].created_at):""),1)])),_:2},1024)])),_:2},1024),(0,l._)("div",ae,[t.messages[t.messages.length-1]&&"seen"!==t.messages[t.messages.length-1].msg_recepeint_status&&t.messages.msg_recepeint_user_id!==e.user.id?((0,l.wg)(),(0,l.j4)(ot,{key:0,color:"primary",rounded:"",name:"circle",size:"12px"})):(0,l.kq)("",!0)])])),_:2},1032,["class","onClick"]),[[vt]])])])))),128))])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(it,{"show-if-above":"",side:"right",bordered:"",modelValue:n.drawer1,"onUpdate:modelValue":t[7]||(t[7]=e=>n.drawer1=e),width:300,breakpoint:1185,class:"bg-grey-1"},{default:(0,l.w5)((()=>[e.chat?((0,l.wg)(),(0,l.iD)("div",oe,["channel"===e.chat.room_type?((0,l.wg)(),(0,l.j4)(rt,{key:0,style:{height:"30vh !important","border-bottom":"0.25px solid lightgrey"},class:"full-width"},{default:(0,l.w5)((()=>[(0,l._)("div",ne,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.allUsers,(t=>((0,l.wg)(),(0,l.iD)("div",{key:t.id},[(0,l._)("div",me,[(0,l.Wm)($e,{size:"60px"},{default:(0,l.w5)((()=>[(0,l.Wm)(Fe,{rounded:"",color:t.online?"green":"grey-5",class:"absolute-bottom-right q-mr-sm"},null,8,["color"]),n.roomInfo&&e.user.id===n.roomInfo.creator_id||t.id===e.user.id?((0,l.wg)(),(0,l.j4)(Ae,{key:0,round:"",size:"5px",onClick:e=>{n.membToDelete=t.id,n.cnfrm=!0},icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"])):(0,l.kq)("",!0),(0,l._)("img",{src:t.avatar?t.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,ie)])),_:2},1024),(0,l._)("p",re,(0,a.zw)(t.name),1)])])))),128))])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(rt,{style:{height:"70vh !important"},class:"full-width"},{default:(0,l.w5)((()=>[n.roomInfo&&"channel"===n.roomInfo.room_type?((0,l.wg)(),(0,l.j4)(et,{key:0,padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ut,{label:"Customize channel"},{default:(0,l.w5)((()=>[(0,l.Wm)(ct,{class:"bg-grey-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Ae,{align:"left",onClick:t[4]||(t[4]=e=>n.changeName=!0),rounded:"","no-caps":"",class:"bg-blue-1 full-width",flat:"",icon:"edit",label:"Change channel name",color:"primary"}),(0,l.Wm)(Ae,{align:"left",onClick:t[5]||(t[5]=e=>n.changePhoto=!0),rounded:"","no-caps":"",class:"bg-blue-1 q-mt-sm full-width",flat:"",icon:"image",label:"Change channel photo",color:"primary"})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(ut,{label:"Channel members"},{default:(0,l.w5)((()=>[(0,l.Wm)(ct,{class:"bg-grey-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.allUsers,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"flex items-center"},[(0,l.Wm)($e,{class:(0,a.C_)(0!==t&&"q-mt-sm"),size:"35px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.avatar?e.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,de)])),_:2},1032,["class"]),(0,l._)("p",ce,(0,a.zw)(e.name),1)])))),128)),(0,l.Wm)(Ae,{onClick:t[6]||(t[6]=e=>n.addMembers=!0),rounded:"","no-caps":"",class:"bg-blue-1 q-mt-sm",flat:"",icon:"add",label:"Add people",color:"primary"})])),_:1})])),_:1})])),_:1})])),_:1})):((0,l.wg)(),(0,l.iD)("div",ue,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.allUsers,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"full-width",key:t.id},[t.id!==e.user.id&&2===n.allUsers.length?((0,l.wg)(),(0,l.iD)("div",ge,[(0,l.Wm)($e,{size:"60px"},{default:(0,l.w5)((()=>[(0,l.Wm)(Fe,{rounded:"",color:t.online?"green":"grey-5",class:"absolute-bottom-right q-mr-sm"},null,8,["color"]),(0,l._)("img",{src:t.avatar?t.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,pe)])),_:2},1024),(0,l._)("p",he,(0,a.zw)(t.name),1)])):(0,l.kq)("",!0),1===n.allUsers.length?((0,l.wg)(),(0,l.iD)("div",we,[(0,l.Wm)($e,{size:"60px"},{default:(0,l.w5)((()=>[(0,l.Wm)(Fe,{rounded:"",color:t.online?"green":"grey-5",class:"absolute-bottom-right q-mr-sm"},null,8,["color"]),(0,l._)("img",{src:t.avatar?t.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,fe)])),_:2},1024),(0,l._)("p",ye,(0,a.zw)(t.name),1)])):(0,l.kq)("",!0),t.id!==e.user.id&&2===n.allUsers.length?((0,l.wg)(),(0,l.iD)("div",_e,[(0,l._)("div",xe,[be,(0,l._)("p",qe,(0,a.zw)(t.username?t.username:"..."),1)]),(0,l._)("div",ve,[ke,(0,l._)("p",We,(0,a.zw)(t.email?t.email:"..."),1)]),(0,l._)("div",Ie,[Ce,(0,l._)("p",De,(0,a.zw)(t.phoneNumber?t.phoneNumber:"..."),1)])])):(0,l.kq)("",!0),1===n.allUsers.length?((0,l.wg)(),(0,l.iD)("div",ze,[(0,l._)("div",Ne,[Se,(0,l._)("p",Ue,(0,a.zw)(t.username?t.username:"..."),1)]),(0,l._)("div",Re,[Ve,(0,l._)("p",Ze,(0,a.zw)(t.email?t.email:"..."),1)]),(0,l._)("div",Qe,[Me,(0,l._)("p",je,(0,a.zw)(t.phoneNumber?t.phoneNumber:"..."),1)])])):(0,l.kq)("",!0)])))),128))]))])),_:1})])):(0,l.kq)("",!0)])),_:1},8,["modelValue"]),"/chat"===n.path?((0,l.wg)(),(0,l.j4)(pt,{key:0,style:{"overflow-y":"hidden !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(gt,{sckt:n.sckt},null,8,["sckt"])])),_:1})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(ft,{modelValue:n.cnfrm,"onUpdate:modelValue":t[8]||(t[8]=e=>n.cnfrm=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(wt,{onConfirm:Ke.deleteMemeber},null,8,["onConfirm"])])),_:1},8,["modelValue"]),(0,l.Wm)(ft,{modelValue:n.addMembers,"onUpdate:modelValue":t[10]||(t[10]=e=>n.addMembers=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ct,{style:{width:"400px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(dt,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{icon:"group",color:"primary","text-color":"white"}),Pe])),_:1}),(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_t,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",loading:n.isLoading,modelValue:n.members1,"onUpdate:modelValue":t[9]||(t[9]=e=>n.members1=e),options:n.options1,label:"Choose members"},{option:(0,l.w5)((e=>[(0,l.Wm)(Ge,(0,a.vs)((0,l.F4)(e.itemProps)),{default:(0,l.w5)((()=>[(0,l.Wm)(Xe,{class:"avatar-list"},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{class:"q-mr-xs",size:"35px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,Te)])),_:2},1024),(0,l.Wm)(mt,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"selected-item":(0,l.w5)((e=>[(0,l.Wm)(yt,{removable:"",dense:"",onRemove:t=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"blue-1","text-color":"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{color:"secondary","text-color":"white"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,He)])),_:2},1024),(0,l.Uk)(" "+(0,a.zw)(e.opt.label),1)])),_:2},1032,["onRemove","tabindex"])])),_:1},8,["rules","loading","modelValue","options"])])),_:1}),(0,l.Wm)(xt,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Ae,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[qt]]),(0,l.wy)((0,l.Wm)(Ae,{onClick:Ke.addNewMembers,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:0===n.members1.length},null,8,["onClick","disable"]),[[qt]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ft,{ref:"roomDialoge",modelValue:n.createRoom,"onUpdate:modelValue":t[12]||(t[12]=e=>n.createRoom=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ct,{style:{width:"400px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(dt,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{icon:"chat",color:"primary","text-color":"white"}),Oe])),_:1}),(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_t,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",loading:n.isLoading,modelValue:n.members,"onUpdate:modelValue":t[11]||(t[11]=e=>n.members=e),options:n.options,label:"Choose members"},{option:(0,l.w5)((e=>[(0,l.Wm)(Ge,(0,a.vs)((0,l.F4)(e.itemProps)),{default:(0,l.w5)((()=>[(0,l.Wm)(Xe,{class:"avatar-list"},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{class:"q-mr-xs",size:"35px"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,Je)])),_:2},1024),(0,l.Wm)(mt,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"selected-item":(0,l.w5)((e=>[(0,l.Wm)(yt,{removable:"",dense:"",onRemove:t=>e.removeAtIndex(e.index),tabindex:e.tabindex,color:"blue-1","text-color":"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)($e,{color:"secondary","text-color":"white"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.opt.avatar?e.opt.avatar:"https://cdn-icons-png.flaticon.com/512/149/149071.png"},null,8,Le)])),_:2},1024),(0,l.Uk)(" "+(0,a.zw)(e.opt.label),1)])),_:2},1032,["onRemove","tabindex"])])),_:1},8,["rules","loading","modelValue","options"])])),_:1}),(0,l.Wm)(xt,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Ae,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[qt]]),(0,l.wy)((0,l.Wm)(Ae,{onClick:Ke.addMembs,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:0===n.members.length},null,8,["onClick","disable"]),[[qt]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ft,{modelValue:n.changeName,"onUpdate:modelValue":t[14]||(t[14]=e=>n.changeName=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ct,{style:{width:"400px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)($e,{icon:"edit",color:"primary","text-color":"white"}),Ye])),_:1}),(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)(nt,{modelValue:n.channelName,"onUpdate:modelValue":t[13]||(t[13]=e=>n.channelName=e),outlined:"",label:"Channel name"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(xt,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Ae,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[qt]]),(0,l.wy)((0,l.Wm)(Ae,{onClick:Ke.changeChannelName,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:!n.channelName},null,8,["onClick","disable"]),[[qt]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(ft,{modelValue:n.changePhoto,"onUpdate:modelValue":t[16]||(t[16]=e=>n.changePhoto=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ct,{style:{width:"400px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)($e,{icon:"edit",color:"primary","text-color":"white"}),Be])),_:1}),(0,l.Wm)(dt,null,{default:(0,l.w5)((()=>[(0,l.Wm)(bt,{filter:Ke.checkType,onRejected:Ke.onRejectedImage,label:"Choose photo",outlined:"",modelValue:n.channelPhoto,"onUpdate:modelValue":t[15]||(t[15]=e=>n.channelPhoto=e)},{prepend:(0,l.w5)((()=>[(0,l.Wm)(ot,{name:"attach_file"})])),_:1},8,["filter","onRejected","modelValue"])])),_:1}),(0,l.Wm)(xt,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(Ae,{"no-caps":"",flat:"",label:"Cancel",color:"primary"},null,512),[[qt]]),(0,l.wy)((0,l.Wm)(Ae,{onClick:Ke.changeChannelPhoto,"no-caps":"",flat:"",label:"Submit",color:"primary",disable:!n.channelPhoto},null,8,["onClick","disable"]),[[qt]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}s(7070);var Ae=s(1082),Ee=s(3617),Fe=s(1887),$e=s(4316),Xe=s(52),Ge=s.n(Xe);const et=new WebSocket("wss://oneconnect.it:4000"),tt={data(){return{isLoggedIn:localStorage.getItem("accessToken"),isExpanded:!0,isExpanded2:!0,membToDelete:null,members:[],addMembers:!1,createRoom:!1,channelName:"",channelPhoto:null,changePhoto:!1,options:[],sckt:et,members1:[],options1:[],onlineUsers:[],allUsers:[],rooms:[],roomInfo:null,loading:!1,isLoading:!1,drawer:!1,drawer1:!1,cnfrm:!1,changeName:!1,chatId:null,path:""}},computed:{...(0,Ee.rn)("example",["user"]),...(0,Ee.rn)("userStore",["users"]),...(0,Ee.rn)("chatStore",["chat"]),getHeight(){return"height: 50vh !important;"}},components:{confirm:Fe.Z,conversation:$e.Z},methods:{...(0,Ee.nv)("userStore",["getUsers"]),...(0,Ee.nv)("example",["getUser"]),...(0,Ee.nv)("chatStore",["getChat","clearChat"]),async changeChannelName(){let e=this;this.chatId=Number(e.chat.id),et.send(JSON.stringify({editRoom:{id:Number(e.chat.id),avatar:e.roomInfo.avatar,name:e.channelName}}))},async changeChannelPhoto(){let e=this,t=new FormData;t.append("files",this.channelPhoto);try{let s=await Ge().post("https://onconnect-backend-api.herokuapp.com/api/v1/chats/addFiles",t,{headers:{Authorization:localStorage.getItem("accessToken")}});s.data.success?(this.chatId=Number(e.chat.id),et.send(JSON.stringify({editRoom:{id:Number(e.chat.id),name:e.roomInfo.name,avatar:s.data.data[0].url}}))):this.$q.notify({type:"negative",message:"Something went wrong!"})}catch(s){console.log(s),this.$q.notify({type:"negative",message:"Something went wrong!"})}},addNewMembers(){let e=this,t=[];for(let s=0;s<this.members1.length;s++)t.push(this.members1[s].id);et.send(JSON.stringify({addRoomUsers:{id:e.chat.id,users:t}})),t=[],this.members1=[],this.addMembers=!1},deleteMemeber(){let e=this;et.send(JSON.stringify({deleteRoomUsers:{id:e.chat.id,users:[e.membToDelete]}})),this.membToDelete=null,this.cnfrm=!1},checkType(e){return e.filter((e=>e.type.includes("image")))},onRejectedImage(){this.$q.notify({type:"negative",message:"Only images are allowed!"})},async getMessages(e,t){document.body.offsetWidth<=1185&&(this.drawer=!1),localStorage.setItem("roomIndex",t),this.roomInfo=e,et.send(JSON.stringify({getMessagesByRoomId:{room_id:e.id}}))},getMessagesImmediate(){let e=this;et.send(JSON.stringify({getMessagesByRoomId:{room_id:Number(e.chat.id)}}))},format(e){return Ae.ZP.formatDate(e,"HH:mm")},addMembs(){let e=[];for(let t=0;t<this.members.length;t++)e.push(Number(this.members[t].id));et.send(JSON.stringify({createRoom:{users:e}})),e=[],this.members=[],this.createRoom=!1},updateScroll(){var e=document.getElementById("room-container");e.scrollTop=e.scrollHeight},logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("tab"),localStorage.removeItem("isLoggedIn"),this.$router.push("/login")},getUserOptions(){let e=[];this.options=[],setTimeout((()=>{for(let t=0;t<this.users.length;t++)e.push({id:this.users[t].id,label:this.users[t].name,avatar:this.users[t].avatar})}),100),this.options=e,this.options1=e}},mounted(){this.path=this.$route.path},async beforeMount(){this.isLoading=!0;let e=this;et.addEventListener("open",(async function(e){et.send(JSON.stringify({accessToken:localStorage.getItem("accessToken").substring(7,localStorage.getItem("accessToken").length)}))})),et.addEventListener("message",(async function(t){const s=JSON.parse(t.data);if("addRoom"===s.reqType&&e.getMessages(s.rooms.rooms[s.rooms.rooms.length-1],0),s.onlineUsers){e.onlineUsers=s.onlineUsers;let t=e.chat.users.filter((({id:e})=>!s.onlineUsers.some((({id:t})=>t===e)))),l=e.chat.users.filter((({id:e})=>s.onlineUsers.some((({id:t})=>t===e))));e.allUsers=[];for(let s=0;s<l.length;s++)e.allUsers.push({...l[s],online:!0});for(let s=0;s<t.length;s++)e.allUsers.push({...t[s],online:!1})}if(s.messagesByRoomId&&e.roomInfo.id===s.messagesByRoomId.room_id&&(await e.getChat({id:e.roomInfo.id,name:e.roomInfo.name,avatar:e.roomInfo.avatar,room_type:e.roomInfo.room_type,users:e.roomInfo.users,messages:s.messagesByRoomId.roomMessages}),e.updateScroll(),et.send(JSON.stringify({ping:!0}))),s.messagePerRoom)for(let l=0;l<e.rooms.length;l++)e.rooms[l].id===s.messagePerRoom.messfinal.room_id&&(e.rooms[l].messages.push(s.messagePerRoom.messfinal),await e.getMessagesImmediate());if(s.rooms){if(e.rooms=[],e.rooms=JSON.parse(t.data).rooms.rooms.reverse(),0===e.rooms.length)return void await e.clearChat();e.chat&&localStorage.getItem("roomIndex")&&Number(localStorage.getItem("roomIndex"))>=0&&e.rooms.length>=Number(localStorage.getItem("roomIndex"))?(setTimeout((()=>{et.send(JSON.stringify({getMessagesByRoomId:{room_id:e.rooms[Number(localStorage.getItem("roomIndex"))].id}}))}),100),e.roomInfo=e.rooms[Number(localStorage.getItem("roomIndex"))]):(et.send(JSON.stringify({getMessagesByRoomId:{room_id:e.rooms[0].id}})),e.roomInfo=e.rooms[0],localStorage.setItem("roomIndex",0))}else s.typing})),await this.getUser(),await this.getUsers(),this.getUserOptions(),this.isLoading=!1,setInterval((()=>{et.send(JSON.stringify({ping:!0}))}),1e4)}};var st=s(9214),lt=s(3812),at=s(9570),ot=s(3747),nt=s(2165),mt=s(2025),it=s(9721),rt=s(5096),dt=s(811),ct=s(7011),ut=s(3414),gt=s(2035),pt=s(2901),ht=s(7704),wt=s(4689),ft=s(4554),yt=s(2350),_t=s(4615),xt=s(151),bt=s(5589),qt=s(2652),vt=s(6778),kt=s(3314),Wt=s(7030),It=s(9367),Ct=s(4974),Dt=s(677),zt=s(860),Nt=s(7518),St=s.n(Nt);tt.render=Ke;const Ut=tt;St()(tt,"components",{QLayout:st.Z,QHeader:lt.Z,QToolbar:at.Z,QToolbarTitle:ot.Z,QBtn:nt.Z,QSpace:mt.Z,QBadge:it.Z,QAvatar:rt.Z,QMenu:dt.Z,QList:ct.Z,QItem:ut.Z,QItemSection:gt.Z,QDrawer:pt.Z,QScrollArea:ht.Z,QInput:wt.Z,QIcon:ft.Z,QItemLabel:yt.Z,QExpansionItem:_t.Z,QCard:xt.Z,QCardSection:bt.Z,QPageContainer:qt.Z,QDialog:vt.Z,QSelect:kt.Z,QChip:Wt.Z,QCardActions:It.Z,QFile:Ct.Z}),St()(tt,"directives",{ClosePopup:Dt.Z,Ripple:zt.Z})}}]);