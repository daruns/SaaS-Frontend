(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[64],{1887:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var l=i(3673);const o=(0,l._)("div",{class:"text-h6"},"Are you sure?",-1);function a(e,t){const i=(0,l.up)("q-card-section"),a=(0,l.up)("q-btn"),n=(0,l.up)("q-card-actions"),s=(0,l.up)("q-card"),r=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(s,{style:{width:"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(n,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(a,{flat:"",label:"Cancel",color:"negative"},null,512),[[r]]),(0,l.wy)((0,l.Wm)(a,{flat:"",label:"Delete",onClick:t[0]||(t[0]=t=>e.$emit("confirm")),color:"primary"},null,512),[[r]])])),_:1})])),_:1})}var n=i(151),s=i(5589),r=i(9367),d=i(2165),u=i(677),p=i(7518),c=i.n(p);const m={};m.render=a;const h=m;c()(m,"components",{QCard:n.Z,QCardSection:s.Z,QCardActions:r.Z,QBtn:d.Z}),c()(m,"directives",{ClosePopup:u.Z})},6303:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var l=i(3673);function o(e,t,i,o,a,n){const s=(0,l.up)("q-breadcrumbs-el"),r=(0,l.up)("q-breadcrumbs");return(0,l.wg)(),(0,l.j4)(r,{separator:"- - -"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.map,((e,t)=>((0,l.wg)(),(0,l.j4)(s,{to:e.path,exact:"",key:e.id,label:e.name,icon:e.icon},null,8,["to","label","icon"])))),128))])),_:1})}const a={props:["map"]};var n=i(1481),s=i(5926),r=i(7518),d=i.n(r);a.render=o;const u=a;d()(a,"components",{QBreadcrumbs:n.Z,QBreadcrumbsEl:s.Z})},7474:(e,t,i)=>{"use strict";i.d(t,{Z:()=>z});var l=i(3673),o=i(2323);const a={class:"flex items-center"},n=(0,l._)("p",{style:{padding:"0 !important","font-size":"1rem"}},"Rate: ",-1);function s(e,t,i,s,r,d){const u=(0,l.up)("q-toolbar-title"),p=(0,l.up)("q-btn"),c=(0,l.up)("q-toolbar"),m=(0,l.up)("q-input"),h=(0,l.up)("q-icon"),b=(0,l.up)("q-file"),y=(0,l.up)("q-btn-toggle"),f=(0,l.up)("vue-tel-input"),g=(0,l.up)("q-rating"),w=(0,l.up)("q-card-section"),C=(0,l.up)("q-card"),v=(0,l.up)("q-layout"),q=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(v,{style:{width:"500px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15 !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(i.actionType)+" "+(0,o.zw)(i.type[0].toUpperCase()+i.type.substr(1,i.type.length)),1)])),_:1}),(0,l.wy)((0,l.Wm)(p,{icon:"close",flat:"",round:"",dense:""},null,512),[[q]])])),_:1}),(0,l.Wm)(w,{class:"q-gutter-sm scroll"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{ref:"companyRef",outlined:"",modelValue:r.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.credentials.name=e),label:"Company","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the company name"]},null,8,["modelValue","rules"]),(0,l.Wm)(b,{modelValue:r.credentials.logo,"onUpdate:modelValue":t[1]||(t[1]=e=>r.credentials.logo=e),clearable:"",outlined:"",label:"Client logo",filled:"",class:"q-pb-md"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"attach_file",accept:".jpg, image/*"})])),_:1},8,["modelValue"]),(0,l.Wm)(y,{modelValue:r.credentials.businessType,"onUpdate:modelValue":t[2]||(t[2]=e=>r.credentials.businessType=e),class:"my-custom-toggle","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"Company",value:"Company"},{label:"Individual",value:"Individual"}]},null,8,["modelValue"]),"Edit"===i.actionType?((0,l.wg)(),(0,l.j4)(y,{key:0,modelValue:r.credentials.clientType,"onUpdate:modelValue":t[3]||(t[3]=e=>r.credentials.clientType=e),class:"my-custom-toggle","no-caps":"",rounded:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"Client",value:"client"},{label:"Lead",value:"lead"},{label:"Blacklist",value:"blacklist"}]},null,8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(f,{required:"",onCountryChanged:d.countryChange,class:"phone-input q-mt-lg",defaultCountry:"iq",customValidate:!1,onOnInput:d.valid,onInput:d.phoneValidate,modelValue:r.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>r.phone=e)},null,8,["onCountryChanged","onOnInput","onInput","modelValue"]),(0,l.Wm)(m,{class:"q-mt-lg",ref:"emailRef",outlined:"",type:"email",modelValue:r.credentials.email,"onUpdate:modelValue":t[5]||(t[5]=e=>r.credentials.email=e),label:"E-mail","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type a valid E-mail"]},null,8,["modelValue","rules"]),(0,l._)("div",a,[n,(0,l.Wm)(g,{modelValue:r.credentials.rate,"onUpdate:modelValue":t[6]||(t[6]=e=>r.credentials.rate=e),size:"2em",class:"q-mb-md q-ml-sm",max:5,color:"primary"},null,8,["modelValue"])]),(0,l.Wm)(m,{outlined:"",modelValue:r.credentials.website,"onUpdate:modelValue":t[7]||(t[7]=e=>r.credentials.website=e),label:"Website","lazy-rules":""},null,8,["modelValue"]),(0,l.Wm)(m,{outlined:"",modelValue:r.credentials.address,"onUpdate:modelValue":t[8]||(t[8]=e=>r.credentials.address=e),label:"Address","lazy-rules":""},null,8,["modelValue"]),(0,l.Wm)(m,{outlined:"",modelValue:r.credentials.zipCode,"onUpdate:modelValue":t[9]||(t[9]=e=>r.credentials.zipCode=e),label:"Zipcode","lazy-rules":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{loading:r.loading,onClick:d.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var r=i(3617),d=i(9549);const u={components:{VueTelInput:d.VueTelInput},props:["actionType","type","inProfile","body"],data(){return{id:null,phone:"",loading:!1,credentials:{name:"",avatar:null,businessType:"Company",email:"",website:"",address:"",zipCode:"",logo:null,rate:0,clientType:""}}},methods:{phoneValidate(e){isNaN(Number(e.data))&&(this.phone=this.phone.substring(0,this.phone.length-1))},valid(e,t){t.valid?document.querySelector(".vue-tel-input").removeAttribute("style"):document.querySelector(".vue-tel-input").setAttribute("style","border-color:#cc444b !important;")},countryChange(e){let t=0;this.dialCode="+"+e.dialCode,this.phone=this.phone.substring(this.dialCode.length,this.phone.length),0===t&&this.valid("",{valid:!0}),t+=1},...(0,r.nv)("crmStore",["createClient","updateClient","getClients","getOneClient"]),async submit(){if(this.$refs.companyRef.validate(),this.$refs.emailRef.validate(),!this.$refs.companyRef.hasError&&!this.$refs.emailRef.hasError){this.loading=!0;let e=new FormData;e.append("name",this.credentials.name),e.append("logo",this.credentials.logo),e.append("businessType",this.credentials.businessType),e.append("email",this.credentials.email),e.append("website",this.credentials.website),e.append("address",this.credentials.address),e.append("zipCode",this.credentials.zipCode),e.append("rate",this.credentials.rate),"Add"===this.actionType?e.append("clientType",this.type):e.append("clientType",this.credentials.clientType),e.append("phoneNumbers",this.dialCode+this.phone),"Add"===this.actionType?(await this.createClient(e),await this.$emit("updateForInvoice"),this.$q.notify({type:"positive",message:"Client created",color:"positive",position:"top",timeout:"500"})):(e.append("id",Number(this.id)),console.log(e),await this.updateClient(e),this.getClients("Client"),this.$route.params.id&&await this.getOneClient(this.$route.params.id),this.$q.notify({type:"positive",message:"Client updated",color:"positive",position:"top",timeout:"500"})),this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){"Edit"===this.actionType&&(this.id=this.body.id,this.credentials.name=this.body.name,this.credentials.website=this.body.website,this.credentials.businessType=this.body.businessType,this.phone=this.body.phoneNumbers,this.credentials.email=this.body.email,this.credentials.website=this.body.website,this.credentials.address=this.body.address,this.credentials.zipCode=this.body.zipCode,this.credentials.logo=this.body.logo,this.credentials.rate=this.body.rate,this.credentials.clientType=this.body.clientType)}};var p=i(9214),c=i(151),m=i(9570),h=i(3747),b=i(2165),y=i(5589),f=i(4689),g=i(4974),w=i(4554),C=i(201),v=i(8833),q=i(677),V=i(7518),_=i.n(V);u.render=s;const z=u;_()(u,"components",{QLayout:p.Z,QCard:c.Z,QToolbar:m.Z,QToolbarTitle:h.Z,QBtn:b.Z,QCardSection:y.Z,QInput:f.Z,QFile:g.Z,QIcon:w.Z,QBtnToggle:C.Z,QRating:v.Z}),_()(u,"directives",{ClosePopup:q.Z})},6052:(e,t,i)=>{"use strict";i.d(t,{Z:()=>V});i(246);var l=i(3673),o=i(2323);function a(e,t,i,a,n,s){const r=(0,l.up)("q-toolbar-title"),d=(0,l.up)("q-btn"),u=(0,l.up)("q-toolbar"),p=(0,l.up)("q-input"),c=(0,l.up)("q-editor"),m=(0,l.up)("vue-tel-input"),h=(0,l.up)("q-card-section"),b=(0,l.up)("q-card"),y=(0,l.up)("q-layout"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(y,{style:{width:"550px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(i.actionType+" ")+"Contact ",1)])),_:1}),(0,l.wy)((0,l.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[f]])])),_:1}),(0,l.Wm)(h,{class:"q-gutter-sm scroll"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{ref:"nameRef",outlined:"",modelValue:n.contact.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.contact.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write the name"]},null,8,["modelValue","rules"]),(0,l.Wm)(c,{modelValue:n.contact.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.contact.description=e),dense:e.$q.screen.lt.md,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"]),(0,l.Wm)(m,{required:"",onCountryChanged:s.countryChange1,class:"phone-input q-mt-lg",defaultCountry:"iq",onOnInput:s.valid1,onInput:s.phoneValidate1,modelValue:n.phone1,"onUpdate:modelValue":t[2]||(t[2]=e=>n.phone1=e)},null,8,["onCountryChanged","onOnInput","onInput","modelValue"]),(0,l.Wm)(m,{required:"",onCountryChanged:s.countryChange2,class:"phone-input q-mt-lg",defaultCountry:"iq",onOnInput:s.valid2,onInput:s.phoneValidate2,modelValue:n.phone2,"onUpdate:modelValue":t[3]||(t[3]=e=>n.phone2=e)},null,8,["onCountryChanged","onOnInput","onInput","modelValue"]),(0,l.Wm)(p,{class:"q-mt-lg",ref:"emailRef",outlined:"",type:"email",modelValue:n.contact.email,"onUpdate:modelValue":t[4]||(t[4]=e=>n.contact.email=e),label:"E-mail","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type your E-mail"]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{ref:"posRef",outlined:"",modelValue:n.contact.position,"onUpdate:modelValue":t[5]||(t[5]=e=>n.contact.position=e),label:"Position","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write the position"]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{ref:"deptRef",outlined:"",modelValue:n.contact.department,"onUpdate:modelValue":t[6]||(t[6]=e=>n.contact.department=e),label:"Department","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write the department"]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{ref:"statusRef",outlined:"",modelValue:n.contact.status,"onUpdate:modelValue":t[7]||(t[7]=e=>n.contact.status=e),label:"Status","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write status"]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,l.Wm)(u,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{loading:n.loading,onClick:s.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}var n=i(52),s=i.n(n),r=i(3617),d=i(2179),u=i(9549);const p={props:["ccid","clId","actionType","body"],data(){return{error1:!1,error2:!1,phone1:"",phone2:"",dialCode1:"",dialCode2:"",contact:{name:"",description:"description",businessPhoneNumber1:"",businessPhoneNumber2:"",position:"",email:"",department:"",status:""},clientId:Number(this.clId),id:Number(this.ccid),loading:!1}},components:{phone:d.Z,VueTelInput:u.VueTelInput},methods:{phoneValidate1(e){isNaN(Number(e.data))&&(this.phone1=this.phone1.substring(0,this.phone1.length-1))},phoneValidate2(e){isNaN(Number(e.data))&&(this.phone2=this.phone2.substring(0,this.phone2.length-1))},countryChange1(e){let t=0;this.dialCode1="+"+e.dialCode,this.phone1=this.phone1.substring(this.dialCode1.length,this.phone1.length),0===t&&this.valid1("",{valid:!0}),t+=1},countryChange2(e){let t=0;this.dialCode2="+"+e.dialCode,this.phone2=this.phone2.substring(this.dialCode2.length,this.phone2.length),0===t&&this.valid2("",{valid:!0}),t+=1},valid1(e,t){t.valid?document.querySelectorAll(".vue-tel-input")[0].removeAttribute("style"):document.querySelectorAll(".vue-tel-input")[0].setAttribute("style","border-color:#cc444b !important;")},valid2(e,t){t.valid?document.querySelectorAll(".vue-tel-input")[1].removeAttribute("style"):document.querySelectorAll(".vue-tel-input")[1].setAttribute("style","border-color:#cc444b !important;")},...(0,r.nv)("crmStore",["getOneClient"]),async submit(){this.$refs.nameRef.validate(),this.$refs.emailRef.validate(),this.$refs.posRef.validate(),this.$refs.deptRef.validate(),this.$refs.statusRef.validate(),this.$refs.nameRef.hasError||this.$refs.emailRef.hasError||this.$refs.posRef.hasError||this.$refs.deptRef.hasError||this.$refs.statusRef.hasError||(this.error1=!1,this.error2=!1,this.loading=!0,this.contact.businessPhoneNumber1=this.dialCode1+this.phone1,this.contact.businessPhoneNumber2=this.dialCode1+this.phone2,"Add"===this.actionType?await this.create():await this.update(),await this.getOneClient(this.clId),this.loading=!1,this.$emit("closeDialogue"))},async create(){await s().post("https://onconnect-backend-api.herokuapp.com/api/v1/clientContacts/create",{...this.contact,clientId:Number(this.clientId)},{headers:{Authorization:localStorage.getItem("accessToken")}});this.loading=!1,await this.$emit("updateForInvoice"),this.$q.notify({type:"positive",message:"Contact created",color:"positive",position:"top",timeout:"500"})},async update(){await s().post("https://onconnect-backend-api.herokuapp.com/api/v1/clientContacts/update",{...this.contact,id:this.id},{headers:{Authorization:localStorage.getItem("accessToken")}});this.loading=!1,this.$q.notify({type:"positive",message:"Contact updated",color:"positive",position:"top",timeout:"500"})}},async mounted(){"Edit"===this.actionType?(this.contact.name=this.body.name,this.contact.description=this.body.description,this.phone1=this.body.businessPhoneNumber1,this.phone2=this.body.businessPhoneNumber2,this.contact.position=this.body.position,this.contact.email=this.body.email,this.contact.department=this.body.department,this.contact.status=this.body.status):(this.phone1="1",this.phone2="1",this.phone1="",this.phone2="")}};var c=i(9214),m=i(151),h=i(9570),b=i(3747),y=i(2165),f=i(5589),g=i(4689),w=i(9989),C=i(677),v=i(7518),q=i.n(v);p.render=a,p.__scopeId="data-v-cb2f8c96";const V=p;q()(p,"components",{QLayout:c.Z,QCard:m.Z,QToolbar:h.Z,QToolbarTitle:b.Z,QBtn:y.Z,QCardSection:f.Z,QInput:g.Z,QEditor:w.Z}),q()(p,"directives",{ClosePopup:C.Z})},8288:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});i(246);var l=i(3673),o=i(2323),a=i(8880);const n=e=>((0,l.dD)("data-v-0405916c"),e=e(),(0,l.Cn)(),e),s=n((()=>(0,l._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Projects date",-1))),r=n((()=>(0,l._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Project deadline",-1))),d={class:"flex items-center"},u=n((()=>(0,l._)("p",{style:{padding:"0 !important","font-size":"1rem"}},"Rate: ",-1)));function p(e,t,i,n,p,c){const m=(0,l.up)("q-toolbar-title"),h=(0,l.up)("q-btn"),b=(0,l.up)("q-toolbar"),y=(0,l.up)("q-select"),f=(0,l.up)("q-icon"),g=(0,l.up)("q-file"),w=(0,l.up)("Datepicker"),C=(0,l.up)("q-input"),v=(0,l.up)("q-editor"),q=(0,l.up)("q-rating"),V=(0,l.up)("q-card-section"),_=(0,l.up)("q-card"),z=(0,l.up)("q-layout"),W=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(z,{style:{width:"550px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(this.actionType+" ")+"Project ",1)])),_:1}),(0,l.wy)((0,l.Wm)(h,{icon:"close",flat:"",round:"",dense:""},null,512),[[W]])])),_:1}),(0,l.Wm)(V,{class:"q-gutter-md scroll"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{"bg-color":"white",outlined:"",ref:"clientRef",rules:[e=>null!==e||"This field is required"],modelValue:p.client,"onUpdate:modelValue":t[0]||(t[0]=e=>p.client=e),options:p.clientOptions,label:"Choose client",loading:p.isLoaded},null,8,["rules","modelValue","options","loading"]),(0,l.Wm)(y,{ref:"leaderRef",rules:[e=>e&&e.length>0||"This field is required"],"use-chips":"",outlined:"",modelValue:p.leaders,"onUpdate:modelValue":t[1]||(t[1]=e=>p.leaders=e),multiple:"",options:p.leaderOptions,counter:"",hint:"Leaders",label:"Choose leaders",loading:p.isLoaded},null,8,["rules","modelValue","options","loading"]),(0,l.Wm)(y,{ref:"memberRef",rules:[e=>e&&e.length>0||"This field is required"],"use-chips":"",outlined:"",modelValue:p.members,"onUpdate:modelValue":t[2]||(t[2]=e=>p.members=e),multiple:"",options:p.memberOptions,counter:"",hint:"Members",label:"Choose members",loading:p.isLoaded},null,8,["rules","modelValue","options","loading"]),(0,l.wy)((0,l.Wm)(g,{modelValue:p.files,"onUpdate:modelValue":t[3]||(t[3]=e=>p.files=e),label:"Pick file",filled:"",append:"","use-chips":"",clearable:""},{prepend:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"attach_file"})])),_:1},8,["modelValue"]),[[a.F8,"Edit"!==i.actionType]]),(0,l._)("div",null,[s,(0,l.Wm)(w,{modelValue:p.project.plannedStartDate,"onUpdate:modelValue":t[4]||(t[4]=e=>p.project.plannedStartDate=e),showNowButton:""},null,8,["modelValue"])]),(0,l._)("div",null,[r,(0,l.Wm)(w,{class:"q-mt-sm",modelValue:p.project.plannedEndDate,"onUpdate:modelValue":t[5]||(t[5]=e=>p.project.plannedEndDate=e),showNowButton:""},null,8,["modelValue"])]),(0,l.Wm)(C,{ref:"nameRef",rules:[e=>e&&e.length>0||"This field is required"],outlined:"",modelValue:p.project.name,"onUpdate:modelValue":t[6]||(t[6]=e=>p.project.name=e),label:"Name","lazy-rules":""},null,8,["rules","modelValue"]),(0,l.Wm)(v,{modelValue:p.project.description,"onUpdate:modelValue":t[7]||(t[7]=e=>p.project.description=e),dense:e.$q.screen.lt.md,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"]),(0,l.Wm)(C,{ref:"priorityRef",rules:[e=>e&&e.length>0||"This field is required"],outlined:"",modelValue:p.project.priority,"onUpdate:modelValue":t[8]||(t[8]=e=>p.project.priority=e),label:"Priority"},null,8,["rules","modelValue"]),(0,l._)("div",d,[u,(0,l.Wm)(q,{modelValue:p.project.rate,"onUpdate:modelValue":t[9]||(t[9]=e=>p.project.rate=e),size:"2em",class:"q-mb-md q-ml-sm",max:5,color:"primary"},null,8,["modelValue"])])])),_:1})])),_:1}),(0,l.Wm)(b,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{loading:p.loading,onClick:c.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}var c=i(3617),m=i(1082),h=i(4789);const b={components:{Datepicker:h.Z},props:["actionType","body"],data(){return{isLoaded:!1,loading:!1,clientOptions:[],client:null,leaders:[],leaderOptions:[],members:[],memberOptions:[],files:null,project:{name:"",rate:0,priority:"",description:"Description",plannedStartDate:"",plannedEndDate:"",clientId:null,leaders:[],members:[]},id:null}},computed:{...(0,c.rn)("crmStore",["allClients"]),...(0,c.rn)("userStore",["users"])},methods:{...(0,c.nv)("projectStore",["addProject","editProject","getProjects","addFiles"]),...(0,c.nv)("crmStore",["getClients"]),...(0,c.nv)("userStore",["getUsers"]),dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),m.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},async submit(){if(this.$refs.leaderRef.validate(),this.$refs.memberRef.validate(),this.$refs.nameRef.validate(),this.$refs.priorityRef.validate(),this.$refs.clientRef.validate(),!(this.$refs.leaderRef.hasError||this.$refs.memberRef.hasError||this.$refs.nameRef.hasError||this.$refs.priorityRef.hasError||this.$refs.clientRef.hasError)){for(let e=0;e<this.leaders.length;e++)this.project.leaders.push(Number(this.leaders[e].id));for(let e=0;e<this.members.length;e++)this.project.members.push(Number(this.members[e].id));this.project.clientId=Number(this.client.id),this.project.plannedStartDate=m.ZP.formatDate(this.project.plannedStartDate,"YYYY-MM-DD HH:mm"),this.project.plannedEndDate=m.ZP.formatDate(this.project.plannedEndDate,"YYYY-MM-DD HH:mm"),this.loading=!0,"Add"===this.actionType?await this.create():await this.update(),this.loading=!1,this.$emit("closeDialogue")}},async create(){await this.addProject({data:this.project,files:this.files})},async update(){await this.editProject({data:{...this.project,id:Number(this.body.id)}})}},async mounted(){this.isLoaded=!0,await this.getClients(),await this.getUsers();for(let e=0;e<this.allClients.length;e++)"Blacklist"!==this.allClients[e].clientType&&this.clientOptions.push({label:this.allClients[e].name,id:this.allClients[e].id});for(let e=0;e<this.users.length;e++)this.memberOptions.push({label:this.users[e].name,id:this.users[e].id}),this.leaderOptions.push({label:this.users[e].name,id:this.users[e].id});if(this.isLoaded=!1,"Edit"===this.actionType){this.project.name=this.body.name,this.project.description=this.body.description,this.project.priority=this.body.priority,this.project.rate=this.body.rate,this.project.plannedStartDate=this.dateConversion(this.body.plannedStartDate),this.project.plannedEndDate=this.dateConversion(this.body.plannedEndDate),this.client={label:this.body.client.name,id:this.body.client.id};for(let e=0;e<this.body.memberUsers.length;e++)this.members.push({label:this.body.memberUsers[e].name,id:this.body.memberUsers[e].userId});for(let e=0;e<this.body.leaderUsers.length;e++)this.leaders.push({label:this.body.leaderUsers[e].name,id:this.body.leaderUsers[e].userId})}else this.project.plannedStartDate=m.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm"),this.project.plannedEndDate=m.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm")}};var y=i(9214),f=i(151),g=i(9570),w=i(3747),C=i(2165),v=i(5589),q=i(3314),V=i(4974),_=i(4554),z=i(4689),W=i(9989),T=i(8833),Z=i(677),$=i(7518),j=i.n($);b.render=p,b.__scopeId="data-v-0405916c";const S=b;j()(b,"components",{QLayout:y.Z,QCard:f.Z,QToolbar:g.Z,QToolbarTitle:w.Z,QBtn:C.Z,QCardSection:v.Z,QSelect:q.Z,QFile:V.Z,QIcon:_.Z,QInput:z.Z,QEditor:W.Z,QRating:T.Z}),j()(b,"directives",{ClosePopup:Z.Z})},3402:(e,t,i)=>{e.exports=i.p+"img/one_logo_neat.391c3929.png"}}]);