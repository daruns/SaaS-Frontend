"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[469],{4469:(e,t,l)=>{l.r(t),l.d(t,{default:()=>H});var a=l(3673),o=l(2323);const s={class:"flex items-center col-md-6 col-sm-12 q-pb-md avatar"},n=["src"],i={class:"q-ml-md text-h5 text-weight-medium q-pb-sm q-mt-lg q-ma-none"},r={class:"row client-infos col-md-6 col-sm-12 q-pa-md"},d={class:"column col-12"},u={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},p=(0,a._)("p",null,"Username:",-1),m={class:"text-grey"},c={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},h=(0,a._)("p",null,"Phone:",-1),g={class:"text-grey"},f={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},y=(0,a._)("p",null,"E-mail:",-1),w={class:"text-grey"},b={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},v=(0,a._)("p",null,"User type:",-1),q={class:"text-grey"};function x(e,t,l,x,_,C){const V=(0,a.up)("q-skeleton"),k=(0,a.up)("q-btn"),Q=(0,a.up)("q-avatar"),W=(0,a.up)("q-card"),Z=(0,a.up)("modal"),z=(0,a.up)("q-dialog"),U=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(U,{class:"q-pa-md"},{default:(0,a.w5)((()=>[null===e.user?((0,a.wg)(),(0,a.j4)(V,{key:0,class:"custom-skeleton-border",height:"40vh"})):((0,a.wg)(),(0,a.j4)(W,{key:1,class:"row items-center q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{onClick:t[0]||(t[0]=e=>_.dialogue=!0),class:"absolute-top-right q-mt-xs q-mr-xs",flat:"","text-color":"grey",size:"sm",round:"",unelevated:"",icon:"edit",color:"primary"}),(0,a._)("div",s,[(0,a.Wm)(Q,{color:e.user.avatar?"":"primary",size:"120px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.user.avatar},null,8,n)])),_:1},8,["color"]),(0,a._)("div",null,[(0,a._)("p",i,(0,o.zw)(e.user.name),1)])]),(0,a._)("div",r,[(0,a._)("div",d,[(0,a._)("div",u,[p,(0,a._)("p",m,(0,o.zw)(e.user.username),1)]),(0,a._)("div",c,[h,(0,a._)("p",g,(0,o.zw)(e.user.phoneNumber),1)]),(0,a._)("div",f,[y,(0,a._)("p",w,(0,o.zw)(e.user.email),1)]),(0,a._)("div",b,[v,(0,a._)("p",q,(0,o.zw)(e.user.userType),1)])])])])),_:1})),(0,a.Wm)(z,{seamless:"",position:"right",modelValue:_.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>_.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{onCloseDialogue:t[1]||(t[1]=e=>{this.getUser(),_.dialogue=!1}),body:e.user},null,8,["body"])])),_:1},8,["modelValue"])])),_:1})}const _=(0,a.Uk)(" Edit Profile ");function C(e,t,l,o,s,n){const i=(0,a.up)("q-toolbar-title"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-toolbar"),u=(0,a.up)("q-input"),p=(0,a.up)("vue-tel-input"),m=(0,a.up)("q-icon"),c=(0,a.up)("q-file"),h=(0,a.up)("q-card-section"),g=(0,a.up)("q-card"),f=(0,a.up)("q-layout"),y=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(f,{style:{width:"500px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{"max-width":"500px","min-height":"92vh"},flat:"",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15 !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[_])),_:1}),(0,a.wy)((0,a.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[y]])])),_:1}),(0,a.Wm)(h,{class:"q-gutter-sm scroll"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ref:"nameRef",outlined:"",modelValue:s.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the name"]},null,8,["modelValue","rules"]),(0,a.Wm)(p,{required:"",onCountryChanged:n.countryChange,class:"phone-input",defaultCountry:"iq",customValidate:!1,onOnInput:n.valid,onInput:n.phoneValidate,modelValue:s.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>s.phone=e)},null,8,["onCountryChanged","onOnInput","onInput","modelValue"]),(0,a.Wm)(u,{ref:"passRef",outlined:"",modelValue:s.credentials.password,"onUpdate:modelValue":t[2]||(t[2]=e=>s.credentials.password=e),label:"Password",type:"password","lazy-rules":"",class:"q-mt-lg profile-photo-uploader"},null,8,["modelValue"]),(0,a.Wm)(c,{clearable:"",outlined:"",class:"q-mt-lg file-field",modelValue:s.credentials.avatar,"onUpdate:modelValue":t[3]||(t[3]=e=>s.credentials.avatar=e),label:"Profile photo"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"attach_file",accept:".jpg, image/*"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(d,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:s.loading,onClick:n.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var V=l(3617),k=l(9549),Q=l(52),W=l.n(Q);const Z={components:{VueTelInput:k.VueTelInput},props:["body"],data(){return{phone:"",dialCode:"",loading:!1,credentials:{name:"",username:"",email:"",password:"",department:"",avatar:null}}},methods:{phoneValidate(e){isNaN(Number(e.data))&&(this.phone=this.phone.substring(0,this.phone.length-1))},valid(e,t){t.valid?document.querySelector(".vue-tel-input").removeAttribute("style"):document.querySelector(".vue-tel-input").setAttribute("style","border-color:#cc444b !important;")},countryChange(e){let t=0;this.dialCode="+"+e.dialCode,this.phone&&(this.phone=this.phone.substring(this.dialCode.length,this.phone.length)),0===t&&this.valid("",{valid:!0}),t+=1},...(0,V.nv)("example",["editProfile"]),async submit(){if(this.$refs.nameRef.validate(),!this.$refs.nameRef.hasError){this.loading=!0;let t=new FormData;t.append("name",this.credentials.name),t.append("password",this.credentials.password),t.append("avatar",this.credentials.avatar),t.append("phoneNumber",this.dialCode+this.phone);try{await W().post("https://onconnect-backend-api.herokuapp.com/api/v1/auth/editProfile",t,{headers:{Authorization:localStorage.getItem("accessToken")}})}catch(e){console.log(e)}this.$q.notify({type:"positive",message:"User edit successfully",color:"positive",position:"top",timeout:"500"}),this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){this.credentials.username=this.body.username,this.phone=this.body.phoneNumber,this.credentials.name=this.body.name,this.credentials.email=this.body.email,this.credentials.department=this.body.department}};var z=l(9214),U=l(151),P=l(9570),I=l(3747),N=l(2165),T=l(5589),S=l(4689),j=l(4974),A=l(4554),D=l(677),R=l(7518),$=l.n(R);Z.render=C;const E=Z;$()(Z,"components",{QLayout:z.Z,QCard:U.Z,QToolbar:P.Z,QToolbarTitle:I.Z,QBtn:N.Z,QCardSection:T.Z,QInput:S.Z,QFile:j.Z,QIcon:A.Z}),$()(Z,"directives",{ClosePopup:D.Z});const B={data(){return{dialogue:!1,loading:!1}},components:{modal:E},computed:{...(0,V.rn)("example",["user"])},methods:{...(0,V.nv)("example",["getUser"])},async mounted(){await this.getUser()}};var F=l(4379),O=l(4103),L=l(5096),G=l(6778);B.render=x;const H=B;$()(B,"components",{QPage:F.Z,QSkeleton:O.ZP,QCard:U.Z,QBtn:N.Z,QAvatar:L.Z,QDialog:G.Z})}}]);