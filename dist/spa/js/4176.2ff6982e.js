"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[4176],{17103:(e,t,l)=>{l.r(t),l.d(t,{default:()=>cl});var i=l(83673),a=l(62323);const o=(0,i._)("div",{class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},[(0,i._)("div",{class:"text-h4"},"CRM")],-1),s={class:"q-px-md"},n={class:"flex items-center col-md-6 col-sm-12 q-pb-md avatar"},r={class:"q-ml-md text-h5 text-weight-medium q-pb-sm q-mt-lg q-ma-none"},d={class:"text-subtitle2 text-grey q-ml-md q-ma-none"},m={class:"row client-infos col q-pa-md"},u={class:"column col-12"},c={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},p={class:"text-grey flex flex-start full-width"},h={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},f={class:"text-grey flex flex-start full-width"},w={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},g={class:"text-grey flex flex-start full-width"},b={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},y={class:"text-grey flex flex-start full-width"},_={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},x={class:"text-grey flex flex-start full-width"},q={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},v={class:"text-grey flex flex-start full-width"},k={class:"flex items-center col-md-6 col-sm-12 q-pb-md avatar"},W=["src"],C={class:"q-ml-md text-h5 text-weight-medium q-pb-sm q-mt-lg q-ma-none"},D={class:"text-subtitle2 text-grey q-ml-md q-ma-none"},Z={class:"row client-infos col-md-6 col-sm-12 q-pa-md"},Q={class:"column col-12"},z={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},S=(0,i._)("p",null,"Type:",-1),V={class:"text-grey"},U={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},M=(0,i._)("p",null,"Phone:",-1),T={class:"text-grey"},I={class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},P=(0,i._)("p",null,"E-mail:",-1),j={class:"text-grey"},$={key:0,class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},N=(0,i._)("p",null,"Address:",-1),R={class:"text-grey"},A={key:1,class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},L=(0,i._)("p",null,"Zipcode:",-1),Y={class:"text-grey"},H={key:2,class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},E=(0,i._)("p",null,"Website:",-1),O={class:"text-grey"},B={key:3,class:"text-body1 text-weight-medium text-left full-width client-info flex q-gutter-sm"},F=(0,i._)("p",null,"Created By:",-1),K={class:"text-grey"},G={class:"q-mt-lg"};function J(e,t,l,J,X,ee){const te=(0,i.up)("breadcrmps"),le=(0,i.up)("q-avatar"),ie=(0,i.up)("q-skeleton"),ae=(0,i.up)("q-btn"),oe=(0,i.up)("q-card"),se=(0,i.up)("q-tab"),ne=(0,i.up)("q-tabs"),re=(0,i.up)("meetings"),de=(0,i.up)("q-tab-panel"),me=(0,i.up)("contacts"),ue=(0,i.up)("sociallinks"),ce=(0,i.up)("users"),pe=(0,i.up)("projects"),he=(0,i.up)("invoices"),fe=(0,i.up)("quotes"),we=(0,i.up)("q-tab-panels"),ge=(0,i.up)("modal"),be=(0,i.up)("q-dialog"),ye=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(ye,{class:"q-py-none q-my-none"},{default:(0,i.w5)((()=>[o,(0,i.Wm)(te,{class:"q-pa-md full-width",map:X.crumps},null,8,["map"]),(0,i._)("div",s,[X.isloading?((0,i.wg)(),(0,i.j4)(oe,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{class:"row items-center q-pa-md"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(le,{size:"120px","font-size":"52px",color:"grey","text-color":"white",icon:"person"}),(0,i._)("div",null,[(0,i._)("p",r,[(0,i.Wm)(ie,{class:"col"})]),(0,i._)("p",d,[(0,i.Wm)(ie,{class:"col"})]),(0,i.Wm)(ae,{class:"q-ml-md q-mt-md",color:"primary","no-caps":"",label:"Send Message",unelevated:""})])]),(0,i._)("div",m,[(0,i._)("div",u,[(0,i._)("div",c,[(0,i._)("p",p,[(0,i.Wm)(ie,{class:"col"})])]),(0,i._)("div",h,[(0,i._)("p",f,[(0,i.Wm)(ie,{class:"col"})])]),(0,i._)("div",w,[(0,i._)("p",g,[(0,i.Wm)(ie,{class:"col"})])]),(0,i._)("div",b,[(0,i._)("p",y,[(0,i.Wm)(ie,{class:"col"})])]),(0,i._)("div",_,[(0,i._)("p",x,[(0,i.Wm)(ie,{class:"col"})])]),(0,i._)("div",q,[(0,i._)("p",v,[(0,i.Wm)(ie,{class:"col"})])])])])])),_:1})])),_:1})):((0,i.wg)(),(0,i.j4)(oe,{key:1,class:"row items-center q-pa-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{onClick:t[0]||(t[0]=e=>X.dialogue=!0),class:"absolute-top-right q-mt-xs q-mr-xs",flat:"","text-color":"grey",size:"sm",round:"",unelevated:"",icon:"edit",color:"primary"}),(0,i._)("div",k,[e.currentClient.logo?((0,i.wg)(),(0,i.j4)(le,{key:0,size:"120px"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:e.currentClient.logo},null,8,W)])),_:1})):((0,i.wg)(),(0,i.j4)(le,{key:1,size:"120px","font-size":"52px",color:"grey","text-color":"white",icon:"person"})),(0,i._)("div",null,[(0,i._)("p",C,(0,a.zw)(e.currentClient.name),1),(0,i._)("p",D,(0,a.zw)(e.currentClient.businessType),1),(0,i.Wm)(ae,{class:"q-ml-md q-mt-md",color:"primary","no-caps":"",label:"Send Message",unelevated:""})])]),(0,i._)("div",Z,[(0,i._)("div",Q,[(0,i._)("div",z,[S,(0,i._)("p",V,(0,a.zw)(e.currentClient.clientType),1)]),(0,i._)("div",U,[M,(0,i._)("p",T,(0,a.zw)(e.currentClient.phoneNumbers),1)]),(0,i._)("div",I,[P,(0,i._)("p",j,(0,a.zw)(e.currentClient.email),1)]),e.currentClient.address?((0,i.wg)(),(0,i.iD)("div",$,[N,(0,i._)("p",R,(0,a.zw)(e.currentClient.address),1)])):(0,i.kq)("",!0),e.currentClient.zipCode?((0,i.wg)(),(0,i.iD)("div",A,[L,(0,i._)("p",Y,(0,a.zw)(e.currentClient.zipCode),1)])):(0,i.kq)("",!0),e.currentClient.website?((0,i.wg)(),(0,i.iD)("div",H,[E,(0,i._)("p",O,(0,a.zw)(e.currentClient.website),1)])):(0,i.kq)("",!0),e.currentClient.createdBy?((0,i.wg)(),(0,i.iD)("div",B,[F,(0,i._)("p",K,(0,a.zw)(e.currentClient.createdBy),1)])):(0,i.kq)("",!0)])])])),_:1})),(0,i._)("div",G,[(0,i.Wm)(ne,{modelValue:J.tab,"onUpdate:modelValue":t[8]||(t[8]=e=>J.tab=e),class:"text-grey bg-white rounded-borders bordered","active-color":"primary","indicator-color":"primary",align:"justify","no-caps":""},{default:(0,i.w5)((()=>[(0,i.Wm)(se,{name:"meetings",onClick:t[1]||(t[1]=e=>ee.updateTab("meetings")),"no-caps":"",label:"Meetings"}),(0,i.Wm)(se,{name:"contacts",onClick:t[2]||(t[2]=e=>ee.updateTab("contacts")),"no-caps":"",label:"Contact Persons"}),(0,i.Wm)(se,{name:"sociallinks",onClick:t[3]||(t[3]=e=>ee.updateTab("sociallinks")),"no-caps":"",label:"Social links"}),(0,i.Wm)(se,{name:"users",onClick:t[4]||(t[4]=e=>ee.updateTab("users")),"no-caps":"",label:"Users"}),(0,i.Wm)(se,{name:"projects",onClick:t[5]||(t[5]=e=>ee.updateTab("projects")),"no-caps":"",label:"Projects"}),(0,i.Wm)(se,{name:"invoices",onClick:t[6]||(t[6]=e=>ee.updateTab("invoices")),"no-caps":"",label:"Invoices"}),(0,i.Wm)(se,{name:"quotes",onClick:t[7]||(t[7]=e=>ee.updateTab("quotes")),"no-caps":"",label:"Quotes"})])),_:1},8,["modelValue"]),(0,i.Wm)(we,{modelValue:J.tab,"onUpdate:modelValue":t[9]||(t[9]=e=>J.tab=e),animated:""},{default:(0,i.w5)((()=>[(0,i.Wm)(de,{name:"meetings",class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(re)])),_:1}),(0,i.Wm)(de,{name:"contacts"},{default:(0,i.w5)((()=>[(0,i.Wm)(me)])),_:1}),(0,i.Wm)(de,{name:"sociallinks"},{default:(0,i.w5)((()=>[(0,i.Wm)(ue)])),_:1}),(0,i.Wm)(de,{name:"users"},{default:(0,i.w5)((()=>[(0,i.Wm)(ce)])),_:1}),(0,i.Wm)(de,{name:"projects"},{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(pe,{bodyData:null===(t=e.currentClient)||void 0===t?void 0:t.projects},null,8,["bodyData"])]})),_:1}),(0,i.Wm)(de,{name:"invoices"},{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(he,{bodyData:null===(t=e.currentClient)||void 0===t?void 0:t.invoices},null,8,["bodyData"])]})),_:1}),(0,i.Wm)(de,{name:"quotes"},{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(fe,{bodyData:null===(t=e.currentClient)||void 0===t?void 0:t.quotes},null,8,["bodyData"])]})),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(be,{inProfile:!0,seamless:"",position:"right",modelValue:X.dialogue,"onUpdate:modelValue":t[11]||(t[11]=e=>X.dialogue=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(ge,{onCloseDialogue:t[10]||(t[10]=e=>X.dialogue=!1),body:e.currentClient,type:e.currentClient.clientType,actionType:"Edit",id:e.$route.params.id},null,8,["body","type","id"])])),_:1},8,["modelValue"])])])])),_:1})}var X=l(46303);l(90246);const ee={style:{"font-size":"15px",margin:"0 !important"}};function te(e,t,l,o,s,n){const r=(0,i.up)("q-td"),d=(0,i.up)("q-icon"),m=(0,i.up)("q-item-section"),u=(0,i.up)("q-item"),c=(0,i.up)("q-separator"),p=(0,i.up)("q-list"),h=(0,i.up)("q-menu"),f=(0,i.up)("q-btn"),w=(0,i.up)("q-tr"),g=(0,i.up)("q-table"),b=(0,i.up)("modal"),y=(0,i.up)("q-dialog"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(g,{rows:e.clientContacts,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary"},{body:(0,i.w5)((e=>[(0,i.Wm)(w,{class:(0,a.C_)(e.rowIndex%2!==0&&"bg-white"),props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{key:"name",props:e},{default:(0,i.w5)((()=>[(0,i._)("p",ee,(0,a.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"position",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.position),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"businessPhoneNumber1",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.businessPhoneNumber1),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"businessPhoneNumber2",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.businessPhoneNumber2),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"email",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"description",innerHTML:e.row.description,props:e},null,8,["innerHTML","props"]),(0,i.Wm)(r,{key:"department",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.department),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"status",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.status),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"actions",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u,{onClick:t=>n.deleteClientContact({id:e.row.id}),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]]),(0,i.Wm)(c),(0,i.wy)((0,i.Wm)(u,{onClick:t=>n.openModal(e.row,"Edit"),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(f,{onClick:t[0]||(t[0]=t=>n.openModal(e.$route.params.id,"Add")),label:"Create Record","no-caps":"",color:"primary",unelevated:"",rounded:""})])),_:1},8,["rows","columns","loading"]),(0,i.Wm)(y,{seamless:"",position:"right",modelValue:s.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>s.dialogue=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{body:s.body,onCloseDialogue:t[1]||(t[1]=e=>s.dialogue=!1),ccid:s.id,clId:e.$route.params.id,actionType:s.actionType},null,8,["body","ccid","clId","actionType"])])),_:1},8,["modelValue"])])}var le=l(65745),ie=l(93617);const ae={data(){return{body:null,id:null,dialogue:!1,loading:!1,actionType:"",columns:[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`},{name:"position",align:"left",label:"Position",field:"position"},{name:"businessPhoneNumber1",align:"left",label:"Phone number 1",field:"businessPhoneNumber1"},{name:"businessPhoneNumber2",align:"left",label:"Phone number 2",field:"businessPhoneNumber2"},{name:"email",label:"E-Mail",align:"left",field:"email"},{name:"description",label:"Description",align:"left",field:"description"},{name:"department",label:"Department",align:"left",field:"department"},{name:"status",label:"Status",align:"left",field:"status"},{name:"actions",label:"Actions",align:"left",field:"actions"}]}},computed:{...(0,ie.rn)("crmStore",["clientContacts"])},components:{modal:le.Z},methods:{...(0,ie.nv)("crmStore",["getOneClient","deleteContact"]),deleteClientContact(e){this.loading=!0,this.deleteContact({...e,clientId:this.$route.params.id}),this.loading=!1},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"},openModal(e,t){this.id=e.id,this.body=e,this.actionType=t,this.dialogue=!0}},async mounted(){this.loading=!0,await this.getOneClient(this.$route.params.id),this.loading=!1}};var oe=l(57678),se=l(18186),ne=l(83884),re=l(2165),de=l(20811),me=l(27011),ue=l(83414),ce=l(52035),pe=l(24554),he=l(65869),fe=l(46778),we=l(60677),ge=l(7518),be=l.n(ge);ae.render=te;const ye=ae;be()(ae,"components",{QTable:oe.Z,QTr:se.Z,QTd:ne.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QSeparator:he.Z,QDialog:fe.Z}),be()(ae,"directives",{ClosePopup:we.Z});var _e=l(61959);const xe={style:{"font-size":"20px",margin:"0 !important"}};function qe(e,t,l,o,s,n){const r=(0,i.up)("q-td"),d=(0,i.up)("q-icon"),m=(0,i.up)("q-item-section"),u=(0,i.up)("q-item"),c=(0,i.up)("q-separator"),p=(0,i.up)("q-list"),h=(0,i.up)("q-menu"),f=(0,i.up)("q-btn"),w=(0,i.up)("q-tr"),g=(0,i.up)("q-table"),b=(0,i.up)("modal"),y=(0,i.up)("q-dialog"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(g,{rows:e.clientMeetings,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary"},{body:(0,i.w5)((e=>[(0,i.Wm)(w,{class:(0,a.C_)(e.rowIndex%2!==0&&"bg-white"),props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{key:"type",props:e},{default:(0,i.w5)((()=>[(0,i._)("p",xe,(0,a.zw)(e.row.type),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"duration",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.duration),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"serviceRequirements",innerHTML:e.row.serviceRequirements,props:e},null,8,["innerHTML","props"]),(0,i.Wm)(r,{key:"date",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.dateConversion(e.row.date)),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"currentServiceProvider",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.currentServiceProvider),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"nextMeetingDate",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.dateConversion(e.row.nextMeetingDate)),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"actions",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u,{onClick:t=>n.deleteMeeting({id:e.row.id}),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]]),(0,i.Wm)(c),(0,i.wy)((0,i.Wm)(u,{clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onClick:t=>n.openModal(e.row.id,"Edit"),class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"edit",color:"warning",size:"xs"})])),_:2},1032,["onClick"])])),_:2},1536),[[_]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(f,{onClick:t[0]||(t[0]=t=>n.openModal(e.$route.params.id,"Add")),label:"Create Record","no-caps":"",color:"primary",unelevated:"",rounded:""})])),_:1},8,["rows","columns","loading"]),(0,i.Wm)(y,{seamless:"",position:"right",modelValue:s.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>s.dialogue=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{onCloseDialogue:t[1]||(t[1]=e=>s.dialogue=!1),cmid:s.id,clId:e.$route.params.id,actionType:s.actionType},null,8,["cmid","clId","actionType"])])),_:1},8,["modelValue"])])}const ve=e=>((0,i.dD)("data-v-c15d23ec"),e=e(),(0,i.Cn)(),e),ke=ve((()=>(0,i._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Meeting date",-1))),We=ve((()=>(0,i._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Next meeting date",-1)));function Ce(e,t,l,o,s,n){const r=(0,i.up)("q-toolbar-title"),d=(0,i.up)("q-btn"),m=(0,i.up)("q-toolbar"),u=(0,i.up)("q-input"),c=(0,i.up)("Datepicker"),p=(0,i.up)("q-editor"),h=(0,i.up)("q-card-section"),f=(0,i.up)("q-card"),w=(0,i.up)("q-layout"),g=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{style:{width:"500px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(this.actionType+" ")+"Meeting ",1)])),_:1}),(0,i.wy)((0,i.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,i.Wm)(h,{class:"q-gutter-y-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"durRef",outlined:"",type:"number",modelValue:s.meeting.duration,"onUpdate:modelValue":t[0]||(t[0]=e=>s.meeting.duration=e),label:"Duration (Minutes)","lazy-rules":"",rules:[e=>e&&e>0||"Please write duration"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{ref:"typeRef",outlined:"",modelValue:s.meeting.type,"onUpdate:modelValue":t[1]||(t[1]=e=>s.meeting.type=e),label:"Type (Skype, Face to Face....)","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write the type"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{modelValue:s.meeting.serviceRequirements,"onUpdate:modelValue":t[2]||(t[2]=e=>s.meeting.serviceRequirements=e),outlined:"",label:"Requirements",type:"textarea",rules:[e=>e&&e.length>0||"Please write the type"]},null,8,["modelValue","rules"]),(0,i._)("div",null,[ke,(0,i.Wm)(c,{class:"q-mt-sm",modelValue:s.meeting.date,"onUpdate:modelValue":t[3]||(t[3]=e=>s.meeting.date=e),showNowButton:"",autoApply:"",clearable:"",placeholder:"Meeting date"},null,8,["modelValue"])]),(0,i._)("div",null,[We,(0,i.Wm)(c,{minDate:new Date,class:"q-mt-sm",modelValue:s.meeting.nextMeetingDate,"onUpdate:modelValue":t[4]||(t[4]=e=>s.meeting.nextMeetingDate=e),autoApply:"",clearable:"",showNowButton:"",placeholder:"Next meeting date"},null,8,["minDate","modelValue"])]),(0,i.Wm)(p,{modelValue:s.meeting.details,"onUpdate:modelValue":t[5]||(t[5]=e=>s.meeting.details=e),dense:!0,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","toolbar"])])),_:1})])),_:1}),(0,i.Wm)(m,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{loading:s.loading,onClick:n.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}var De=l(30052),Ze=l.n(De),Qe=l(25616),ze=l(94789);const Se={components:{Datepicker:ze.Z},props:["cmid","clId","actionType"],data(){return{date1:!1,time1:!1,meeting:{date:"",nextMeetingDate:"",duration:0,type:"",serviceRequirements:"",details:"details",currentServiceProvider:""},clientId:Number(this.cmid),id:Number(this.cmid),loading:!1}},methods:{...(0,ie.nv)("crmStore",["getClientMeetings"]),async submit(){this.loading=!0,"Add"===this.actionType?await this.create():await this.update(),await this.getClientMeetings(this.clId),this.loading=!1,this.$emit("closeDialogue")},async create(){this.loading=!0,this.meeting.duration=Number(this.meeting.duration);await Ze().post("http://localhost:5050/api/v1/meetings/create",{...this.meeting,clientId:this.clientId},{headers:{Authorization:localStorage.getItem("accessToken")}});this.loading=!1},async update(){console.log(this.meeting.date),this.loading=!0,this.meeting.duration=Number(this.meeting.duration);await Ze().post("http://localhost:5050/api/v1/meetings/update",{...this.meeting,id:this.id},{headers:{Authorization:localStorage.getItem("accessToken")}});this.loading=!1}},async mounted(){if("Edit"===this.actionType){let{data:e}=await Ze().get(`http://localhost:5050/api/v1/meetings/${this.cmid}`,{headers:{Authorization:localStorage.getItem("accessToken")}}),t=e.data;this.meeting.duration=t.duration;let l=new Date(t.date);l.setHours(l.getHours()-3);let i=new Date(t.nextMeetingDate);return i.setHours(i.getHours()-3),this.meeting.date=Qe.ZP.formatDate(l,"YYYY-MM-DD HH:mm"),this.meeting.nextMeetingDate=Qe.ZP.formatDate(i,"YYYY-MM-DD HH:mm"),this.meeting.details=t.details,this.meeting.currentServiceProvider=t.currentServiceProvider,this.meeting.type=t.type,void(this.meeting.serviceRequirements=t.serviceRequirements)}this.meeting.date=Qe.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm"),this.meeting.nextMeetingDate=Qe.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm")}};var Ve=l(19214),Ue=l(10151),Me=l(39570),Te=l(13747),Ie=l(25589),Pe=l(64689),je=l(89989);Se.render=Ce,Se.__scopeId="data-v-c15d23ec";const $e=Se;be()(Se,"components",{QLayout:Ve.Z,QCard:Ue.Z,QToolbar:Me.Z,QToolbarTitle:Te.Z,QBtn:re.Z,QCardSection:Ie.Z,QInput:Pe.Z,QEditor:je.Z}),be()(Se,"directives",{ClosePopup:we.Z});const Ne={data(){return{id:null,dialogue:!1,loading:!1,actionType:"",columns:[{name:"type",required:!0,label:"Type",align:"left",field:e=>e.name,format:e=>`${e}`},{name:"duration",align:"left",label:"Duration",field:"duration"},{name:"serviceRequirements",align:"left",label:"Requirements",field:"serviceRequirements"},{name:"date",align:"left",label:"Date",field:"date"},{name:"currentServiceProvider",label:"Service provider",align:"left",field:"currentServiceProvider"},{name:"nextMeetingDate",label:"Next meeting date",align:"left",field:"nextMeetingDate"},{name:"actions",label:"Actions",align:"left",field:"actions"}]}},components:{modal:$e},computed:{...(0,ie.rn)("crmStore",["clientMeetings"])},methods:{...(0,ie.nv)("crmStore",["getClientMeetings","removeMeeting"]),dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),Qe.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},async deleteMeeting(e){this.loading=!0,await this.removeMeeting({...e,clientId:this.$route.params.id}),this.loading=!1},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"},openModal(e,t){this.id=e,this.actionType=t,this.dialogue=!0}},async mounted(){this.loading=!0,await this.getClientMeetings(this.$route.params.id),this.loading=!1}};Ne.render=qe;const Re=Ne;be()(Ne,"components",{QTable:oe.Z,QTr:se.Z,QTd:ne.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QSeparator:he.Z,QDialog:fe.Z}),be()(Ne,"directives",{ClosePopup:we.Z});const Ae={style:{"font-size":"15px",margin:"0 !important"}};function Le(e,t,l,o,s,n){const r=(0,i.up)("q-td"),d=(0,i.up)("q-icon"),m=(0,i.up)("q-item-section"),u=(0,i.up)("q-item"),c=(0,i.up)("q-separator"),p=(0,i.up)("q-list"),h=(0,i.up)("q-menu"),f=(0,i.up)("q-btn"),w=(0,i.up)("q-tr"),g=(0,i.up)("q-table"),b=(0,i.up)("modal"),y=(0,i.up)("q-dialog"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(g,{rows:e.clientSocialLinks,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary"},{body:(0,i.w5)((e=>[(0,i.Wm)(w,{class:(0,a.C_)(e.rowIndex%2!==0&&"bg-white"),props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{key:"name",props:e},{default:(0,i.w5)((()=>[(0,i._)("p",Ae,(0,a.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"linkAddress",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.linkAddress),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"addressDomain",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.addressDomain),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"status",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.status),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"actions",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u,{onClick:t=>n.deleteSocialLink(e.row.id),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]]),(0,i.Wm)(c),(0,i.wy)((0,i.Wm)(u,{onClick:t=>n.openModal(e.row,"Edit"),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(f,{onClick:t[0]||(t[0]=e=>n.openModal({},"Add")),label:"Create Record","no-caps":"",color:"primary",unelevated:"",rounded:""})])),_:1},8,["rows","columns","loading"]),(0,i.Wm)(y,{seamless:"",position:"right",modelValue:s.prompt,"onUpdate:modelValue":t[2]||(t[2]=e=>s.prompt=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{onCloseDialogue:t[1]||(t[1]=e=>s.prompt=!1),body:s.body,action:s.action},null,8,["body","action"])])),_:1},8,["modelValue"])])}function Ye(e,t,l,o,s,n){const r=(0,i.up)("q-toolbar-title"),d=(0,i.up)("q-btn"),m=(0,i.up)("q-toolbar"),u=(0,i.up)("q-input"),c=(0,i.up)("q-card-section"),p=(0,i.up)("q-card"),h=(0,i.up)("q-layout"),f=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(h,{style:{width:"500px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(l.action+" ")+" Social Link ",1)])),_:1}),(0,i.wy)((0,i.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[f]])])),_:1}),(0,i.Wm)(c,{class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"nameRef",rules:[e=>e&&0===e.length||"This field is required"],outlined:"",modelValue:s.socialMediaLink.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.socialMediaLink.name=e),label:"Name"},null,8,["rules","modelValue"]),(0,i.Wm)(u,{ref:"socialARef",rules:[e=>e&&0===e.length||"This field is required"],outlined:"",modelValue:s.socialMediaLink.addressDomain,"onUpdate:modelValue":t[1]||(t[1]=e=>s.socialMediaLink.addressDomain=e),label:"Domain"},null,8,["rules","modelValue"]),(0,i.Wm)(u,{ref:"socialLRef",rules:[e=>e&&0===e.length||"This field is required"],outlined:"",modelValue:s.socialMediaLink.linkAddress,"onUpdate:modelValue":t[2]||(t[2]=e=>s.socialMediaLink.linkAddress=e),label:"Link address"},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,i.Wm)(m,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{loading:s.loading,onClick:n.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}const He={props:["body","action"],data(){return{clientId:Number(this.$route.params.id),id:null,loading:!1,socialMediaLink:{name:"",addressDomain:"",linkAddress:""}}},methods:{...(0,ie.nv)("crmStore",["addSocial","editSocial"]),async submit(){this.$refs.nameRef.validate(),this.$refs.socialARef.validate(),this.$refs.socialLRef.validate(),this.$refs.nameRef.hasError||this.$refs.socialARef.hasError||this.$refs.socialLRef.hasError||(this.loading=!0,"Add"===this.action?await this.addSocial({...this.socialMediaLink,clientId:this.clientId}):"Edit"===this.action&&await this.editSocial({data:{...this.socialMediaLink,id:this.id},clientId:this.clientId}),this.loading=!1,this.$emit("closeDialogue"))}},mounted(){"Edit"===this.action&&(this.socialMediaLink.name=this.body.name,this.socialMediaLink.addressDomain=this.body.addressDomain,this.socialMediaLink.linkAddress=this.body.linkAddress,this.id=this.body.id)}};He.render=Ye;const Ee=He;be()(He,"components",{QLayout:Ve.Z,QCard:Ue.Z,QToolbar:Me.Z,QToolbarTitle:Te.Z,QBtn:re.Z,QCardSection:Ie.Z,QInput:Pe.Z}),be()(He,"directives",{ClosePopup:we.Z});const Oe={data(){return{prompt:!1,loading:!1,action:"",body:{},columns:[{name:"name",align:"left",label:"Name",field:"name"},{name:"linkAddress",align:"left",label:"Link address",field:"linkAddress"},{name:"addressDomain",label:"Address domain",align:"left",field:"addressDomain"},{name:"status",align:"left",label:"Status",field:"status"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},components:{modal:Ee},computed:{...(0,ie.rn)("crmStore",["clientSocialLinks"])},methods:{...(0,ie.nv)("crmStore",["getOneClient","deleteSocial"]),openModal(e,t){this.body=e,this.action=t,this.prompt=!0},deleteSocialLink(e){this.loading=!0,this.deleteSocial({id:Number(e),clientId:this.$route.params.id}),this.loading=!1},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getOneClient(this.$route.params.id),this.loading=!1}};Oe.render=Le;const Be=Oe;be()(Oe,"components",{QTable:oe.Z,QTr:se.Z,QTd:ne.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QSeparator:he.Z,QDialog:fe.Z}),be()(Oe,"directives",{ClosePopup:we.Z});const Fe={style:{"font-size":"15px",margin:"0 !important"}};function Ke(e,t,l,o,s,n){const r=(0,i.up)("q-td"),d=(0,i.up)("q-icon"),m=(0,i.up)("q-item-section"),u=(0,i.up)("q-item"),c=(0,i.up)("q-list"),p=(0,i.up)("q-menu"),h=(0,i.up)("q-btn"),f=(0,i.up)("q-tr"),w=(0,i.up)("q-table"),g=(0,i.up)("modal"),b=(0,i.up)("q-dialog"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(w,{rows:s.users,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary"},{body:(0,i.w5)((e=>[(0,i.Wm)(f,{class:(0,a.C_)(e.rowIndex%2!==0&&"bg-white"),props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{key:"name",props:e},{default:(0,i.w5)((()=>[(0,i._)("p",Fe,(0,a.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"username",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.username),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"email",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"phoneNumber",props:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.row.phoneNumber),1)])),_:2},1032,["props"]),(0,i.Wm)(r,{key:"actions",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(u,{onClick:t=>n.openModal(e.row,"Edit"),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[y]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(h,{disable:null!==e.currentClient.user,onClick:t[0]||(t[0]=e=>n.openModal({},"Add")),label:"Create Record","no-caps":"",color:"primary",unelevated:"",rounded:""},null,8,["disable"])])),_:1},8,["rows","columns","loading"]),(0,i.Wm)(b,{seamless:"",position:"right",modelValue:s.prompt,"onUpdate:modelValue":t[2]||(t[2]=e=>s.prompt=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{onCloseDialogue:t[1]||(t[1]=e=>{n.getClient(),s.prompt=!1}),body:s.body,action:s.action},null,8,["body","action"])])),_:1},8,["modelValue"])])}function Ge(e,t,l,o,s,n){const r=(0,i.up)("q-toolbar-title"),d=(0,i.up)("q-btn"),m=(0,i.up)("q-toolbar"),u=(0,i.up)("q-input"),c=(0,i.up)("q-card-section"),p=(0,i.up)("q-card"),h=(0,i.up)("q-layout"),f=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(h,{style:{width:"500px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(l.action+" ")+" User ",1)])),_:1}),(0,i.wy)((0,i.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[f]])])),_:1}),(0,i.Wm)(c,{class:"q-gutter-sm scroll"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"nameRef",modelValue:s.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.user.name=e),outlined:"",label:"Name",rules:[e=>e&&e.length>0||"This field is required!"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{ref:"userNameRef",modelValue:s.user.username,"onUpdate:modelValue":t[1]||(t[1]=e=>s.user.username=e),outlined:"",label:"Username",rules:[e=>e&&e.length>0||"This field is required!"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{ref:"emailRef",outlined:"",type:"email",modelValue:s.user.email,"onUpdate:modelValue":t[2]||(t[2]=e=>s.user.email=e),label:"E-mail","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type a valid E-mail"]},null,8,["modelValue","rules"]),"Edit"===l.action?((0,i.wg)(),(0,i.j4)(u,{key:0,ref:"passRef",modelValue:s.user.password,"onUpdate:modelValue":t[3]||(t[3]=e=>s.user.password=e),type:"password",outlined:"",label:"Password",rules:[e=>!e.length||e.length>7||"Password must be at least 8 characters!"]},null,8,["modelValue","rules"])):(0,i.kq)("",!0),"Add"===l.action?((0,i.wg)(),(0,i.j4)(u,{key:1,ref:"passRef",modelValue:s.user.password,"onUpdate:modelValue":t[4]||(t[4]=e=>s.user.password=e),type:"password",outlined:"",label:"Password",rules:[e=>e&&e.length>7||"Password must be at least 8 characters!"]},null,8,["modelValue","rules"])):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i.Wm)(m,{class:"bg-grey-3 submitBtnClass",style:{position:"relative !important",bottom:"0","z-index":"5"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{loading:s.loading,onClick:n.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}const Je={props:["body","action"],data(){return{clientId:Number(this.$route.params.id),id:null,loading:!1,user:{name:"",username:"",email:"",password:""}}},methods:{...(0,ie.nv)("crmStore",["getOneClient"]),async submit(){if(this.$refs.nameRef.validate(),this.$refs.userNameRef.validate(),this.$refs.emailRef.validate(),!(this.$refs.nameRef.hasError||this.$refs.userNameRef.hasError||this.$refs.emailRef.hasError)){if("Add"===this.action){if(this.user.password.length<8)return void this.$refs.passRef.validate();try{this.loading=!0;await Ze().post("http://localhost:5050/api/v1/clients/addUser",{...this.user,id:this.$route.params.id},{headers:{Authorization:localStorage.getItem("accessToken")}})}catch(e){console.log(e.response)}}else{if(""!==this.user.password){if(this.user.password.length<8)return void this.$refs.passRef.validate()}else this.user.password="";this.user.password;this.loading=!0;await Ze().post("http://localhost:5050/api/v1/clients/editUser",{name:this.user.name,username:this.user.username,email:this.user.email,password:""===this.user.password?void 0:this.user.password,id:this.$route.params.id},{headers:{Authorization:localStorage.getItem("accessToken")}})}await this.getOneClient(this.$route.params.id),this.loading=!1,this.$emit("closeDialogue")}}},mounted(){"Edit"===this.action&&(this.user.name=this.body.name,this.user.username=this.body.username,this.user.email=this.body.email,this.user.phoneNumber=this.body.phoneNumber)}};Je.render=Ge;const Xe=Je;be()(Je,"components",{QLayout:Ve.Z,QCard:Ue.Z,QToolbar:Me.Z,QToolbarTitle:Te.Z,QBtn:re.Z,QCardSection:Ie.Z,QInput:Pe.Z}),be()(Je,"directives",{ClosePopup:we.Z});const et={data(){return{prompt:!1,loading:!1,users:[],action:"",body:{},columns:[{name:"name",align:"left",label:"Name",field:"name"},{name:"username",align:"left",label:"Username",field:"username"},{name:"email",align:"left",label:"E-mail",field:"email"},{name:"phoneNumber",label:"Phone number",align:"left",field:"phoneNumber"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},components:{modal:Xe},computed:{...(0,ie.rn)("crmStore",["currentClient"])},methods:{...(0,ie.nv)("crmStore",["getOneClient"]),openModal(e,t){this.body=e,this.action=t,this.prompt=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"},async getClient(){await this.getOneClient(this.$route.params.id),this.currentClient.user&&(this.users=[],this.users.push(this.currentClient.user))}},async mounted(){this.loading=!0,await this.getClient(),this.loading=!1}};et.render=Ke;const tt=et;be()(et,"components",{QTable:oe.Z,QTr:se.Z,QTd:ne.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QDialog:fe.Z}),be()(et,"directives",{ClosePopup:we.Z});var lt=l(93402),it=l.n(lt);const at=e=>((0,i.dD)("data-v-6d59c6ab"),e=e(),(0,i.Cn)(),e),ot={class:"row row1"},st={class:"flex items-start justify-between flex-end q-pa-sm"},nt={class:"text-h6 q-mr-none",style:{"min-width":"80% !important","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"}},rt={style:{"max-width":"100% !important"},class:"flex column justify-start"},dt=at((()=>(0,i._)("p",{class:"text-subtitle2 q-mb-none"},"Deadline:",-1))),mt={class:"text-grey"},ut=at((()=>(0,i._)("p",{class:"text-subtitle2 q-mb-none"},"Priority:",-1))),ct={class:"text-grey"},pt=at((()=>(0,i._)("p",{class:"text-subtitle2 q-mb-sm"},"Project Leader:",-1))),ht={class:"row q-mb-lg"},ft=["src"],wt={key:1,src:it()},gt={key:0,class:"text-subtitle1 q-pt-xs q-ma-none text-grey"},bt=at((()=>(0,i._)("img",{src:it()},null,-1))),yt=at((()=>(0,i._)("p",{class:"text-subtitle2 q-mb-sm"},"Project Team:",-1))),_t={class:"row"},xt=["src"],qt={key:1,src:it()},vt=at((()=>(0,i._)("img",{src:it()},null,-1))),kt={class:"q-pa-md col-12 flex items-center row"},Wt={class:"row flex"};function Ct(e,t,l,o,s,n){const r=(0,i.up)("router-link"),d=(0,i.up)("q-space"),m=(0,i.up)("q-icon"),u=(0,i.up)("q-item-section"),c=(0,i.up)("q-item"),p=(0,i.up)("q-separator"),h=(0,i.up)("q-list"),f=(0,i.up)("q-menu"),w=(0,i.up)("q-btn"),g=(0,i.up)("q-tooltip"),b=(0,i.up)("q-avatar"),y=(0,i.up)("q-item-label"),_=(0,i.up)("q-select"),x=(0,i.up)("q-popup-edit"),q=(0,i.up)("q-card-section"),v=(0,i.up)("q-card"),k=(0,i.up)("modal"),W=(0,i.up)("q-dialog"),C=(0,i.up)("q-page"),D=(0,i.up)("q-skeleton"),Z=(0,i.up)("q-chip"),Q=(0,i.Q2)("close-popup");return s.loading?((0,i.wg)(),(0,i.j4)(C,{key:1,style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"flex justify-between row full-width"},{default:(0,i.w5)((()=>[(0,i._)("div",kt,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(10,(e=>(0,i._)("div",{key:e,class:"q-pa-sm col-3"},[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"col-12 flex column"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"flex items-start justify-between row col-12 1absolute-top-right"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{class:"col-6",style:{height:"20px"}}),(0,i.Wm)(w,{flat:"","no-caps":"","text-color":"grey",icon:"more_vert",round:""})])),_:1}),((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(3,(e=>(0,i.Wm)(c,{class:"q-pa-md",key:e},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{style:{height:"16px"},class:"col-12"})])),_:2},1024))),64))])),_:1}),(0,i._)("div",Wt,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(4,(e=>(0,i.Wm)(c,{class:"q-pa-sm col-2",key:e},{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{size:"20px",color:"grey",round:""})])),_:2},1024))),64))])])),_:1})]))),64))])])),_:1})):((0,i.wg)(),(0,i.j4)(C,{key:0,style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md q-mt-md"},{default:(0,i.w5)((()=>[(0,i._)("div",ot,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.projects,((l,o)=>((0,i.wg)(),(0,i.iD)("div",{key:o,style:{"min-width":"250px"},class:"col-lg-3 col-md-6 col-sm-6 col-xs-12 q-pa-md"},[(0,i.Wm)(v,{flat:"",class:"q-pa-sm",bordered:"",style:{position:"relative !important"}},{default:(0,i.w5)((()=>[(0,i._)("div",st,[(0,i.Wm)(r,{style:{"max-width":"70% !important",color:"black"},to:`/projects/${l.id}`},{default:(0,i.w5)((()=>[(0,i._)("p",nt,(0,a.zw)(l.name),1)])),_:2},1032,["to"]),(0,i.Wm)(d),(0,i.Wm)(w,{class:"",dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(c,{onClick:t=>e.deleteProject({id:l.id}),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[Q]]),(0,i.Wm)(p),(0,i.wy)((0,i.Wm)(c,{onClick:e=>{s.body=l,s.dialogue=!0},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[Q]])])),_:2},1024)])),_:2},1024)])),_:2},1024)]),(0,i.Wm)(q,{class:"q-pa-sm flex justify-start text-overflow"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{to:`/projects/${l.id}`},{default:(0,i.w5)((()=>[(0,i._)("div",rt,[dt,(0,i._)("p",mt,(0,a.zw)(l.plannedEndDate.split("T")[0]),1),ut,(0,i._)("p",ct,(0,a.zw)(l.priority),1),pt,(0,i._)("div",ht,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.leaderUsers.slice(0,2),(t=>((0,i.wg)(),(0,i.iD)("div",{class:"q-mr-xs q-mt-xs q-mb-xs",key:t.id},[(0,i.Wm)(b,{size:"40px"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{onClick:i=>e.deleteProjectLeader({id:l.id,leaders:[t.userId]}),round:"",size:"5px",icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"]),t.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:t.avatar},null,8,ft)):((0,i.wg)(),(0,i.iD)("img",wt)),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.name),1)])),_:2},1024)])),_:2},1024)])))),128)),l.leaderUsers.length>2?((0,i.wg)(),(0,i.iD)("p",gt,"....+"+(0,a.zw)(l.leaderUsers.length-2),1)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,a.C_)(["flex justify-center items-start q-mt-xs",l.leaderUsers.length>2&&"q-ml-xs"])},[(0,i.Wm)(w,{onClick:e=>n.getLeaderOptions(l),round:"",size:"15px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{modelValue:s.leaders,"onUpdate:modelValue":t[1]||(t[1]=e=>s.leaders=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,i.w5)((e=>[(0,i.Wm)(_,{rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:s.leaders,"onUpdate:modelValue":t[0]||(t[0]=e=>s.leaders=e),options:s.options,label:"Choose leaders",disable:0===s.options.length,hint:0===s.options.length?"All users has been added":""},{option:(0,i.w5)((e=>[(0,i.Wm)(c,(0,a.vs)((0,i.F4)(e.itemProps)),{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"avatar-list"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"q-mr-xs",size:"30px"},{default:(0,i.w5)((()=>[bt])),_:1}),(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","disable","hint"]),(0,i.wy)((0,i.Wm)(w,{class:"q-mt-xs q-mb-xs",onClick:e=>n.addProjectLeaders(l.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===s.leaders.length},null,8,["onClick","disable"]),[[Q]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])],2)]),yt,(0,i._)("div",_t,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.memberUsers,(t=>((0,i.wg)(),(0,i.j4)(b,{class:"q-mr-xs",key:t.id,size:"40px"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{onClick:i=>e.deleteProjectMember({id:l.id,members:[t.userId]}),round:"",size:"5px",icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"]),t.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:t.avatar},null,8,xt)):((0,i.wg)(),(0,i.iD)("img",qt)),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.name),1)])),_:2},1024)])),_:2},1024)))),128)),(0,i._)("div",{class:(0,a.C_)(["flex justify-center items-start",l.memberUsers.length>2&&"q-ml-xs"])},[(0,i.Wm)(w,{onClick:e=>n.getUserOptions(l),round:"",size:"15px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{modelValue:s.members,"onUpdate:modelValue":t[3]||(t[3]=e=>s.members=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,i.w5)((e=>[(0,i.Wm)(_,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:s.members,"onUpdate:modelValue":t[2]||(t[2]=e=>s.members=e),options:s.options,label:"Choose members",disable:0===s.options.length,hint:0===s.options.length?"All users has been added":""},{option:(0,i.w5)((e=>[(0,i.Wm)(c,(0,a.vs)((0,i.F4)(e.itemProps)),{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"avatar-list"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"q-mr-xs",size:"30px"},{default:(0,i.w5)((()=>[vt])),_:1}),(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","disable","hint"]),(0,i.wy)((0,i.Wm)(w,{onClick:e=>n.addProjectMembers(l.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===s.members.length},null,8,["onClick","disable"]),[[Q]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])],2)])])])),_:2},1032,["to"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,i.Wm)(W,{seamless:"",position:"right",modelValue:s.dialogue,"onUpdate:modelValue":t[5]||(t[5]=e=>s.dialogue=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{onCloseDialogue:t[4]||(t[4]=e=>s.dialogue=!1),actionType:"Edit",body:s.body},null,8,["body"])])),_:1},8,["modelValue"])])),_:1}))}var Dt=l(98880);const Zt=e=>((0,i.dD)("data-v-5adb31a5"),e=e(),(0,i.Cn)(),e),Qt={class:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-12 q-pa-md"},zt=Zt((()=>(0,i._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Projects date",-1))),St=Zt((()=>(0,i._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Project deadline",-1))),Vt={class:"flex items-center"},Ut=Zt((()=>(0,i._)("p",{style:{padding:"0 !important","font-size":"1rem"}},"Rate: ",-1)));function Mt(e,t,l,o,s,n){const r=(0,i.up)("q-toolbar-title"),d=(0,i.up)("q-btn"),m=(0,i.up)("q-toolbar"),u=(0,i.up)("q-input"),c=(0,i.up)("q-select"),p=(0,i.up)("q-uploader"),h=(0,i.up)("Datepicker"),f=(0,i.up)("q-editor"),w=(0,i.up)("q-rating"),g=(0,i.up)("q-card-section"),b=(0,i.up)("q-card"),y=(0,i.up)("q-layout"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(y,{style:{width:"550px !important"}},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(this.actionType+" ")+"Project ",1)])),_:1}),(0,i.wy)((0,i.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[_]])])),_:1}),(0,i.Wm)(g,{class:"q-gutter-md scroll"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"nameRef",rules:[e=>e&&e.length>0||"This field is required"],outlined:"",modelValue:s.project.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.project.name=e),label:"Name","lazy-rules":""},null,8,["rules","modelValue"]),(0,i.Wm)(c,{"bg-color":"white",outlined:"",ref:"clientRef",rules:[e=>null!==e||"This field is required"],modelValue:s.client,"onUpdate:modelValue":t[1]||(t[1]=e=>s.client=e),options:s.clientOptions,label:"Choose client",loading:s.isLoaded},null,8,["rules","modelValue","options","loading"]),(0,i.Wm)(c,{ref:"leaderRef",rules:[e=>e&&e.length>0||"This field is required"],"use-chips":"",outlined:"",modelValue:s.leaders,"onUpdate:modelValue":t[2]||(t[2]=e=>s.leaders=e),multiple:"",options:s.leaderOptions,counter:"",hint:"Leaders",label:"Choose leaders",loading:s.isLoaded},null,8,["rules","modelValue","options","loading"]),(0,i.Wm)(c,{ref:"memberRef",rules:[e=>e&&e.length>0||"This field is required"],"use-chips":"",outlined:"",modelValue:s.members,"onUpdate:modelValue":t[3]||(t[3]=e=>s.members=e),multiple:"",options:s.memberOptions,counter:"",hint:"Members",label:"Choose members",loading:s.isLoaded},null,8,["rules","modelValue","options","loading"]),(0,i.wy)((0,i._)("div",Qt,[(0,i.wy)((0,i.Wm)(p,{"max-files":"10","max-file-size":"1048576",class:"col-12 fit","max-total-size":"1048576",label:"Add Images",onRemoved:t[4]||(t[4]=e=>{n.saveFiles(e)}),"hide-upload-btn":"",onAdded:t[5]||(t[5]=e=>{n.saveFiles(e)}),multiple:!1},null,512),[[Dt.F8,"Add"===e.action]])],512),[[Dt.F8,"Add"===e.action]]),(0,i._)("div",null,[zt,(0,i.Wm)(h,{modelValue:s.project.plannedStartDate,"onUpdate:modelValue":t[6]||(t[6]=e=>s.project.plannedStartDate=e),showNowButton:""},null,8,["modelValue"])]),(0,i._)("div",null,[St,(0,i.Wm)(h,{class:"q-mt-sm",modelValue:s.project.plannedEndDate,"onUpdate:modelValue":t[7]||(t[7]=e=>s.project.plannedEndDate=e),showNowButton:""},null,8,["modelValue"])]),(0,i.Wm)(f,{modelValue:s.project.description,"onUpdate:modelValue":t[8]||(t[8]=e=>s.project.description=e),dense:!0,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","toolbar"]),(0,i.Wm)(c,{ref:"priorityRef",rules:[e=>e&&e.length>0||"This field is required"],outlined:"",modelValue:s.project.priority,"onUpdate:modelValue":t[9]||(t[9]=e=>s.project.priority=e),options:s.priorityOptions,hint:"Priority",label:"Priority"},null,8,["rules","modelValue","options"]),(0,i._)("div",Vt,[Ut,(0,i.Wm)(w,{modelValue:s.project.rate,"onUpdate:modelValue":t[10]||(t[10]=e=>s.project.rate=e),size:"2em",class:"q-mb-md q-ml-sm",max:5,color:"primary"},null,8,["modelValue"])])])),_:1})])),_:1}),(0,i.Wm)(m,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{loading:s.loading,onClick:n.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}const Tt={components:{Datepicker:ze.Z},props:["actionType","body"],data(){return{isLoaded:!1,loading:!1,clientOptions:[],client:null,leaders:[],leaderOptions:[],priorityOptions:["High","Medium","Low"],members:[],memberOptions:[],files:null,project:{name:"",rate:0,priority:"Low",description:"Description",plannedStartDate:"",plannedEndDate:"",clientId:null,leaders:[],members:[]},id:null}},computed:{...(0,ie.rn)("crmStore",["allClients"]),...(0,ie.rn)("userStore",["users"])},methods:{...(0,ie.nv)("projectStore",["addProject","editProject","getProjects","addFiles"]),...(0,ie.nv)("crmStore",["getClients"]),...(0,ie.nv)("userStore",["getUsers"]),saveFiles(e){this.file=e[0]},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),Qe.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},async submit(){if(this.$refs.leaderRef.validate(),this.$refs.memberRef.validate(),this.$refs.nameRef.validate(),this.$refs.priorityRef.validate(),this.$refs.clientRef.validate(),!(this.$refs.leaderRef.hasError||this.$refs.memberRef.hasError||this.$refs.nameRef.hasError||this.$refs.priorityRef.hasError||this.$refs.clientRef.hasError)){for(let e=0;e<this.leaders.length;e++)this.project.leaders.push(Number(this.leaders[e].id));for(let e=0;e<this.members.length;e++)this.project.members.push(Number(this.members[e].id));this.project.clientId=Number(this.client.id),this.project.plannedStartDate=Qe.ZP.formatDate(this.project.plannedStartDate,"YYYY-MM-DD HH:mm"),this.project.plannedEndDate=Qe.ZP.formatDate(this.project.plannedEndDate,"YYYY-MM-DD HH:mm"),this.loading=!0,"Add"===this.actionType?await this.create():await this.update(),this.loading=!1,this.$emit("closeDialogue")}},async create(){await this.addProject({data:this.project,files:this.files})},async update(){await this.editProject({data:{...this.project,id:Number(this.body.id)}})}},async mounted(){this.isLoaded=!0,await this.getClients(),await this.getUsers();for(let e=0;e<this.allClients.length;e++)"Blacklist"!==this.allClients[e].clientType&&this.clientOptions.push({label:this.allClients[e].name,id:this.allClients[e].id});for(let e=0;e<this.users.length;e++)this.memberOptions.push({label:this.users[e].name,id:this.users[e].id}),this.leaderOptions.push({label:this.users[e].name,id:this.users[e].id});if(this.isLoaded=!1,"Edit"===this.actionType){this.project.name=this.body.name,this.project.description=this.body.description,this.project.priority=this.body.priority,this.project.rate=this.body.rate,this.project.plannedStartDate=this.dateConversion(this.body.plannedStartDate),this.project.plannedEndDate=this.dateConversion(this.body.plannedEndDate),this.client={label:this.body.client.name,id:this.body.client.id};for(let e=0;e<this.body.memberUsers.length;e++)this.members.push({label:this.body.memberUsers[e].name,id:this.body.memberUsers[e].userId});for(let e=0;e<this.body.leaderUsers.length;e++)this.leaders.push({label:this.body.leaderUsers[e].name,id:this.body.leaderUsers[e].userId})}else this.project.plannedStartDate=Qe.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm"),this.project.plannedEndDate=Qe.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm")}};var It=l(63314),Pt=l(568),jt=l(98833);Tt.render=Mt,Tt.__scopeId="data-v-5adb31a5";const $t=Tt;be()(Tt,"components",{QLayout:Ve.Z,QCard:Ue.Z,QToolbar:Me.Z,QToolbarTitle:Te.Z,QBtn:re.Z,QCardSection:Ie.Z,QInput:Pe.Z,QSelect:It.Z,QUploader:Pt.Z,QEditor:je.Z,QRating:jt.Z}),be()(Tt,"directives",{ClosePopup:we.Z});const Nt={computed:{...(0,ie.rn)("userStore",["users"])},components:{modal:$t},props:["bodyData"],data(){return{projects:[],loading:!1,dialogue:!1,id:"",body:{},options:[],members:[],leaders:[]}},methods:{...(0,ie.nv)("projectStore",["deleteProject","addProjectMember","deleteProjectMember","addProjectLeader","deleteProjectLeader"]),...(0,ie.nv)("userStore",["getUsers"]),async addProjectMembers(e){let t=[];for(let l=0;l<this.members.length;l++)t.push(this.members[l].id);await this.addProjectMember({id:e,members:t}),this.members=[]},async addProjectLeaders(e){let t=[];for(let l=0;l<this.leaders.length;l++)t.push(this.leaders[l].id);await this.addProjectLeader({id:e,leaders:t}),this.leaders=[]},getUserOptions(e){let t=[],l=[];this.options=[],setTimeout((()=>{if(e){for(let i=0;i<this.users.length;i++){for(let t=0;t<e.memberUsers.length;t++)Number(e.memberUsers[t].userId)===Number(this.users[i].id)&&l.push({id:this.users[i].id,label:this.users[t].name});t.push({id:this.users[i].id,label:this.users[i].name})}this.options=t.filter((({id:e})=>!l.some((({id:t})=>t===e))))}}),200)},getLeaderOptions(e){let t=[],l=[];this.options=[],setTimeout((()=>{if(e){for(let i=0;i<this.users.length;i++){for(let t=0;t<e.leaderUsers.length;t++)Number(e.leaderUsers[t].userId)===Number(this.users[i].id)&&l.push({id:this.users[i].id,label:this.users[t].name});t.push({id:this.users[i].id,label:this.users[i].name})}this.options=t.filter((({id:e})=>!l.some((({id:t})=>t===e))))}}),200)}},async mounted(){var e;this.loading=!0,await this.getUsers(),console.log('projects"""""""""""""""""""""',this.bodyData),this.projects=(null===(e=this.bodyData)||void 0===e?void 0:e.map((e=>e)))||[],this.loading=!1}};var Rt=l(24379),At=l(62025),Lt=l(75096),Yt=l(5363),Ht=l(61289),Et=l(2350),Ot=l(54103),Bt=l(67030);Nt.render=Ct,Nt.__scopeId="data-v-6d59c6ab";const Ft=Nt;be()(Nt,"components",{QPage:Rt.Z,QCard:Ue.Z,QSpace:At.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QSeparator:he.Z,QCardSection:Ie.Z,QAvatar:Lt.Z,QTooltip:Yt.Z,QPopupEdit:Ht.Z,QSelect:It.Z,QItemLabel:Et.Z,QDialog:fe.Z,QSkeleton:Ot.ZP,QChip:Bt.Z}),be()(Nt,"directives",{ClosePopup:we.Z});const Kt={class:"text-h6",style:{"font-size":"15px",margin:"0 !important"}};function Gt(e,t,l,o,s,n){const r=(0,i.up)("router-link"),d=(0,i.up)("q-td"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-icon"),c=(0,i.up)("q-item-section"),p=(0,i.up)("q-item"),h=(0,i.up)("q-separator"),f=(0,i.up)("q-list"),w=(0,i.up)("q-menu"),g=(0,i.up)("q-tr"),b=(0,i.up)("q-table"),y=(0,i.up)("modal"),_=(0,i.up)("q-dialog"),x=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(b,{rows:s.invoicesShow,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,i.w5)((t=>[(0,i.Wm)(g,{class:(0,a.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{key:"invoiceNumber",props:t},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{style:{color:"black"},to:`/finance/invoice/${t.row.id}`},{default:(0,i.w5)((()=>[(0,i._)("p",Kt,(0,a.zw)(t.row.invoiceNumber),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"name",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.row.client.name),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"createdAt",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.dateConversion(t.row.createdAt)),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"dueDate",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.dateConversion(t.row.dueDate)),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"status",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.row.status),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"totalAmount",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.total(t.row)),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"actions",props:t},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{to:`/finance/invoice/${t.row.id}`},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{dense:"","text-color":"dark",round:"",flat:"",icon:"visibility"})])),_:2},1032,["to"]),(0,i.Wm)(m,{disable:"Paid"===t.row.status,dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(p,{onClick:l=>e.deleteInvoice(t.row.id),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[x]]),(0,i.Wm)(h),(0,i.wy)((0,i.Wm)(p,{onClick:e=>n.edit(t.row),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[x]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["disable"])])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,i.Wm)(_,{seamless:"",position:"right",modelValue:s.prompt,"onUpdate:modelValue":t[1]||(t[1]=e=>s.prompt=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{onCloseDialogue:t[0]||(t[0]=e=>s.prompt=!1),action:s.action,body:s.body},null,8,["action","body"])])),_:1},8,["modelValue"])])}var Jt=l(80395);const Xt={data(){return{invoicesShow:[],prompt:!1,loading:!1,action:"",body:{},columns:[{name:"invoiceNumber",align:"left",label:"Invoice number",field:"invoiceNumber"},{name:"name",align:"left",label:"client",field:"name"},{name:"createdAt",align:"left",label:"Purchased at",field:"createdAt"},{name:"dueDate",align:"left",label:"Due date",field:"dueDate"},{name:"status",align:"left",label:"Status",field:"status"},{name:"totalAmount",align:"left",label:"Total amount",field:"totalAmount"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},computed:{},components:{modal:Jt.Z},props:["bodyData"],methods:{total(e){let t=0,l=0,i=0;for(let a=0;a<e.invoiceItems.length;a++)t+=Number(e.invoiceItems[a].qty)*Number(e.invoiceItems[a].unitPrice);return l=Number(e.discount)*t,i=Number(e.taxRate)*t,t=t+i-l,Math.round(t)},...(0,ie.nv)("financeStore",["getInvoices","deleteInvoice"]),rowColor(e){if(e.rowIndex%2!==0)return"background: #fff;"},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),Qe.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},edit(e){this.body=e,this.action="Edit",this.prompt=!0}},async mounted(){var e;await this.getInvoices(),this.invoicesShow=(null===(e=this.bodyData)||void 0===e?void 0:e.map((e=>e)))||[]}};Xt.render=Gt;const el=Xt;be()(Xt,"components",{QTable:oe.Z,QTr:se.Z,QTd:ne.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QSeparator:he.Z,QDialog:fe.Z}),be()(Xt,"directives",{ClosePopup:we.Z});const tl={class:"text-h6",style:{"font-size":"15px",margin:"0 !important"}};function ll(e,t,l,o,s,n){const r=(0,i.up)("router-link"),d=(0,i.up)("q-td"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-icon"),c=(0,i.up)("q-item-section"),p=(0,i.up)("q-item"),h=(0,i.up)("q-separator"),f=(0,i.up)("q-list"),w=(0,i.up)("q-menu"),g=(0,i.up)("q-tr"),b=(0,i.up)("q-table"),y=(0,i.up)("modal"),_=(0,i.up)("q-dialog"),x=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(b,{rows:s.invoicesShow,columns:s.columns,"row-key":"id",loading:s.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,i.w5)((t=>[(0,i.Wm)(g,{class:(0,a.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{key:"quoteNumber",props:t},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{style:{color:"black"},to:`/finance/quote/${t.row.id}`},{default:(0,i.w5)((()=>[(0,i._)("p",tl,(0,a.zw)(t.row.quoteNumber),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"name",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.row.client.name),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"createdAt",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.dateConversion(t.row.createdAt)),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"dueDate",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.dateConversion(t.row.dueDate)),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"status",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(t.row.status),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"totalAmount",props:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,a.zw)(n.total(t.row)),1)])),_:2},1032,["props"]),(0,i.Wm)(d,{key:"actions",props:t},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{to:`/finance/quote/${t.row.id}`},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{dense:"","text-color":"dark",round:"",flat:"",icon:"visibility"})])),_:2},1032,["to"]),(0,i.Wm)(m,{disable:"Paid"===t.row.status,dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"min-width":"75px"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(p,{onClick:l=>e.deleteQuote(t.row.id),style:{},clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[x]]),(0,i.Wm)(h),(0,i.wy)((0,i.Wm)(p,{onClick:e=>n.edit(t.row),clickable:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"flex flex-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[x]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["disable"])])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,i.Wm)(_,{seamless:"",position:"right",modelValue:s.prompt,"onUpdate:modelValue":t[1]||(t[1]=e=>s.prompt=e),persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{onCloseDialogue:t[0]||(t[0]=e=>s.prompt=!1),action:s.action,body:s.body},null,8,["action","body"])])),_:1},8,["modelValue"])])}var il=l(30112);const al={data(){return{invoicesShow:[],prompt:!1,loading:!1,action:"",body:{},columns:[{name:"quoteNumber",align:"left",label:"Quote number",field:"quoteNumber"},{name:"name",align:"left",label:"client",field:"name"},{name:"createdAt",align:"left",label:"Purchased at",field:"createdAt"},{name:"dueDate",align:"left",label:"Due date",field:"dueDate"},{name:"status",align:"left",label:"Status",field:"status"},{name:"totalAmount",align:"left",label:"Total amount",field:"totalAmount"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},computed:{},components:{modal:il.Z},props:["bodyData"],methods:{total(e){let t=0,l=0,i=0;for(let a=0;a<e.quoteItems.length;a++)t+=Number(e.quoteItems[a].qty)*Number(e.quoteItems[a].unitPrice);return l=Number(e.discount)*t,i=Number(e.taxRate)*t,t=t+i-l,Math.round(t)},...(0,ie.nv)("financeStore",["deleteQuote"]),rowColor(e){if(e.rowIndex%2!==0)return"background: #fff;"},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),Qe.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},edit(e){this.body=e,this.action="Edit",this.prompt=!0}},async mounted(){var e;console.log("bodyData---- ",this.bodyData),this.invoicesShow=(null===(e=this.bodyData)||void 0===e?void 0:e.map((e=>e)))||[]}};al.render=ll;const ol=al;be()(al,"components",{QTable:oe.Z,QTr:se.Z,QTd:ne.Z,QBtn:re.Z,QMenu:de.Z,QList:me.Z,QItem:ue.Z,QItemSection:ce.Z,QIcon:pe.Z,QSeparator:he.Z,QDialog:fe.Z}),be()(al,"directives",{ClosePopup:we.Z});var sl=l(99834);const nl={components:{meetings:Re,breadcrmps:X.Z,sociallinks:Be,contacts:ye,modal:sl.Z,users:tt,projects:Ft,invoices:el,quotes:ol},data(){return{dialogue:!1,close:!1,isloading:(0,_e.iH)(!1),crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"CRM",icon:"groups",path:"/crm"}],user:{name:"",username:"",password:""}}},computed:{...(0,ie.rn)("crmStore",["currentClient"])},methods:{...(0,ie.nv)("crmStore",["getOneClient"]),updateTab(e){localStorage.setItem("tab",e)},async submit(){if(this.$refs.nameRef.validate(),this.$refs.userNameRef.validate(),!this.$refs.nameRef.hasError&&!this.$refs.userNameRef.hasError){if(this.close=!0,this.currentClient.user){let e=await Ze().post("http://localhost:5050/api/v1/clients/editUser",{...this.user,id:this.$route.params.id},{headers:{Authorization:localStorage.getItem("accessToken")}});console.log(e)}else try{await Ze().post("http://localhost:5050/api/v1/clients/addUser",{...this.user,id:this.$route.params.id},{headers:{Authorization:localStorage.getItem("accessToken")}})}catch(e){console.log(e.response)}await this.getOneClient(this.$route.params.id)}}},async mounted(){this.isloading=!0,await this.getOneClient(this.$route.params.id),this.isloading=!1,this.currentClient.user&&(this.user.name=this.currentClient.user.name,this.user.username=this.currentClient.user.username,this.user.password=this.currentClient.user.password)},setup(){return{tab:(0,_e.iH)(localStorage.getItem("tab")?localStorage.getItem("tab"):"meetings")}}};var rl=l(57547),dl=l(3269),ml=l(5906),ul=l(86602);nl.render=J;const cl=nl;be()(nl,"components",{QPage:Rt.Z,QCard:Ue.Z,QSkeleton:Ot.ZP,QAvatar:Lt.Z,QBtn:re.Z,QTabs:rl.Z,QTab:dl.Z,QTabPanels:ml.Z,QTabPanel:ul.Z,QDialog:fe.Z})}}]);