"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[4094],{24094:(l,e,a)=>{a.r(e),a.d(e,{default:()=>R});var t=a(83673),o=a(62323);const n=l=>((0,t.dD)("data-v-5f82bd0d"),l=l(),(0,t.Cn)(),l),i=n((()=>(0,t._)("div",{class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},[(0,t._)("div",{class:"text-h4"},"Payslip")],-1))),s={class:"q-px-md"},r={class:"row justify-between"},d={key:0,class:"column col-lg-6 col-md-6 col-sm-12 col-xs-12 q-gutter-lg"},u=["src"],c={class:"column"},v={class:"text-h6"},m={class:"text-subtitle2"},p={class:"text-subtitle2 text-grey"},y={class:"text-subtitle2 text-grey"},b={class:"column col-lg-6 col-md-6 col-xs-12 col-sm-12 items-end"},h={key:0,class:"text-subtitle2"},f={style:{"justify-content":"start !important"},class:"row q-mt-xl"},g={class:"column"},w=n((()=>(0,t._)("p",null,"Payslip to:",-1))),_={class:"text-bold"},P={class:"q-mt-xl row"},D=n((()=>(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{class:"text-left"},"Earnings")])],-1))),x=n((()=>(0,t._)("td",{class:"text-left"},"Basic Salary",-1))),T={class:"text-left"},k={class:"text-left"},S={class:"text-left"},q=n((()=>(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{class:"text-left"},"Deductions")])],-1))),z={class:"text-left"},$={class:"text-left"},L={class:"row q-mt-xl"},N=n((()=>(0,t._)("div",{class:"col-9"},null,-1))),U={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12 column q-gutter-sm"};function j(l,e,a,n,j,C){const F=(0,t.up)("q-spinner"),V=(0,t.up)("q-page"),W=(0,t.up)("q-avatar"),B=(0,t.up)("DownloadPDFButton"),E=(0,t.up)("q-markup-table"),A=(0,t.up)("q-input"),Z=(0,t.up)("q-card");return j.isLoaded?((0,t.wg)(),(0,t.j4)(V,{key:0,class:"flex flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{color:"primary",size:"md"})])),_:1})):((0,t.wg)(),(0,t.j4)(V,{key:1,class:"q-py-none q-my-none"},{default:(0,t.w5)((()=>[i,(0,t._)("div",s,[(0,t.Wm)(Z,{class:"q-pa-lg"},{default:(0,t.w5)((()=>{var a,n,i,s,F,V,Z,Q,I,O,R,J,H,K;return[(0,t._)("div",r,[l.user?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(W,{square:"",size:"100px","font-size":"52px"},{default:(0,t.w5)((()=>{var e;return[(0,t._)("img",{src:null===(e=l.user.brand)||void 0===e?void 0:e.logo},null,8,u)]})),_:1}),(0,t._)("div",c,[(0,t._)("p",v,(0,o.zw)(null===(a=l.user)||void 0===a||null===(n=a.brand)||void 0===n?void 0:n.name),1),(0,t._)("p",m,(0,o.zw)(null===(i=l.user)||void 0===i||null===(s=i.brand)||void 0===s?void 0:s.email),1),(0,t._)("p",p,(0,o.zw)(null===(F=l.user)||void 0===F||null===(V=F.brand)||void 0===V?void 0:V.phoneNumber),1),(0,t._)("p",y,(0,o.zw)(null===(Z=l.user)||void 0===Z||null===(Q=Z.brand)||void 0===Q?void 0:Q.address),1)])])):(0,t.kq)("",!0),(0,t._)("div",b,[(0,t._)("p",null,[(0,t.Wm)(B,{body:C.getJSPDFProps()},null,8,["body"])]),null!==(I=l.currentPayslip)&&void 0!==I&&I.fromDate?((0,t.wg)(),(0,t.iD)("p",h,"Payslip Date: "+(0,o.zw)(C.dateConversion(null===(O=l.currentPayslip)||void 0===O?void 0:O.fromDate)),1)):(0,t.kq)("",!0)])]),(0,t._)("div",f,[(0,t._)("div",g,[w,(0,t._)("p",_,(0,o.zw)(null===(R=l.currentPayslip)||void 0===R||null===(J=R.employee)||void 0===J?void 0:J.name),1),(0,t._)("p",null,(0,o.zw)(null===(H=l.currentPayslip)||void 0===H||null===(K=H.employee)||void 0===K?void 0:K.email),1)])]),(0,t._)("div",P,[(0,t.Wm)(E,{class:"col-6",flat:"",bordered:""},{default:(0,t.w5)((()=>[D,(0,t._)("tbody",null,[(0,t._)("tr",null,[x,(0,t._)("td",T,(0,o.zw)(l.currentPayslip.basicSalary),1)]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.currentPayslip.payslipEarnings,((l,e)=>((0,t.wg)(),(0,t.iD)("tr",{style:(0,o.j5)(C.rowColor(e)),key:e},[(0,t._)("td",k,(0,o.zw)(null===l||void 0===l?void 0:l.name),1),(0,t._)("td",S,(0,o.zw)(null===l||void 0===l?void 0:l.amount),1)],4)))),128))])])),_:1}),(0,t.Wm)(E,{class:"col-6",flat:"",bordered:""},{default:(0,t.w5)((()=>[q,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.currentPayslip.payslipDeductions,((l,e)=>((0,t.wg)(),(0,t.iD)("tr",{style:(0,o.j5)(C.rowColor(e)),key:e},[(0,t._)("td",z,(0,o.zw)(l.name),1),(0,t._)("td",$,(0,o.zw)(l.amount),1)],4)))),128))])])),_:1})]),(0,t._)("div",L,[N,(0,t._)("div",U,[(0,t.Wm)(A,{mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",readonly:"",modelValue:j.deductionTotal,"onUpdate:modelValue":e[0]||(e[0]=l=>j.deductionTotal=l),label:"Deductions Total"},null,8,["modelValue"]),(0,t.Wm)(A,{mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",readonly:"",modelValue:j.earningTotal,"onUpdate:modelValue":e[1]||(e[1]=l=>j.earningTotal=l),label:"Earnings Total"},null,8,["modelValue"]),(0,t.Wm)(A,{mask:"#","fill-mask":"0","reverse-fill-mask":"",readonly:"","model-value":"Number",modelValue:j.netSalary,"onUpdate:modelValue":e[2]||(e[2]=l=>j.netSalary=l),label:"Net Salary"},null,8,["modelValue"])])])]})),_:1})])])),_:1}))}a(10071),a(17965),a(66016);var C=a(93617),F=a(6942);const V={components:{DownloadPDFButton:F.Z},data(){return{jsPDFInvoiceTemplate:null,isLoaded:!1,netSalary:0,pdfTableArr:[],earningTotal:0,deductionTotal:0}},computed:{...(0,C.rn)("payrollStore",["currentPayslip"]),...(0,C.rn)("example",["user"])},methods:{...(0,C.nv)("payrollStore",["getOnePayslip"]),...(0,C.nv)("example",["getUser"]),downloadFile(l,e){const a=document.createElement("a");a.href=URL.createObjectURL(l),a.download=e,document.body.append(a),a.click(),a.remove(),setTimeout((()=>URL.revokeObjectURL(a.href)),7e3)},dateConversion(l){return console.log(l)," "+(null===l||void 0===l?void 0:l.split("T")[0])},finalArrayForTablePdf(l,e){let a=[],t={name:"",val:[]},o={name:"",val:[]};l.length>=e.length?(t.val=l,t.name="earnings",o.name="deductions",o.val=e):(t.val=e,t.name="deductions",o.name="earnings",o.val=l);for(let n in t.val)"deductions"===t.name?a.push([o.val[n]?o.val[n].name:"",o.val[n]?o.val[n].amount:"",t.val[n].name,t.val[n].amount]):a.push([t.val[n].name,t.val[n].amount,o.val[n]?o.val[n].name:"",o.val[n]?o.val[n].amount:""]);return a},getJSPDFProps(){var l,e,a,t,o,n,i,s,r,d,u,c,v,m,p,y,b,h,f,g,w,_,P,D;return{outputType:"save",returnJsPDFDocObject:!0,fileName:"Payslip.pdf",orientationLandscape:!1,compress:!0,logo:{src:`http://localhost:5050/api/v1/readAsStream/?key=${null===(l=this.user)||void 0===l||null===(e=l.brand)||void 0===e?void 0:e.logo}`,type:null,width:26.66,height:26.66,margin:{top:0,left:0}},business:{name:`${null===(a=this.user)||void 0===a||null===(t=a.brand)||void 0===t?void 0:t.name}`,address:`${null===(o=this.user)||void 0===o||null===(n=o.brand)||void 0===n?void 0:n.address}`,phone:`${null===(i=this.user)||void 0===i||null===(s=i.brand)||void 0===s?void 0:s.phoneNumber}`,email:`${null===(r=this.user)||void 0===r||null===(d=r.brand)||void 0===d?void 0:d.email}`,email_1:"",website:`${null===(u=this.user)||void 0===u||null===(c=u.brand)||void 0===c?void 0:c.website}`},contact:{label:"Payslip issued for:",name:`${null===(v=this.currentPayslip)||void 0===v||null===(m=v.employee)||void 0===m?void 0:m.name}`,address:`${null===(p=this.currentPayslip)||void 0===p||null===(y=p.employee)||void 0===y||null===(b=y.user)||void 0===b?void 0:b.email}`,phone:`${null===(h=this.currentPayslip)||void 0===h||null===(f=h.employee)||void 0===f||null===(g=f.user)||void 0===g?void 0:g.phoneNumber}`,email:`${null===(w=this.currentPayslip)||void 0===w||null===(_=w.employee)||void 0===_||null===(P=_.user)||void 0===P?void 0:P.email}`},invoice:{label:"Invoice #: ",num:0,invDate:"Payment Date: 01/01/2021 18:12",invGenDate:"Invoice Date: 02/02/2021 10:17",headerBorder:!1,tableBodyBorder:!1,header:[{title:"Earnings",style:{width:70}},{title:"amount",style:{width:20}},{title:"Deductions",style:{width:70}},{title:"amount",style:{width:20}}],table:this.pdfTableArr,invSubTotalLabel:"Basic Salary:",invSubTotal:`${null===(D=this.currentPayslip)||void 0===D?void 0:D.basicSalary}`,invTotalLabel:"Net Salary:",invTotal:`${this.netSalary}`,invCurrency:"USD",row1:{col1:"Total Earnings:",col2:`${this.earningTotal}`,col3:"USD",style:{fontFamily:"serif",fontSize:10}},row2:{col1:"Total Deductions:",col2:`${this.deductionTotal}`,col3:"USD",style:{fontSize:10}},invDescLabel:"",invDesc:""},footer:{text:""},pageEnable:!0,pageLabel:"page "}},rowColor(l){if(l%2===0)return"background: #f2f2f2 !important;"}},async mounted(){var l,e,a;this.isLoaded=!0,await this.getUser(),await this.getOnePayslip(this.$route.params.id),this.netSalary=Number(this.currentPayslip.netSalary);for(let n of this.currentPayslip.payslipDeductions)this.earningTotal+=Number(n.amount);for(let n of this.currentPayslip.payslipDeductions)this.deductionTotal+=Number(n.amount);let t=[{name:"Basic Salary",amount:null===(l=this.currentPayslip)||void 0===l?void 0:l.basicSalary}].concat(null===(e=this.currentPayslip)||void 0===e?void 0:e.payslipEarnings),o=null===(a=this.currentPayslip)||void 0===a?void 0:a.payslipDeductions;this.pdfTableArr=this.finalArrayForTablePdf(t,o),this.isLoaded=!1}};var W=a(24379),B=a(6833),E=a(10151),A=a(75096),Z=a(30481),Q=a(64689),I=a(7518),O=a.n(I);V.render=j,V.__scopeId="data-v-5f82bd0d";const R=V;O()(V,"components",{QPage:W.Z,QSpinner:B.Z,QCard:E.Z,QAvatar:A.Z,QMarkupTable:Z.Z,QInput:Q.Z})}}]);