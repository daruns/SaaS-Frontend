"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[181],{10181:(e,t,l)=>{l.r(t),l.d(t,{default:()=>rt});var a=l(83673),o=l(62323),s=l(93402),i=l.n(s);const r=e=>((0,a.dD)("data-v-5db50650"),e=e(),(0,a.Cn)(),e),d={class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},n=r((()=>(0,a._)("div",{class:"text-h4"},"Tasks",-1))),c={class:"flex items-center"},m={class:"q-mb-none text-white"},u={style:{height:"auto"}},p={class:"bg-white relative-position q-pa-sm q-mb-xs q-ml-xs q-mr-xs rounded-borders",style:{border:"0.25px solid lightgrey"}},h={class:"flex row items-center justify-between"},b=["onClick"],f=["onClick"],g=["onClick"],w={class:"row flex flex-reverse"},y={class:"flex"},k=["src"],x={key:1,src:i()},v={class:"flex items-start q-mt-xs q-ml-xs"},_=["src"],q={key:1,src:i()},W={class:"full-width row flex"};function C(e,t,l,s,i,r){const C=(0,a.up)("q-btn"),D=(0,a.up)("q-icon"),Z=(0,a.up)("q-item-section"),j=(0,a.up)("q-item"),V=(0,a.up)("q-separator"),S=(0,a.up)("q-list"),Q=(0,a.up)("q-menu"),U=(0,a.up)("q-chip"),z=(0,a.up)("q-img"),I=(0,a.up)("q-badge"),A=(0,a.up)("q-avatar"),B=(0,a.up)("q-item-label"),T=(0,a.up)("q-select"),M=(0,a.up)("q-popup-edit"),Y=(0,a.up)("draggable"),R=(0,a.up)("q-scroll-area"),E=(0,a.up)("q-markup-table"),H=(0,a.up)("q-spinner"),P=(0,a.up)("q-page"),L=(0,a.up)("modal"),$=(0,a.up)("q-dialog"),N=(0,a.up)("modalt"),O=(0,a.up)("task",!0),F=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(P,{style:{"overflow-x":"hidden !important"}},{default:(0,a.w5)((()=>[(0,a._)("div",d,[n,(0,a._)("div",c,[(0,a.Wm)(C,{onClick:t[0]||(t[0]=e=>{this.action="Add",i.dialogue=!0}),color:"primary",label:"Create Board",unelevated:"",rounded:"","no-caps":""})])]),i.isLoaded?((0,a.wg)(),(0,a.j4)(P,{key:1,class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(H)])),_:1})):((0,a.wg)(),(0,a.j4)(R,{key:0,class:"q-px-md","thumb-style":i.thumbStyle,"bar-style":i.barStyle,style:{height:"70vh",width:"100% !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{class:"flex q-mt-md tasks-table bg-secondary",flat:""},{default:(0,a.w5)((()=>[(0,a._)("thead",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.columns,(e=>((0,a.wg)(),(0,a.iD)("th",{class:"paddingRid",key:e.id},[(0,a._)("div",{style:(0,o.j5)([{"border-radius":"6px !important"},`background-color: ${e.boardAttribute.color}`]),class:"q-pa-sm q-ma-none flex items-center justify-between"},[(0,a._)("div",m,(0,o.zw)(e.name),1),(0,a.Wm)(C,{color:"white",dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{style:{"min-width":"75px"}},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(j,{onClick:t=>r.delBoard(e.id),style:{},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[F]]),(0,a.Wm)(V),(0,a.wy)((0,a.Wm)(j,{onClick:t=>{i.body=e,i.action="Edit",i.dialogue=!0},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[F]])])),_:2},1024)])),_:2},1024)])),_:2},1024)],4)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.columns,(e=>((0,a.wg)(),(0,a.iD)("td",{key:e.id,class:"bg-grey-4 q-mr-sm",round:"",style:"width:265px; height:auto "},[(0,a.Wm)(R,{"thumb-style":i.thumbStyle1,"bar-style":i.barStyle1,style:{height:"50vh",width:"265px"}},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a.Wm)(Y,{style:{height:"49vh"},tag:"div",class:"q-mt-sm",clone:r.clone,group:{name:"people",pull:r.pullFunction},onStart:r.start,"component-data":{tag:"div"},onChange:r.change,list:e.tasks,onClone:r.clone,"item-key":"id"},{item:(0,a.w5)((({element:l})=>[(0,a._)("div",p,[(0,a._)("div",h,[(0,a._)("p",{onClick:e=>{i.taskBody=l,i.taskDialogue=!0},class:"column col-12 q-mb-none cursor-pointer",style:{width:"50% !important",overflow:"hidden !important","text-overflow":"ellipsis !important"}},[(0,a.Uk)((0,o.zw)(l.name)+" ",1),(0,a.Wm)(U,{square:"",style:{height:"6px",width:"100px"},class:(0,o.C_)(r.priority(l.priority)+" q-px-none q-mx-none"),size:"xs"},null,8,["class"])],8,b),(0,a.Wm)(C,{dense:"",round:"",flat:"",color:"grey",icon:"edit"},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{style:{"min-width":"75px"}},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(j,{onClick:e=>r.delTask({id:l.id}),style:{},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[F]]),(0,a.Wm)(V),(0,a.wy)((0,a.Wm)(j,{onClick:t=>r.openDialogue(l,e.id),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[F]])])),_:2},1024)])),_:2},1024)])),_:2},1024)]),l&&l.attachments&&l.attachments.length>0?((0,a.wg)(),(0,a.j4)(Z,{key:0,onClick:e=>{i.taskBody=l,i.taskDialogue=!0},clickable:"",class:"col-12 q-my-sm flex flex-center items-center cursor-pointer"},{default:(0,a.w5)((()=>{var e;return[(0,a.Wm)(z,{src:null===(e=l.attachments[0])||void 0===e?void 0:e.url},null,8,["src"])]})),_:2},1032,["onClick"])):(0,a.kq)("",!0),(0,a._)("p",{class:"q-mt-none text-grey cursor-pointer",onClick:e=>{i.taskBody=l,i.taskDialogue=!0},clickable:"",style:{overflow:"hidden !important","text-overflow":"ellipsis","word-break":"break-all !important",width:"229px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","flex-direction":"row","max-width":"229px!important"}},[(0,a.Wm)(D,{name:"subject",size:"sm"})],8,f),(0,a._)("div",{class:"q-py-md cursor-pointer",onClick:e=>{i.taskBody=l,i.taskDialogue=!0},clickable:""},[(0,a.Wm)(D,{color:"grey",size:"sm",name:"insert_invitation"}),(0,a.Wm)(I,{color:"green",size:"xs"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(r.convertDate(l.plannedEndDate)),1)])),_:2},1024)],8,g),(0,a._)("div",w,[(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.memberUsers,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"flex-end q-mr-xs q-mt-xs q-mb-xs",key:e.id},[(0,a.Wm)(A,{size:"40px"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{round:"",size:"5px",onClick:t=>r.delMember({id:l.id,members:[e.userId]}),icon:"close",color:"negative",class:"absolute-top-right"},null,8,["onClick"]),e.avatar?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.avatar},null,8,k)):((0,a.wg)(),(0,a.iD)("img",x))])),_:2},1024)])))),128))]),(0,a._)("div",v,[(0,a.Wm)(C,{onClick:e=>r.getUserOptions(l),round:"",size:"11px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{modelValue:i.members,"onUpdate:modelValue":t[2]||(t[2]=e=>i.members=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,a.w5)((e=>[(0,a.Wm)(T,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:i.members,"onUpdate:modelValue":t[1]||(t[1]=e=>i.members=e),options:i.options,label:"Choose members",loading:i.isLoaded,disable:0===i.options.length,hint:0===i.options.length?"All users has been added":""},{option:(0,a.w5)((e=>[(0,a.Wm)(j,(0,o.vs)((0,a.F4)(e.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{class:"avatar-list"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"q-mr-xs",size:"30px"},{default:(0,a.w5)((()=>[e.opt.avatar?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.opt.avatar},null,8,_)):((0,a.wg)(),(0,a.iD)("img",q))])),_:2},1024),(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","loading","disable","hint"]),(0,a.wy)((0,a.Wm)(C,{onClick:e=>r.addMembs(l.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===i.members.length},null,8,["onClick","disable"]),[[F]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])])])])])),_:2},1032,["clone","group","onStart","onChange","list","onClone"])])])),_:2},1032,["thumb-style","bar-style"]),(0,a._)("div",W,[(0,a.Wm)(C,{icon:"add","text-color":"grey",label:"Add new task...",class:"text-left col",onClick:t=>{i.bId=e.id,i.allBoards=i.columns,i.actiont="Add",i.dialoguet=!0},unelevated:"","no-caps":""},null,8,["onClick"])])])))),128))])])),_:1})])),_:1},8,["thumb-style","bar-style"])),(0,a.Wm)($,{seamless:"",position:"right",modelValue:i.dialogue,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{onCloseDialogue:r.getAll,action:i.action,body:i.body},null,8,["onCloseDialogue","action","body"])])),_:1},8,["modelValue"]),(0,a.Wm)($,{seamless:"",position:"right",modelValue:i.dialoguet,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dialoguet=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{onCloseDialogue:r.getAll,action:i.actiont,boardId:i.bId,body:i.bodyt,allBoards:i.allBoards},null,8,["onCloseDialogue","action","boardId","body","allBoards"])])),_:1},8,["modelValue"]),(0,a.Wm)($,{modelValue:i.taskDialogue,"onUpdate:modelValue":t[5]||(t[5]=e=>i.taskDialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{task:i.taskBody},null,8,["task"])])),_:1},8,["modelValue"])])),_:1})}l(90246);var D=l(93617),Z=l(46303),j=l(40470),V=l.n(j),S=l(11488),Q=l.n(S),U=l(30052),z=l.n(U);const I=e=>((0,a.dD)("data-v-cf5d618c"),e=e(),(0,a.Cn)(),e),A={class:"column qu-gutter-sm"},B={class:"flex items-center justify-start"},T=I((()=>(0,a._)("i",{class:"fas fa-square q-pr-sm",style:{"font-size":"25px",color:"#308be5"}},null,-1))),M={class:"flex items-center justify-start"},Y=I((()=>(0,a._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#1d1d1d"}},null,-1))),R={class:"flex items-center justify-start"},E=I((()=>(0,a._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#82b865"}},null,-1))),H={class:"flex items-center justify-start"},P=I((()=>(0,a._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#cc444b"}},null,-1))),L={class:"flex items-center justify-start"},$=I((()=>(0,a._)("i",{class:"fas fa-square",style:{"font-size":"25px",color:"#ffae30"}},null,-1)));function N(e,t,l,s,i,r){const d=(0,a.up)("q-toolbar-title"),n=(0,a.up)("q-btn"),c=(0,a.up)("q-toolbar"),m=(0,a.up)("q-input"),u=(0,a.up)("q-radio"),p=(0,a.up)("q-popup-proxy"),h=(0,a.up)("q-card-section"),b=(0,a.up)("q-card"),f=(0,a.up)("q-layout"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(f,{style:{width:"550px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.action+" ")+" Board ",1)])),_:1}),(0,a.wy)((0,a.Wm)(n,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,a.Wm)(h,{class:"q-gutter-md scroll"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"nameRef",rules:[e=>e&&0!==e.length||"This field is required"],outlined:"",modelValue:i.board.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.board.name=e),label:"Name"},null,8,["rules","modelValue"]),(0,a.Wm)(m,{label:"Board color",readonly:"",outlined:"",modelValue:i.board.color,"onUpdate:modelValue":t[6]||(t[6]=e=>i.board.color=e),ref:"colorRef",rules:[e=>e&&0!==e.length||"This field is required"]},{append:(0,a.w5)((()=>[(0,a._)("i",{class:"fas fa-square",style:(0,o.j5)([`color: ${i.board.color}`,{"font-size":"25px"}])},null,4)])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"pop",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a._)("div",A,[(0,a._)("div",B,[(0,a.Wm)(u,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[1]||(t[1]=e=>i.board.color=e),val:"#308be5"},null,8,["modelValue"]),T]),(0,a._)("div",M,[(0,a.Wm)(u,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[2]||(t[2]=e=>i.board.color=e),val:"#1d1d1d"},null,8,["modelValue"]),Y]),(0,a._)("div",R,[(0,a.Wm)(u,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[3]||(t[3]=e=>i.board.color=e),val:"#82b865"},null,8,["modelValue"]),E]),(0,a._)("div",H,[(0,a.Wm)(u,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[4]||(t[4]=e=>i.board.color=e),val:"#cc444b"},null,8,["modelValue"]),P]),(0,a._)("div",L,[(0,a.Wm)(u,{size:"sm",modelValue:i.board.color,"onUpdate:modelValue":t[5]||(t[5]=e=>i.board.color=e),val:"#ffae30"},null,8,["modelValue"]),$])])])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})])),_:1}),(0,a.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{loading:i.loading,onClick:r.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}const O={props:["body","action"],data(){return{id:null,loading:!1,board:{name:"",color:"#308be5",position:0}}},methods:{...(0,D.nv)("projectStore",["addBoard","editBoard"]),async submit(){this.$refs.nameRef.validate(),this.$refs.colorRef.validate(),this.$refs.nameRef.hasError||this.$refs.colorRef.hasError||(this.loading=!0,this.board.position=Number(this.board.position),"Add"===this.action?await this.addBoard(this.board):"Edit"===this.action&&await this.editBoard({...this.board,id:this.id}),this.loading=!1,this.$emit("closeDialogue"))}},mounted(){"Edit"===this.action&&(this.board.name=this.body.name,this.board.color=this.body.boardAttribute.color,this.id=this.body.id)}};var F=l(19214),K=l(10151),G=l(39570),J=l(13747),X=l(2165),ee=l(25589),te=l(64689),le=l(83944),ae=l(77991),oe=l(24554),se=l(77134),ie=l(60677),re=l(7518),de=l.n(re);O.render=N,O.__scopeId="data-v-cf5d618c";const ne=O;de()(O,"components",{QLayout:F.Z,QCard:K.Z,QToolbar:G.Z,QToolbarTitle:J.Z,QBtn:X.Z,QCardSection:ee.Z,QInput:te.Z,QPopupProxy:le.Z,QRadio:ae.Z,QIcon:oe.Z,QColor:se.Z}),de()(O,"directives",{ClosePopup:ie.Z});var ce=l(98880);const me=e=>((0,a.dD)("data-v-92fad886"),e=e(),(0,a.Cn)(),e),ue={class:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"},pe={class:"col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"},he=me((()=>(0,a._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Start date",-1))),be=me((()=>(0,a._)("div",{class:"q-ma-none absolute q-ml-sm text-grey-7",style:{"z-index":"10","font-size":"12px","line-height":"20px","font-weight":"400"}},"Task deadline",-1))),fe=me((()=>(0,a._)("div",null,null,-1)));function ge(e,t,l,s,i,r){const d=(0,a.up)("q-toolbar-title"),n=(0,a.up)("q-btn"),c=(0,a.up)("q-toolbar"),m=(0,a.up)("q-img"),u=(0,a.up)("q-card-actions"),p=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),b=(0,a.up)("q-uploader"),f=(0,a.up)("q-input"),g=(0,a.up)("q-select"),w=(0,a.up)("q-item-label"),y=(0,a.up)("q-item-section"),k=(0,a.up)("q-item"),x=(0,a.up)("Datepicker"),v=(0,a.up)("q-editor"),_=(0,a.up)("q-layout"),q=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(_,{style:{width:"550px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.action+" ")+"Task ",1)])),_:1}),(0,a.wy)((0,a.Wm)(n,{icon:"close",flat:"",round:"",dense:""},null,512),[[q]])])),_:1}),(0,a.Wm)(p,{class:"q-gutter-md scroll"},{default:(0,a.w5)((()=>{var s;return[(0,a._)("div",ue,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(null===(s=l.body)||void 0===s?void 0:s.attachments,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(h,{key:e,class:"my-card",flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{horizontal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"col",src:null===e||void 0===e?void 0:e.url},null,8,["src"]),(0,a.Wm)(u,{vertical:"",class:"justify-around q-px-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{flat:"",round:"",color:"red",icon:"favorite"}),(0,a.Wm)(n,{flat:"",round:"",color:"accent",icon:"bookmark"}),(0,a.Wm)(n,{flat:"",round:"",color:"primary",icon:"share"})])),_:1})])),_:2},1024)])),_:2},1536)),[[ce.F8,"Edit"===l.action]]))),128))]),(0,a._)("div",pe,[(0,a.Wm)(b,{"max-files":"5","max-file-size":"1048576",class:"col-12 fit","max-total-size":"1048576",label:"Add Images",onRemoved:t[0]||(t[0]=e=>{r.saveFiles(e)}),"hide-upload-btn":"",onAdded:t[1]||(t[1]=e=>{r.saveFiles(e)}),multiple:!0})]),(0,a.Wm)(f,{ref:"nameRef",rules:[e=>e&&e.length>0||"This field is required"],outlined:"",modelValue:i.task.name,"onUpdate:modelValue":t[2]||(t[2]=e=>i.task.name=e),label:"Name","lazy-rules":""},null,8,["rules","modelValue"]),(0,a.Wm)(g,{ref:"priorityRef",clearable:"",modelValue:i.task.priority,"onUpdate:modelValue":t[3]||(t[3]=e=>i.task.priority=e),options:["High","Medium","Low"],outlined:"",label:"Priority",rules:[e=>e&&e.length>0||"This field is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(g,{ref:"projectRef",outlined:"",modelValue:i.project,"onUpdate:modelValue":t[4]||(t[4]=e=>i.project=e),options:i.projectOptions,label:"Assign to a project",loading:i.isLoaded,clearable:""},{option:(0,a.w5)((e=>[(0,a.Wm)(k,(0,a.dG)({onClick:t=>null!==i.project&&e.opt.id!==i.project.id?r.updateProjectOptions(e):""},e.itemProps),{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040,["onClick"])])),_:1},8,["modelValue","options","loading"]),(0,a.Wm)(g,{modelValue:i.boardIdSec,"onUpdate:modelValue":t[5]||(t[5]=e=>i.boardIdSec=e),options:l.allBoards,"option-label":"name","option-value":"id",outlined:"",label:"Move to"},null,8,["modelValue","options"]),(0,a.Wm)(g,{ref:"memberRef",rules:[e=>e&&e.length>0||"This field is required"],"use-chips":"",outlined:"",modelValue:i.members,"onUpdate:modelValue":t[6]||(t[6]=e=>i.members=e),multiple:"",options:i.memberOptions,counter:"",hint:"Members",label:"Choose members",loading:i.isLoaded,clearable:""},null,8,["rules","modelValue","options","loading"]),(0,a._)("div",null,[he,(0,a.Wm)(x,{modelValue:i.task.plannedStartDate,"onUpdate:modelValue":t[7]||(t[7]=e=>i.task.plannedStartDate=e),showNowButton:""},null,8,["modelValue"])]),(0,a._)("div",null,[be,(0,a.Wm)(x,{class:"q-mt-sm",modelValue:i.task.plannedEndDate,"onUpdate:modelValue":t[8]||(t[8]=e=>i.task.plannedEndDate=e),showNowButton:""},null,8,["modelValue"])]),fe,(0,a.Wm)(v,{modelValue:i.task.description,"onUpdate:modelValue":t[9]||(t[9]=e=>i.task.description=e),dense:!0,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","toolbar"])]})),_:1})])),_:1}),(0,a.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{loading:i.loading,onClick:r.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])),_:1})])),_:1})}var we=l(25616),ye=(l(3544),l(94789));const ke={components:{Datepicker:ye.Z},props:["action","body","boardId","allBoards"],data(){return{isLoaded:!1,loading:!1,boardIdSec:null,files:[],projectOptions:[],client:null,project:null,members:[],memberOptions:[],task:{name:"",priority:"",description:"Description",plannedStartDate:"",plannedEndDate:"",members:[],boardId:null},id:null}},computed:{...(0,D.rn)("userStore",["users"]),...(0,D.rn)("projectStore",["projects"])},methods:{...(0,D.nv)("projectStore",["addProject","editProject","getProjects","addTask","editTask","addTaskFiles"]),...(0,D.nv)("crmStore",["getClients"]),...(0,D.nv)("userStore",["getUsers"]),saveFiles(e){this.files=e},updateProjectOptions(e){let t=[],l=[];this.memberOptions=[],this.members=[];for(let o=0;o<this.projects.length;o++)if(e.opt.id===this.projects[o].id){for(let e=0;e<this.projects[o].leaderUsers.length;e++)l.push({id:this.projects[o].leaderUsers[e].userId,label:this.projects[o].leaderUsers[e].name});for(let e=0;e<this.projects[o].memberUsers.length;e++)t.push({id:this.projects[o].memberUsers[e].userId,label:this.projects[o].memberUsers[e].name})}var a=l.concat(t);this.memberOptions=a.reduce(((e,t)=>(e.some((e=>e.label===t.label&&e.id===t.id))||e.push(t),e)),[])},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),we.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},async submit(){if(this.$refs.memberRef.validate(),this.$refs.nameRef.validate(),this.$refs.priorityRef.validate(),!(this.$refs.memberRef.hasError||this.$refs.nameRef.hasError||this.$refs.priorityRef.hasError)){this.loading=!0;for(let e=0;e<this.members.length;e++)this.task.members.push(Number(this.members[e].id));console.log("boardId: ",this.boardIdSec.id,"endddddd"),this.task.boardId=Number(this.boardIdSec.id),this.task.files=this.files,this.task.plannedStartDate=we.ZP.formatDate(this.task.plannedStartDate,"YYYY-MM-DD HH:mm"),this.task.plannedEndDate=we.ZP.formatDate(this.task.plannedEndDate,"YYYY-MM-DD HH:mm"),"Add"===this.action?await this.create():(console.log("task: ",this.task),await this.update()),this.loading=!1,this.$emit("closeDialogue")}},async create(){await this.addTask({data:this.task,files:this.files})},async update(){await this.editTask({...this.task,id:Number(this.body.id)})}},async mounted(){if("Edit"===this.action){this.boardIdSec=this.body.boardId,this.task.name=this.body.name,this.task.description=this.body.description,this.task.priority=this.body.priority,this.task.boardId=this.body.boardId,this.task.plannedStartDate=this.dateConversion(this.body.plannedStartDate),this.task.plannedEndDate=this.dateConversion(this.body.plannedEndDate),this.body.project&&(this.project={label:this.body.project.name,id:this.body.project.id});for(let e=0;e<this.body.memberUsers.length;e++)this.members.push({label:this.body.memberUsers[e].name,id:this.body.memberUsers[e].userId})}else this.boardIdSec=this.allBoards.find((e=>e.id===this.boardId)),this.task.plannedStartDate=we.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm"),this.task.plannedEndDate=we.ZP.formatDate(new Date,"YYYY-MM-DD HH:mm");this.isLoaded=!0,await this.getUsers(),await this.getProjects();for(let e=0;e<this.users.length;e++)this.memberOptions.push({label:this.users[e].name,id:this.users[e].id});for(let e=0;e<this.projects.length;e++)this.projectOptions.push({label:this.projects[e].name,id:this.projects[e].id,leaders:this.projects[e].leaderUsers,members:this.projects[e].memberUsers});this.isLoaded=!1}};var xe=l(24027),ve=l(99367),_e=l(568),qe=l(63314),We=l(83414),Ce=l(52035),De=l(2350),Ze=l(89989);ke.render=ge,ke.__scopeId="data-v-92fad886";const je=ke;de()(ke,"components",{QLayout:F.Z,QCard:K.Z,QToolbar:G.Z,QToolbarTitle:J.Z,QBtn:X.Z,QCardSection:ee.Z,QImg:xe.Z,QCardActions:ve.Z,QUploader:_e.Z,QInput:te.Z,QSelect:qe.Z,QItem:We.Z,QItemSection:Ce.Z,QItemLabel:De.Z,QEditor:Ze.Z}),de()(ke,"directives",{ClosePopup:ie.Z});const Ve={class:"row flex q-py-sm col-6"},Se={class:"row flex q-py-sm col-6"},Qe={class:"col-6"},Ue=(0,a.Uk)("Priority: "),ze={class:"text-caption text-grey-7 q-ma-none"},Ie={class:"flex"},Ae=["src"],Be={key:1,src:i()},Te={class:"text-caption text-grey-7"},Me={class:"row flex col-12"};function Ye(e,t,l,s,i,r){const d=(0,a.up)("q-item"),n=(0,a.up)("q-btn"),c=(0,a.up)("q-card-actions"),m=(0,a.up)("q-separator"),u=(0,a.up)("q-chip"),p=(0,a.up)("q-avatar"),h=(0,a.up)("q-card-section"),b=(0,a.up)("q-carousel-slide"),f=(0,a.up)("q-carousel"),g=(0,a.up)("q-card"),w=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(g,{class:"fit",style:{"max-width":"700px","min-width":"300px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"col-12"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"col flex row justify-between",align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-h6 q-pb-sm"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.task.name),1)])),_:1}),(0,a.wy)((0,a.Wm)(n,{color:"negative",flat:"",label:"Close"},null,512),[[w]])])),_:1}),(0,a.Wm)(m),(0,a.Wm)(h,{class:"q-py-md row wrap flex col-6"},{default:(0,a.w5)((()=>[(0,a._)("div",Ve,[(0,a.Wm)(u,{class:"q-px-md","text-color":"white",color:"green"},{default:(0,a.w5)((()=>[(0,a.Uk)("Start date: "+(0,o.zw)(r.dateConversion(l.task.plannedEndDate)),1)])),_:1})]),(0,a._)("div",Se,[(0,a.Wm)(u,{class:"q-px-md","text-color":"white",color:"red"},{default:(0,a.w5)((()=>[(0,a.Uk)("Deadline: "+(0,o.zw)(r.dateConversion(l.task.plannedStartDate)),1)])),_:1})]),(0,a._)("div",Qe,[Ue,(0,a.Wm)(u,{class:(0,o.C_)([r.priority(l.task.priority),"q-ma-none"]),"no-caps":"",color:r.priority(l.task.priority)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.task.priority),1)])),_:1},8,["class","color"])]),(0,a.wy)((0,a._)("p",ze,"Assigned users:",512),[[ce.F8,0!==l.task.memberUsers.length]]),(0,a._)("div",Ie,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.task.memberUsers,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{size:"md",avatar:""},{default:(0,a.w5)((()=>[e.avatar?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.avatar},null,8,Ae)):((0,a.wg)(),(0,a.iD)("img",Be))])),_:2},1024),(0,a.Uk)(" "+(0,o.zw)(e.name),1)])),_:2},1024)])))),128))]),(0,a.wy)((0,a._)("p",Te,"No one has been assigned to this task!",512),[[ce.F8,0===l.task.memberUsers.length]])])),_:1}),(0,a.Wm)(m),(0,a.Wm)(d,{style:{"word-break":"break-all"},innerHTML:l.task.description,class:"row flex col-12 q-pt-md"},null,8,["innerHTML"])])),_:1}),(0,a.Wm)(m),(0,a.Wm)(f,{swipeable:"",animated:"",arrows:"",modelValue:i.slide,"onUpdate:modelValue":t[0]||(t[0]=e=>i.slide=e),thumbnails:"",infinite:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.task.attachments,((e,t)=>((0,a.wg)(),(0,a.j4)(b,{name:t,key:t,"img-src":e.url},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"col-12 row flex"},{default:(0,a.w5)((()=>[(0,a._)("div",Me,[(0,a.Wm)(g,{class:"row flex flex-center items-center col-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{icon:"plus",flat:"","text-color":"grey"})])),_:1})])])),_:1})])),_:1})])),_:1})}var Re=l(61959);const Ee={props:["task"],data(){return{slide:(0,Re.iH)(1)}},methods:{dateConversion(e){return Q()(e).format("MMM Do YYYY")},priority(e){switch(e){case"High":return"text-positive bg-green-1";case"Medium":return"text-warning bg-yellow-2";case"Low":return"text-negative bg-red-1"}}}};var He=l(65869),Pe=l(67030),Le=l(75096),$e=l(31277),Ne=l(34593);Ee.render=Ye,Ee.__scopeId="data-v-d733dc58";const Oe=Ee;de()(Ee,"components",{QCard:K.Z,QCardSection:ee.Z,QCardActions:ve.Z,QItem:We.Z,QBtn:X.Z,QSeparator:He.Z,QChip:Pe.Z,QAvatar:Le.Z,QCarousel:$e.Z,QCarouselSlide:Ne.Z}),de()(Ee,"directives",{ClosePopup:ie.Z});const Fe={components:{breadcrmps:Z.Z,draggable:V(),modal:ne,modalt:je,task:Oe},data(){return{taskBody:null,taskDialogue:!1,loading:!1,projectsToChoose:[],project:null,allBoards:null,projects:[],isLoaded:!1,members:[],options:[],columns:[],attempt:0,dialogue:!1,dialoguet:!1,action:"Add",actiont:"Add",boardId:null,body:null,bodyt:null,bId:null,thumbStyle:{bottom:"2px",borderRadius:"7px",backgroundColor:"#027be3",height:"4px",opacity:.75},barStyle:{bottom:"-.75px",borderRadius:"9px",backgroundColor:"#027be3",width:"100%",height:"8px",opacity:.2},thumbStyle1:{right:"4px",borderRadius:"7px",backgroundColor:"#027be3",width:"4px",opacity:.75},barStyle1:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"8px",opacity:.2}}},computed:{...(0,D.rn)("userStore",["users"])},methods:{...(0,D.nv)("projectStore",["getProjects","deleteBoard","addMembers","deleteTask","deleteMember"]),...(0,D.nv)("userStore",["getUsers"]),convertDate(e){return Q()(e).format("MMM Do YYYY")},priority(e){switch(e){case"High":return"text-positive bg-green-4";case"Medium":return"text-warning bg-yellow-4";case"Low":return"text-negative bg-red-4"}},clone({name:e,description:t,memberUsers:l,id:a,priority:o,attachments:s}){return{name:e,description:t,memberUsers:l,id:a,priority:o,attachments:s}},pullFunction(){return!this.controlOnStart||"clone"},start({originalEvent:e}){this.controlOnStart=e.ctrlKey},getAccentColor(e){switch(e){case"#308be5":return"#a1d2f8";case"#82b865":return"#c6dfb9";case"#cc444b":return"#e4b1ab";case"#ffae30":return"#ffd899";case"#1d1d1d":return"lightgrey"}},openDialogue(e,t){let l=0;!0===this.dialoguet?(this.dialoguet=!1,l=200):l=0,setTimeout((()=>{this.bodyt=e,this.allBoards=this.columns,console.log(this.allBoards),this.actiont="Edit",this.dialoguet=!0,this.boardId=t}),l)},async delTask(e){await this.deleteTask(e),this.getAll()},async delMember(e){await this.deleteMember(e),this.getAll()},async addMembs(e){let t=[];for(let l=0;l<this.members.length;l++)t.push(this.members[l].id);await this.addMembers({id:e,members:t}),await this.getAll(),this.members=[]},getUserOptions(e){let t=[],l=[];this.options=[],setTimeout((()=>{if(e){for(let a=0;a<this.users.length;a++){for(let t=0;t<e.memberUsers.length;t++)Number(e.memberUsers[t].userId)===Number(this.users[a].id)&&l.push({id:this.users[a].id,label:this.users[t].name,avatar:this.users[t].avatar});t.push({id:this.users[a].id,label:this.users[a].name,avatar:this.users[a].avatar})}this.options=t.filter((({id:e})=>!l.some((({id:t})=>t===e))))}}),200)},async change(e){if(this.attempt+=1,this.attempt%2!==0)for(let t=0;t<this.columns.length;t++)for(let l=0;l<this.columns[t].tasks.length;l++)if(Number(this.columns[t].tasks[l].id)===Number(e.added.element.id)){await z().post("http://localhost:5050/api/v1/tasks/changeBoard",{id:Number(e.added.element.id),boardId:Number(this.columns[t].id)},{headers:{Authorization:localStorage.getItem("accessToken")}})}},async getAll(){let e=await z().get("http://localhost:5050/api/v1/boards",{headers:{Authorization:localStorage.getItem("accessToken")}});this.columns=e.data.data;for(let t=0;t<this.columns.length;t++)this.columns[t].boardAttribute={...this.columns[t].boardAttribute,accent:this.getAccentColor(this.columns[t].boardAttribute.color)};!0===this.dialogue&&(this.dialogue=!1),!0===this.dialoguet&&(this.dialoguet=!1)},async delBoard(e){await this.deleteBoard({id:e}),this.getAll()}},async mounted(){this.isLoaded=!0,await this.getAll(),await this.getUsers(),await this.getUserOptions(),this.isLoaded=!1},setup(){return{crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Tasks",icon:"task",path:"/projects/tasks"}]}}};var Ke=l(24379),Ge=l(47704),Je=l(30481),Xe=l(20811),et=l(27011),tt=l(69721),lt=l(5363),at=l(61289),ot=l(6833),st=l(46778),it=l(57678);Fe.render=C,Fe.__scopeId="data-v-5db50650";const rt=Fe;de()(Fe,"components",{QPage:Ke.Z,QBtn:X.Z,QScrollArea:Ge.Z,QMarkupTable:Je.Z,QMenu:Xe.Z,QList:et.Z,QItem:We.Z,QItemSection:Ce.Z,QIcon:oe.Z,QSeparator:He.Z,QChip:Pe.Z,QImg:xe.Z,QBadge:tt.Z,QAvatar:Le.Z,QTooltip:lt.Z,QPopupEdit:at.Z,QSelect:qe.Z,QItemLabel:De.Z,QSpinner:ot.Z,QDialog:st.Z,QTable:it.Z}),de()(Fe,"directives",{ClosePopup:ie.Z})}}]);