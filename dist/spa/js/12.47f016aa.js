"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[12],{12:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});a(246);var o=a(3673),i=a(2323);const l={class:"flex justify-between items-center"},n=(0,o._)("p",{class:"text-h4"},"Tax",-1),s={style:{"font-size":"15px",margin:"0 !important"}};function r(e,t,a,r,d,c){const p=(0,o.up)("breadcrumps"),u=(0,o.up)("q-btn"),m=(0,o.up)("q-td"),f=(0,o.up)("q-icon"),h=(0,o.up)("q-item-section"),y=(0,o.up)("q-item"),g=(0,o.up)("q-separator"),b=(0,o.up)("q-list"),w=(0,o.up)("q-menu"),x=(0,o.up)("q-tr"),_=(0,o.up)("q-table"),k=(0,o.up)("modal"),q=(0,o.up)("q-dialog"),T=(0,o.up)("q-page"),v=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(T,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",null,[n,(0,o.Wm)(p,{map:d.crumps},null,8,["map"])]),(0,o.Wm)(u,{onClick:t[0]||(t[0]=e=>{d.actionType="Add",d.dialogue=!0}),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})]),(0,o.Wm)(_,{rows:e.taxes,columns:d.columns,"row-key":"id",loading:d.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,o.w5)((e=>[(0,o.Wm)(x,{class:(0,i.C_)(e.rowIndex%2!==0&&"bg-white"),props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{key:"name",props:e},{default:(0,o.w5)((()=>[(0,o._)("p",s,(0,i.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(m,{key:"type",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.type),1)])),_:2},1032,["props"]),(0,o.Wm)(m,{key:"rate",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.rate),1)])),_:2},1032,["props"]),(0,o.Wm)(m,{key:"description",innerHTML:e.row.description,props:e},null,8,["innerHTML","props"]),(0,o.Wm)(m,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(y,{onClick:t=>c.delTax(e.row.id),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[v]]),(0,o.Wm)(g),(0,o.wy)((0,o.Wm)(y,{onClick:t=>{d.body=e.row,d.actionType="Edit",d.dialogue=!0},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[v]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,o.Wm)(q,{seamless:"",position:"right",modelValue:d.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogue=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{onCloseDialogue:t[1]||(t[1]=t=>{d.dialogue=!1,e.getTaxes()}),actionType:d.actionType,body:d.body},null,8,["actionType","body"])])),_:1},8,["modelValue"])])),_:1})}var d=a(3617),c=a(6303);const p={class:"absolute-bottom q-pa-sm",style:{"z-index":"5"}};function u(e,t,a,l,n,s){const r=(0,o.up)("q-toolbar-title"),d=(0,o.up)("q-btn"),c=(0,o.up)("q-toolbar"),u=(0,o.up)("q-input"),m=(0,o.up)("q-editor"),f=(0,o.up)("q-card-section"),h=(0,o.up)("q-card"),y=(0,o.up)("q-layout"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(y,{style:{width:"550px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{"max-width":"550px","min-height":"100vh"},flat:"",square:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(a.actionType+" ")+"Tax ",1)])),_:1}),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,o.Wm)(f,{class:"q-gutter-md scroll"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{ref:"nameRef",outlined:"",modelValue:n.tax.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tax.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write the name"]},null,8,["modelValue","rules"]),(0,o.Wm)(m,{modelValue:n.tax.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.tax.description=e),dense:e.$q.screen.lt.md,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","dense","toolbar"]),(0,o.Wm)(u,{ref:"typeRef",outlined:"",modelValue:n.tax.type,"onUpdate:modelValue":t[2]||(t[2]=e=>n.tax.type=e),label:"Type","lazy-rules":"",rules:[e=>e&&e.length>0||"Please write the type"]},null,8,["modelValue","rules"]),(0,o.Wm)(u,{ref:"rateRef",rules:[e=>Number(e)<=100&&Number(e)>0||"Not less than 1"],"bg-color":"white",class:"col-lg-3 col-md-4 col-sm-6 col-xs-12",mask:"#","fill-mask":"0","reverse-fill-mask":"","model-value":"Number",outlined:"",modelValue:n.tax.rate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.tax.rate=e),label:"Rate%"},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o._)("div",p,[(0,o.Wm)(d,{loading:n.loading,onClick:s.submit,label:"Submit","no-caps":"",type:"reset",color:"primary",unelevated:"",class:"full-width"},null,8,["loading","onClick"])])])),_:1})}var m=a(52),f=a.n(m);const h={props:["actionType","body"],data(){return{tax:{name:"",description:"Description",rate:null,type:""},loading:!1}},methods:{async submit(){this.$refs.nameRef.validate(),this.$refs.typeRef.validate(),this.$refs.rateRef.validate(),this.$refs.nameRef.hasError||this.$refs.typeRef.hasError||this.$refs.rateRef.hasError||(this.loading=!0,"Add"===this.actionType?await this.create():await this.update(),this.loading=!1,this.$emit("closeDialogue"))},async create(){let e=this.tax;e.rate=Number(e.rate)/100;await f().post("https://onconnect-backend-api.herokuapp.com/api/v1/taxes/create",e,{headers:{Authorization:localStorage.getItem("accessToken")}});this.loading=!1,this.$q.notify({type:"positive",message:"Tax created",color:"positive",position:"top",timeout:"500"})},async update(){let e=this.tax;e.rate=Number(e.rate)/100,e.rate=Number(e.rate);await f().post("https://onconnect-backend-api.herokuapp.com/api/v1/taxes/update",{...e,id:Number(this.body.id)},{headers:{Authorization:localStorage.getItem("accessToken")}});this.loading=!1,this.$q.notify({type:"positive",message:"Tax updated",color:"positive",position:"top",timeout:"500"})}},async mounted(){"Edit"===this.actionType&&(this.tax.name=this.body.name,this.tax.description=this.body.description,this.tax.type=this.body.type,this.tax.rate=100*Number(this.body.rate))}};var y=a(9214),g=a(151),b=a(9570),w=a(3747),x=a(2165),_=a(5589),k=a(4689),q=a(9989),T=a(677),v=a(7518),W=a.n(v);h.render=u,h.__scopeId="data-v-5a9f1ec8";const C=h;W()(h,"components",{QLayout:y.Z,QCard:g.Z,QToolbar:b.Z,QToolbarTitle:w.Z,QBtn:x.Z,QCardSection:_.Z,QInput:k.Z,QEditor:q.Z}),W()(h,"directives",{ClosePopup:T.Z});const Z={data(){return{id:null,dialogue:!1,loading:!1,actionType:"",body:null,crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Tax",icon:"receipt_long",path:"/finance/taxes"}],columns:[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`},{name:"type",align:"left",label:"Type",field:"type"},{name:"rate",align:"left",label:"Rate%",field:"rate"},{name:"description",label:"Description",align:"left",field:"description"},{name:"actions",label:"Actions",align:"left",field:"actions"}]}},computed:{...(0,d.rn)("financeStore",["taxes"])},components:{breadcrumps:c.Z,modal:C},methods:{...(0,d.nv)("financeStore",["getTaxes","deleteTax"]),async delTax(e){await this.deleteTax({id:e})},deleteClientContact(e){this.loading=!0,this.deleteContact({...e,clientId:this.$route.params.id}),this.loading=!1},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"},openModal(e,t){this.id=e,this.actionType=t,this.dialogue=!0}},async mounted(){this.loading=!0,await this.getTaxes(),this.loading=!1}};var z=a(4379),Q=a(1277),$=a(8186),S=a(3884),V=a(811),I=a(7011),N=a(3414),R=a(2035),U=a(4554),A=a(5869),L=a(6778);Z.render=r;const E=Z;W()(Z,"components",{QPage:z.Z,QBtn:x.Z,QTable:Q.Z,QTr:$.Z,QTd:S.Z,QMenu:V.Z,QList:I.Z,QItem:N.Z,QItemSection:R.Z,QIcon:U.Z,QSeparator:A.Z,QDialog:L.Z}),W()(Z,"directives",{ClosePopup:T.Z})}}]);