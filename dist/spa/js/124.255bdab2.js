"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[124],{5124:(e,l,t)=>{t.r(l),t.d(l,{default:()=>te});var a=t(3673),o=t(8880);const i={class:"flex justify-between items-center q-pa-md"},s=(0,a._)("p",{class:"text-h4"},"CRM",-1),n={class:"flex items-center"},d={class:"flex flex-center bg-secondary q-mr-sm"},r={class:"q-pr-md q-pl-md"};function p(e,l,t,p,m,u){const c=(0,a.up)("breadcrmps"),w=(0,a.up)("q-btn"),b=(0,a.up)("q-tab"),f=(0,a.up)("q-tabs"),y=(0,a.up)("grid"),g=(0,a.up)("tbl"),h=(0,a.up)("q-tab-panel"),_=(0,a.up)("q-tab-panels"),W=(0,a.up)("modal"),k=(0,a.up)("q-dialog"),x=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(x,null,{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",null,[s,(0,a.Wm)(c,{map:m.crumps},null,8,["map"])]),(0,a._)("div",n,[(0,a._)("div",d,[(0,a.Wm)(w,{class:"q-mr-xs",onClick:l[0]||(l[0]=e=>m.table=!0),outline:"",style:{color:"goldenrod"},color:m.table?"primary":"grey",icon:"view_headline"},null,8,["color"]),(0,a.Wm)(w,{onClick:l[1]||(l[1]=e=>m.table=!1),outline:"",style:{color:"goldenrod"},color:m.table?"grey":"primary",icon:"apps"},null,8,["color"])]),(0,a.Wm)(w,{onClick:l[2]||(l[2]=e=>m.dialogue=!0),color:"primary",label:"Add "+p.tab[0].toUpperCase()+p.tab.substr(1,p.tab.length),unelevated:"",rounded:"","no-caps":""},null,8,["label"])])]),(0,a._)("div",r,[(0,a.Wm)(f,{bordered:"",modelValue:p.tab,"onUpdate:modelValue":l[3]||(l[3]=e=>p.tab=e),dense:"",class:"text-grey q-mt-md bg-white rounded-borders bordered","active-color":"primary","indicator-color":"primary","no-caps":"",align:"justify"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{name:"client",label:"Clients"}),(0,a.Wm)(b,{name:"lead",label:"Leads"}),(0,a.Wm)(b,{name:"blacklist",label:"Black list"})])),_:1},8,["modelValue"])]),(0,a.Wm)(_,{modelValue:p.tab,"onUpdate:modelValue":l[4]||(l[4]=e=>p.tab=e),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"bg-secondary",name:"client"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(y,{type:"client"},null,512),[[o.F8,!m.table]]),(0,a.wy)((0,a.Wm)(g,{type:"client"},null,512),[[o.F8,m.table]])])),_:1}),(0,a.Wm)(h,{name:"lead"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(y,{type:"lead"},null,512),[[o.F8,!m.table]]),(0,a.wy)((0,a.Wm)(g,{type:"lead"},null,512),[[o.F8,m.table]])])),_:1}),(0,a.Wm)(h,{name:"blacklist"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(y,{type:"blacklist"},null,512),[[o.F8,!m.table]]),(0,a.wy)((0,a.Wm)(g,{type:"blacklist"},null,512),[[o.F8,m.table]])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(k,{seamless:"",position:"right",modelValue:m.dialogue,"onUpdate:modelValue":l[6]||(l[6]=e=>m.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{onCloseDialogue:l[5]||(l[5]=e=>m.dialogue=!1),type:p.tab,actionType:"Add",id:{}},null,8,["type"])])),_:1},8,["modelValue"])])),_:1})}var m=t(6303),u=t(2323);const c=["src"],w={style:{"font-size":"20px"}};function b(e,l,t,o,i,s){const n=(0,a.up)("q-avatar"),d=(0,a.up)("router-link"),r=(0,a.up)("q-td"),p=(0,a.up)("q-icon"),m=(0,a.up)("q-item-section"),b=(0,a.up)("q-item"),f=(0,a.up)("q-separator"),y=(0,a.up)("q-list"),g=(0,a.up)("q-menu"),h=(0,a.up)("q-btn"),_=(0,a.up)("q-tr"),W=(0,a.up)("q-table"),k=(0,a.up)("modal"),x=(0,a.up)("q-dialog"),C=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(W,{rows:s.data,columns:i.columns,"row-key":"id",loading:i.loading,flat:"",class:"bg-secondary q-pa-md"},{body:(0,a.w5)((l=>[(0,a.Wm)(_,{class:(0,u.C_)(l.rowIndex%2!==0&&"bg-white"),props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{key:"logo",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{to:`/client/${l.row.id}`},{default:(0,a.w5)((()=>[l.row.logo?((0,a.wg)(),(0,a.j4)(n,{key:0,size:"30px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.row.logo},null,8,c)])),_:2},1024)):((0,a.wg)(),(0,a.j4)(n,{key:1,size:"30px","font-size":"20px",color:"grey","text-color":"white",icon:"person"}))])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(r,{class:"flex items-center justify-start",key:"name",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-black",to:`/client/${l.row.id}`},{default:(0,a.w5)((()=>[(0,a._)("p",w,(0,u.zw)(l.row.name),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"phoneNumber1",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.phoneNumber1),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"phoneNumber2",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.phoneNumber2),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"clientType",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.clientType),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"businessType",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.businessType),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"email",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.email),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"website",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.website),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"address",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.address),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"rate",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.rate),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"zipCode",props:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.row.zipCode),1)])),_:2},1032,["props"]),(0,a.Wm)(r,{key:"zipCode",props:l},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"z-index":"10"},dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{"min-width":"75px"}},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(b,{onClick:t=>e.deleteClient({id:l.row.id}),style:{},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[C]]),(0,a.Wm)(f),(0,a.wy)((0,a.Wm)(b,{onClick:e=>s.editClient(l.row),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[C]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,a.Wm)(x,{onCloseDialogue:l[0]||(l[0]=e=>i.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:i.dialogue,"onUpdate:modelValue":l[1]||(l[1]=e=>i.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{type:t.type,body:i.body,id:i.id,actionType:"Edit"},null,8,["type","body","id"])])),_:1},8,["modelValue"])])}var f=t(3617),y=t(7474);const g={props:["type"],computed:{...(0,f.rn)("crmStore",["clients","leads","blacklist"]),data(){return"client"===this.type?this.clients:"lead"===this.type?this.leads:this.blacklist}},data(){return{body:null,id:null,dialogue:!1,loading:!1,columns:[{name:"logo",required:!0,label:"#",align:"center",field:e=>e.name,format:e=>`${e}`},{name:"name",required:!0,label:"Company/Individual",align:"left",field:e=>e.name,format:e=>`${e}`},{name:"phoneNumber1",align:"left",label:"Phone number 1",field:"phoneNumber1"},{name:"phoneNumber2",align:"left",label:"Phone number 2",field:"phoneNumber2"},{name:"clientType",label:"Client type",align:"left",field:"clientType"},{name:"businessType",label:"Business type",align:"left",field:"businessType"},{name:"email",label:"E-mail",align:"left",field:"email"},{name:"website",label:"Website",align:"left",field:"website"},{name:"address",label:"Address",align:"left",field:"address"},{name:"rate",label:"Rate",align:"left",field:"rate"},{name:"zipCode",label:"Zip code",align:"left",field:"zipCode"},{name:"actions",label:"Actions",align:"left",field:"actions"}]}},components:{modal:y.Z},methods:{...(0,f.nv)("crmStore",["getClients","deleteClient"]),editClient(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getClients(this.type),this.loading=!1}};var h=t(1277),_=t(8186),W=t(3884),k=t(5096),x=t(2165),C=t(811),q=t(7011),Z=t(3414),v=t(2035),Q=t(4554),z=t(5869),T=t(2025),U=t(4689),V=t(6778),I=t(677),N=t(7518),P=t.n(N);g.render=b;const S=g;P()(g,"components",{QTable:h.Z,QTr:_.Z,QTd:W.Z,QAvatar:k.Z,QBtn:x.Z,QMenu:C.Z,QList:q.Z,QItem:Z.Z,QItemSection:v.Z,QIcon:Q.Z,QSeparator:z.Z,QSpace:T.Z,QInput:U.Z,QDialog:V.Z}),P()(g,"directives",{ClosePopup:I.Z});var j=t(1959);const D={class:"row items-center q-pa-sm"},A={class:"flex column flex-center"},$=["src"],F={style:{"max-width":"200px !important","min-width":"80% !important","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis"},class:"text-h5 q-mt-sm q-mb-none"},B={class:"text-span text-grey"},M=(0,a.Uk)("View Client");function E(e,l,t,o,i,s){const n=(0,a.up)("q-icon"),d=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),p=(0,a.up)("q-separator"),m=(0,a.up)("q-list"),c=(0,a.up)("q-menu"),w=(0,a.up)("q-btn"),b=(0,a.up)("q-avatar"),f=(0,a.up)("router-link"),y=(0,a.up)("q-card-section"),g=(0,a.up)("q-card-actions"),h=(0,a.up)("q-card"),_=(0,a.up)("modal"),W=(0,a.up)("q-dialog"),k=(0,a.up)("q-page"),x=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(k,{class:"q-pt-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",D,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.data,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 q-pa-sm",key:t},[(0,a.Wm)(h,{flat:"",bordered:"",style:{position:"relative !important"},class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"absolute-top-right",style:{"z-index":"10"},dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{style:{"min-width":"75px"}},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{onClick:t=>e.deleteClient({id:l.id}),style:{},clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[x]]),(0,a.Wm)(p),(0,a.wy)((0,a.Wm)(r,{onClick:e=>s.editClient(l),clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[x]])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.Wm)(y,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a._)("div",A,[(0,a.Wm)(f,{to:`/client/${l.id}`},{default:(0,a.w5)((()=>[l.logo?((0,a.wg)(),(0,a.j4)(b,{key:0,size:"100px","font-size":"52px"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.logo},null,8,$)])),_:2},1024)):((0,a.wg)(),(0,a.j4)(b,{key:1,size:"100px","font-size":"52px",color:"grey","text-color":"white",icon:"person"}))])),_:2},1032,["to"]),(0,a.Wm)(f,{class:"text-black",style:{"max-width":"200px !important","min-width":"80% !important","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis"},to:`/client/${l.id}`},{default:(0,a.w5)((()=>[(0,a._)("p",F,(0,u.zw)(l.name),1)])),_:2},1032,["to"]),(0,a._)("p",B,(0,u.zw)(l.businessType),1)])])),_:2},1024),(0,a.Wm)(g,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{to:`/client/${l.id}`},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{color:"primary",class:"q-mb-md",outline:"","no-caps":""},{default:(0,a.w5)((()=>[M])),_:1})])),_:2},1032,["to"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,a.Wm)(W,{seamless:"",position:"right",modelValue:i.dialogue,"onUpdate:modelValue":l[1]||(l[1]=e=>i.dialogue=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{onCloseDialogue:l[0]||(l[0]=e=>i.dialogue=!1),type:t.type,inProfile:!1,body:i.body,actionType:"Edit",id:i.id},null,8,["type","body","id"])])),_:1},8,["modelValue"])])),_:1})}const L={components:{modal:y.Z},props:["type"],computed:{...(0,f.rn)("crmStore",["clients","leads","blacklist"]),data(){return"client"===this.type?this.clients:"lead"===this.type?this.leads:this.blacklist}},data(){return{loading:!1,dialogue:!1,id:"",body:null,options:[]}},methods:{...(0,f.nv)("crmStore",["getClients","deleteClient"]),editClient(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},getUserOptions(e){let l=[],t=[];this.options=[],setTimeout((()=>{if(e){for(let a=0;a<this.users.length;a++){for(let l=0;l<e.members.length;l++)Number(e.members[l].memberId)===Number(this.users[a].id)&&t.push({id:this.users[a].id,label:this.users[l].name});l.push({id:this.users[a].id,label:this.users[a].name})}this.options=l.filter((({id:e})=>!t.some((({id:l})=>l===e))))}}),200)}},async mounted(){this.loading=!0,await this.getClients(this.type),this.loading=!1}};var R=t(4379),H=t(151),O=t(5589),K=t(9367);L.render=E,L.__scopeId="data-v-091abd22";const Y=L;P()(L,"components",{QPage:R.Z,QCard:H.Z,QBtn:x.Z,QMenu:C.Z,QList:q.Z,QItem:Z.Z,QItemSection:v.Z,QIcon:Q.Z,QSeparator:z.Z,QCardSection:O.Z,QAvatar:k.Z,QCardActions:K.Z,QDialog:V.Z}),P()(L,"directives",{ClosePopup:I.Z});const G={components:{breadcrmps:m.Z,tbl:S,grid:Y,modal:y.Z},data(){return{table:!1,crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"CRM",icon:"speed",path:"/crm"}],dialogue:!1}},setup(){return{tab:(0,j.iH)("client")}}};var J=t(7547),X=t(3269),ee=t(5906),le=t(6602);G.render=p;const te=G;P()(G,"components",{QPage:R.Z,QBtn:x.Z,QTabs:J.Z,QTab:X.Z,QTabPanels:ee.Z,QTabPanel:le.Z,QDialog:V.Z})}}]);