"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[3801],{83801:(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});s(90246);var l=s(83673),o=s(62323),r=s(93402),i=s.n(r);const a=e=>((0,l.dD)("data-v-33b74bea"),e=e(),(0,l.Cn)(),e),d={class:"flex justify-between items-center"},n={class:"text-h4"},u={class:"q-mt-md"},m={class:"col-12 flex row"},c=["innerHTML"],p={class:"q-my-md col-6 text-overline text-grey-9"},v={class:"text-h6"},g=(0,l.Uk)("Creator "),w=["src"],h={key:1,src:i()},k=(0,l.Uk)("Approved"),f={class:"q-my-md col-6 text-overline text-grey-9"},y={class:"text-h6"},q=(0,l.Uk)("Client "),U=["src"],_={key:1,src:i()},b=(0,l.Uk)("-"),x=(0,l.Uk)("Approval Needed"),W=(0,l.Uk)("Not exist"),D={class:"q-my-md col-6 text-overline text-grey-9"},M={class:"text-h6"},P=(0,l.Uk)("Priority "),C={key:0,class:"q-my-md col-6 text-overline text-grey-9"},S={class:"text-h6"},Z=(0,l.Uk)("Deadline "),Q={key:1,class:"q-my-md col-6 text-overline text-grey-9"},j={class:"text-h6"},z=(0,l.Uk)("Start At "),T={key:2,class:"q-my-md col-6 text-overline text-grey-9"},I={class:"text-h6"},V=(0,l.Uk)("Completed At "),A=a((()=>(0,l._)("hr",null,null,-1))),E={key:0,class:"text-h6"},N={key:1,class:"text-subtitle1 text-grey-5"},O={key:2,class:"row"},F=["src"],H={key:1,round:"",src:i(),color:"grey"},L=(0,l.Uk)("Approved"),R=(0,l.Uk)("view-only");function B(e,t,s,r,i,a){const B=(0,l.up)("breadcrmps"),K=(0,l.up)("q-btn"),Y=(0,l.up)("q-avatar"),$=(0,l.up)("q-badge"),G=(0,l.up)("q-chip"),J=(0,l.up)("q-icon"),X=(0,l.up)("q-item-label"),ee=(0,l.up)("q-item-section"),te=(0,l.up)("q-item"),se=(0,l.up)("q-select"),le=(0,l.up)("q-popup-edit"),oe=(0,l.up)("q-card"),re=(0,l.up)("confirm"),ie=(0,l.up)("q-dialog"),ae=(0,l.up)("q-page"),de=(0,l.up)("q-spinner"),ne=(0,l.Q2)("close-popup");return i.loading?((0,l.wg)(),(0,l.j4)(ae,{key:1,class:"flex flex-center text-h4"},{default:(0,l.w5)((()=>[(0,l.Wm)(de)])),_:1})):((0,l.wg)(),(0,l.j4)(ae,{key:0,class:"q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l._)("div",null,[(0,l._)("p",n,(0,o.zw)(i.post.name),1),(0,l.Wm)(B,{map:i.crumps},null,8,["map"])]),(0,l.Wm)(K,{onClick:t[0]||(t[0]=e=>i.dialogue=!0),color:"grey-5",flat:"",icon:"edit",round:""})]),(0,l._)("div",u,[(0,l.Wm)(oe,{class:"row q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l._)("div",{class:"q-my-md col-12 text-grey",innerHTML:i.post.description},null,8,c),(0,l._)("div",p,[(0,l._)("div",v,[g,(0,l.Wm)(G,null,{default:(0,l.w5)((()=>{var t,s,r;return[(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>{var e,t;return[null!==(e=i.post.creator)&&void 0!==e&&e.avatar?((0,l.wg)(),(0,l.iD)("img",{key:0,src:null===(t=i.post.creator)||void 0===t?void 0:t.avatar},null,8,w)):((0,l.wg)(),(0,l.iD)("img",h))]})),_:1}),(0,l.Uk)(" "+(0,o.zw)(null===(t=i.post.creator)||void 0===t?void 0:t.name)+" ",1),null!==(s=i.post.socialMediaStudioUsers)&&void 0!==s&&null!==(r=s.find((t=>t.user.id===e.user.id)))&&void 0!==r&&r.approved?((0,l.wg)(),(0,l.j4)($,{key:0,class:"bg-green q-pa-sm q-mx-md",color:"green"},{default:(0,l.w5)((()=>[k])),_:1})):(0,l.kq)("",!0)]})),_:1})])]),(0,l._)("div",f,[(0,l._)("div",y,[q,i.post.client?((0,l.wg)(),(0,l.j4)(G,{key:0},{default:(0,l.w5)((()=>{var e;return[(0,l.Wm)(Y,null,{default:(0,l.w5)((()=>{var e,t;return[null!==(e=i.post.client)&&void 0!==e&&e.logo?((0,l.wg)(),(0,l.iD)("img",{key:0,src:null===(t=i.post.client)||void 0===t?void 0:t.logo},null,8,U)):((0,l.wg)(),(0,l.iD)("img",_))]})),_:1}),(0,l.Uk)((0,o.zw)(null===(e=i.post.client)||void 0===e?void 0:e.name),1)]})),_:1})):(0,l.kq)("",!0),b,i.post.clientApproval?((0,l.wg)(),(0,l.j4)(G,{key:2},{default:(0,l.w5)((()=>[W])),_:1})):((0,l.wg)(),(0,l.j4)(G,{key:1,class:"bg-primary q-pa-sm",color:"green"},{default:(0,l.w5)((()=>[x])),_:1}))])]),(0,l._)("div",D,[(0,l._)("div",M,[P,(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(i.post.priority),1)])),_:1})])]),i.post.plannedEndDate?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",S,[Z,(0,l.Wm)(G,null,{default:(0,l.w5)((()=>{var e;return[(0,l.Uk)((0,o.zw)(null===(e=i.post.plannedEndDate)||void 0===e?void 0:e.split("T")[0]),1)]})),_:1})])])):(0,l.kq)("",!0),i.post.plannedStartDate?((0,l.wg)(),(0,l.iD)("div",Q,[(0,l._)("div",j,[z,(0,l.Wm)(G,null,{default:(0,l.w5)((()=>{var e;return[(0,l.Uk)((0,o.zw)(null===(e=i.post.plannedStartDate)||void 0===e?void 0:e.split("T")[0]),1)]})),_:1})])])):(0,l.kq)("",!0),i.post.actualdEndDate?((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("div",I,[V,(0,l.Wm)(G,null,{default:(0,l.w5)((()=>{var e;return[(0,l.Uk)((0,o.zw)(null===(e=i.post.actualdEndDate)||void 0===e?void 0:e.split("T")[0]),1)]})),_:1})])])):(0,l.kq)("",!0)]),A,(0,l.Wm)(oe,{class:"q-my-md col-12 q-py-md q-my-lg"},{default:(0,l.w5)((()=>{var s,r,d,n,u,m;return[0!==(null===(s=i.post)||void 0===s||null===(r=s.socialMediaStudioUsers)||void 0===r?void 0:r.length)?((0,l.wg)(),(0,l.iD)("p",E,"Assigned users")):(0,l.kq)("",!0),0===(null===(d=i.post)||void 0===d||null===(n=d.socialMediaStudioUsers)||void 0===n?void 0:n.length)?((0,l.wg)(),(0,l.iD)("p",N,"No users assigned.")):(0,l.kq)("",!0),(0,l.Wm)(K,{onClick:t[4]||(t[4]=e=>a.getUserOptions(i.post)),class:"absolute-bottom-right q-mr-sm q-mb-sm",size:"10px",color:"primary",round:"",icon:"add",unelevated:"",rounded:"","no-caps":""},{default:(0,l.w5)((()=>[(0,l.Wm)(le,{modelValue:i.userMembers,"onUpdate:modelValue":t[3]||(t[3]=e=>i.userMembers=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,l.w5)((s=>[(0,l.Wm)(se,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:i.userMembers,"onUpdate:modelValue":t[1]||(t[1]=e=>i.userMembers=e),options:i.options,label:"Choose users"},{option:(0,l.w5)((e=>[(0,l.Wm)(te,(0,o.vs)((0,l.F4)(e.itemProps)),{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{class:"avatar-list"},{default:(0,l.w5)((()=>[(0,l.Wm)(Y,{clickable:"",to:"/users/"+e.opt.id,class:"q-mr-xs",size:"30px"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{name:"person",class:"text-grey"})])),_:2},1032,["to"]),(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options"]),(0,l.wy)((0,l.Wm)(K,{onClick:t[2]||(t[2]=e=>{var t;return a.addUsersToPosts(null===(t=i.post)||void 0===t?void 0:t.id)}),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===e.users.length},null,8,["disable"]),[[ne]])])),_:1},8,["modelValue"])])),_:1}),0!==(null===(u=i.post)||void 0===u||null===(m=u.socialMediaStudioUsers)||void 0===m?void 0:m.length)?((0,l.wg)(),(0,l.iD)("div",O,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.post.socialMediaStudioUsers,((t,s)=>{var r;return(0,l.wg)(),(0,l.j4)(G,{key:t.user,onRemove:s=>{var l;e.user.id===(null===(l=i.post.creator)||void 0===l?void 0:l.id)&&(i.memberId=t.user.id),i.deleteUserConfirm=!0},removable:e.user.id===(null===(r=i.post.creator)||void 0===r?void 0:r.id)},{default:(0,l.w5)((()=>{var e;return[t.user?((0,l.wg)(),(0,l.j4)(Y,{key:0},{default:(0,l.w5)((()=>[t.user.avatar?((0,l.wg)(),(0,l.iD)("img",{key:0,round:"",src:t.user.avatar,icon:"person",color:"grey"},null,8,F)):((0,l.wg)(),(0,l.iD)("img",H))])),_:2},1024)):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,o.zw)(null===(e=t.user)||void 0===e?void 0:e.name)+" ",1),t.approved?((0,l.wg)(),(0,l.j4)($,{key:1,class:"q-pa-sm q-mx-md",color:"green"},{default:(0,l.w5)((()=>[L])),_:1})):(0,l.kq)("",!0),t.canEdit?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)($,{key:2,class:"q-pa-sm q-mx-md bg-orange"},{default:(0,l.w5)((()=>[R])),_:1}))]})),_:2},1032,["onRemove","removable"])})),128))])):(0,l.kq)("",!0)]})),_:1})])),_:1})]),(0,l.Wm)(ie,{modelValue:i.deleteUserConfirm,"onUpdate:modelValue":t[6]||(t[6]=e=>i.deleteUserConfirm=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{onConfirm:t[5]||(t[5]=e=>a.deleteUser({id:i.post.id,users:[i.memberId]}))})])),_:1},8,["modelValue"])])),_:1}))}var K=s(46303),Y=s(81887),$=s(93617),G=s(61959);const J={components:{breadcrmps:K.Z,confirm:Y.Z},data(){return{post:{socialMediaStudioUsers:[]},userMembers:[],options:[],confirm:!1,deleteUserConfirm:!1,dialogue:!1,loading:!1,memberId:(0,G.iH)(null),images:[],crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Post",icon:"send",path:"/posts"}],image:null}},computed:{...(0,$.rn)("socialMediaManagementStore",["currentPost"]),...(0,$.rn)("userStore",["users"]),...(0,$.rn)("example",["user"])},methods:{...(0,$.nv)("example",["getUser"]),...(0,$.nv)("socialMediaManagementStore",["addFiles","addUsersToPost","removeUserFromPost","getOnePost"]),...(0,$.nv)("userStore",["getUsers"]),async addUsersToPosts(e){let t=[];for(let s=0;s<this.userMembers.length;s++)t.push(this.userMembers[s].id);await this.addUsersToPost({id:e,users:t}),this.userMembers=[],await this.getPost()},async deleteUser(e){console.log(e),await this.removeUserFromPost(e),await this.getPost()},getUserOptions(e){let t=[],s=[];this.options=[],setTimeout((()=>{if(e){for(let l=0;l<this.users.length;l++){for(let t=0;t<e.socialMediaStudioUsers.length;t++)Number(e.socialMediaStudioUsers[t].userId)===Number(this.users[l].id)&&s.push({id:this.users[l].id,label:this.users[t].name});t.push({id:this.users[l].id,label:this.users[l].name})}this.options=t.filter((({id:e})=>!s.some((({id:t})=>t===e))))}}),200)},async getPost(){var e;await this.getOnePost(this.$route.params.id),this.post=this.currentPost,this.crumps[1].name=null===(e=this.post)||void 0===e?void 0:e.name}},async mounted(){this.loading=!0,await this.getPost(),await this.getUsers(),await this.getUser(),console.log("currentPost",this.currentPost),this.loading=!1}};var X=s(24379),ee=s(2165),te=s(10151),se=s(67030),le=s(75096),oe=s(69721),re=s(61289),ie=s(63314),ae=s(83414),de=s(52035),ne=s(24554),ue=s(2350),me=s(46778),ce=s(6833),pe=s(60677),ve=s(7518),ge=s.n(ve);J.render=B,J.__scopeId="data-v-33b74bea";const we=J;ge()(J,"components",{QPage:X.Z,QBtn:ee.Z,QCard:te.Z,QChip:se.Z,QAvatar:le.Z,QBadge:oe.Z,QPopupEdit:re.Z,QSelect:ie.Z,QItem:ae.Z,QItemSection:de.Z,QIcon:ne.Z,QItemLabel:ue.Z,QDialog:me.Z,QSpinner:ce.Z}),ge()(J,"directives",{ClosePopup:pe.Z})}}]);