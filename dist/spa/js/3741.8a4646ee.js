"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[3741],{40067:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var o=a(83673);const n={class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},l=(0,o._)("div",{class:"text-h4"},"Invoice",-1),i={class:"flex items-center"},s={class:"q-px-md"};function d(e,t,a,d,r,m){const p=(0,o.up)("q-btn"),c=(0,o.up)("breadcrumps"),u=(0,o.up)("q-tab"),b=(0,o.up)("q-tabs"),f=(0,o.up)("tbl"),w=(0,o.up)("q-tab-panel"),y=(0,o.up)("q-tab-panels"),v=(0,o.up)("modal"),g=(0,o.up)("q-dialog"),W=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(W,{class:"q-py-none q-my-none"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[l,(0,o._)("div",i,[(0,o.Wm)(p,{onClick:t[0]||(t[0]=e=>r.prompt=!0),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})])]),(0,o.Wm)(c,{class:"q-pa-md",map:d.crumps},null,8,["map"]),(0,o._)("div",s,[(0,o.Wm)(b,{modelValue:r.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>r.tab=e),dense:"",class:"text-grey q-mt-md bg-white rounded-borders bordered","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"no-caps":"",name:"Sent",label:"Sent"}),(0,o.Wm)(u,{"no-caps":"",name:"Not paid",label:"Not paid"}),(0,o.Wm)(u,{"no-caps":"",name:"Paid",label:"Paid"})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{class:"bg-secondary",modelValue:r.tab,"onUpdate:modelValue":t[2]||(t[2]=e=>r.tab=e),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{name:"Sent",class:"q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{type:"Sent"})])),_:1}),(0,o.Wm)(w,{class:"bg-secondary",name:"Not paid"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{type:"Not paid"})])),_:1}),(0,o.Wm)(w,{class:"bg-secondary",name:"Paid"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{type:"Paid"})])),_:1})])),_:1},8,["modelValue"])]),(0,o.Wm)(g,{seamless:"",position:"right",modelValue:r.prompt,"onUpdate:modelValue":t[4]||(t[4]=e=>r.prompt=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{onCloseDialogue:t[3]||(t[3]=e=>r.prompt=!1),action:"Add",invoiceType:r.tab},null,8,["invoiceType"])])),_:1},8,["modelValue"])])),_:1})}var r=a(46303),m=a(62323);const p={class:"text-h6",style:{"font-size":"15px",margin:"0 !important"}};function c(e,t,a,n,l,i){const s=(0,o.up)("router-link"),d=(0,o.up)("q-td"),r=(0,o.up)("q-icon"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item"),b=(0,o.up)("q-separator"),f=(0,o.up)("q-list"),w=(0,o.up)("q-menu"),y=(0,o.up)("q-btn"),v=(0,o.up)("q-tr"),g=(0,o.up)("q-table"),W=(0,o.up)("modal"),_=(0,o.up)("q-dialog"),h=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(g,{rows:i.data,columns:l.columns,"row-key":"id",loading:l.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,o.w5)((t=>[(0,o.Wm)(v,{class:(0,m.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{key:"invoiceNumber",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{style:{color:"black"},to:`/finance/invoice/${t.row.id}`},{default:(0,o.w5)((()=>[(0,o._)("p",p,(0,m.zw)(t.row.invoiceNumber),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"name",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(t.row.client.name),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"createdAt",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(i.dateConversion(t.row.createdAt)),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"dueDate",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(i.dateConversion(t.row.dueDate)),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"status",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(t.row.status),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"totalAmount",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(t.row.totalAmount),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"actions",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{disable:"Paid"===t.row.status,dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(u,{onClick:a=>e.deleteInvoice(t.row.id),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[h]]),(0,o.Wm)(b),(0,o.wy)((0,o.Wm)(u,{onClick:e=>i.edit(t.row),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[h]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["disable"])])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,o.Wm)(_,{seamless:"",position:"right",modelValue:l.prompt,"onUpdate:modelValue":t[1]||(t[1]=e=>l.prompt=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{onCloseDialogue:t[0]||(t[0]=e=>l.prompt=!1),action:l.action,body:l.body},null,8,["action","body"])])),_:1},8,["modelValue"])])}var u=a(93617),b=a(25616),f=a(80395);const w={props:["type"],data(){return{prompt:!1,loading:!1,action:"",body:{},columns:[{name:"invoiceNumber",align:"left",label:"Invoice number",field:"invoiceNumber"},{name:"name",align:"left",label:"client",field:"name"},{name:"createdAt",align:"left",label:"Purchased at",field:"createdAt"},{name:"dueDate",align:"left",label:"Due date",field:"dueDate"},{name:"status",align:"left",label:"Status",field:"status"},{name:"totalAmount",align:"left",label:"Total amount",field:"totalAmount"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},computed:{...(0,u.rn)("financeStore",["sentInvoices","paidInvoices","notPaidInvoices"]),data(){return"Sent"===this.type?this.sentInvoices:"Paid"===this.type?this.paidInvoices:this.notPaidInvoices}},components:{modal:f.Z},methods:{total(e){let t=0,a=0,o=0;for(let n=0;n<e.invoiceItems.length;n++)t+=Number(e.invoiceItems[n].qty)*Number(e.invoiceItems[n].unitPrice);return a=Number(e.discount)*t,o=Number(e.taxRate)*t,t=t+o-a,Math.round(t)},...(0,u.nv)("financeStore",["getInvoices","deleteInvoice"]),rowColor(e){if(e.rowIndex%2!==0)return"background: #fff;"},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),b.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},edit(e){this.body=e,this.action="Edit",this.prompt=!0}},async mounted(){await this.getInvoices()}};var y=a(57678),v=a(18186),g=a(83884),W=a(2165),_=a(20811),h=a(27011),k=a(83414),q=a(52035),Z=a(24554),I=a(65869),x=a(46778),Q=a(60677),C=a(7518),P=a.n(C);w.render=c;const D=w;P()(w,"components",{QTable:y.Z,QTr:v.Z,QTd:g.Z,QBtn:W.Z,QMenu:_.Z,QList:h.Z,QItem:k.Z,QItemSection:q.Z,QIcon:Z.Z,QSeparator:I.Z,QDialog:x.Z}),P()(w,"directives",{ClosePopup:Q.Z});const N={components:{breadcrumps:r.Z,tbl:D,modal:f.Z},data(){return{tab:"Sent",prompt:!1}},setup(){return{crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Invoice",icon:"receipt",path:"/finance/invoice"}]}}};var V=a(24379),S=a(57547),A=a(3269),T=a(5906),z=a(86602);N.render=d;const U=N;P()(N,"components",{QPage:V.Z,QBtn:W.Z,QTabs:S.Z,QTab:A.Z,QTabPanels:T.Z,QTabPanel:z.Z,QDialog:x.Z})}}]);