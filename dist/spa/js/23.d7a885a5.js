"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[23],{16963:(e,t,l)=>{l.r(t),l.d(t,{default:()=>de});var s=l(83673);const o={class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},a=(0,s._)("div",{class:"text-h4"},"Projects",-1),i={class:"flex items-center"};function r(e,t,l,r,d,n){const m=(0,s.up)("q-btn"),u=(0,s.up)("projects"),c=(0,s.up)("modal"),p=(0,s.up)("q-dialog"),h=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(h,null,{default:(0,s.w5)((()=>[(0,s._)("div",o,[a,(0,s._)("div",i,[(0,s.Wm)(m,{onClick:t[0]||(t[0]=e=>d.dialogue=!0),color:"primary",label:"Create Project",unelevated:"",rounded:"","no-caps":""})])]),(0,s.Wm)(u),(0,s.Wm)(p,{seamless:"",position:"right",modelValue:d.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogue=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onCloseDialogue:t[1]||(t[1]=e=>d.dialogue=!1),actionType:"Add"})])),_:1},8,["modelValue"])])),_:1})}var d=l(46303),n=l(62323),m=l(93402),u=l.n(m);const c=e=>((0,s.dD)("data-v-d110e0e6"),e=e(),(0,s.Cn)(),e),p={class:"row row1"},h={class:"flex items-start justify-between flex-end q-pa-sm"},f={class:"text-h6 q-mr-none",style:{"min-width":"80% !important","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"}},g={style:{"max-width":"100% !important"},class:"flex column justify-start"},w=c((()=>(0,s._)("p",{class:"text-subtitle2 q-mb-none"},"Deadline:",-1))),b={class:"text-grey"},_=c((()=>(0,s._)("p",{class:"text-subtitle2 q-mb-none"},"Priority:",-1))),x={class:"text-grey"},y=c((()=>(0,s._)("p",{class:"text-subtitle2 q-mb-sm"},"Project Leader:",-1))),W={class:"row q-mb-lg"},q=["src"],v={key:1,src:u()},k=c((()=>(0,s._)("img",{src:u()},null,-1))),j=c((()=>(0,s._)("p",{class:"text-subtitle2 q-mb-sm"},"Project Team:",-1))),D={class:"row"},C=["src"],P={key:1,src:u()},Z=c((()=>(0,s._)("img",{src:u()},null,-1))),U={class:"q-pa-md col-12 flex items-center row"},V={class:"row flex"};function Q(e,t,l,o,a,i){const r=(0,s.up)("router-link"),d=(0,s.up)("q-space"),m=(0,s.up)("q-icon"),u=(0,s.up)("q-item-section"),c=(0,s.up)("q-item"),Q=(0,s.up)("q-separator"),z=(0,s.up)("q-list"),L=(0,s.up)("q-menu"),M=(0,s.up)("q-btn"),S=(0,s.up)("confirmDelete"),I=(0,s.up)("q-dialog"),T=(0,s.up)("q-tooltip"),H=(0,s.up)("q-avatar"),K=(0,s.up)("q-item-label"),Y=(0,s.up)("q-select"),O=(0,s.up)("q-popup-edit"),A=(0,s.up)("q-card-section"),N=(0,s.up)("q-card"),E=(0,s.up)("modal"),B=(0,s.up)("q-page"),F=(0,s.up)("q-skeleton"),$=(0,s.up)("q-chip"),R=(0,s.Q2)("close-popup");return a.loading?((0,s.wg)(),(0,s.j4)(B,{key:1,style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"flex justify-between row full-width"},{default:(0,s.w5)((()=>[(0,s._)("div",U,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(e=>(0,s._)("div",{key:e,class:"q-pa-sm col-lg-3 col-md-6 col-sm-6 col-xs-12 q-pa-md"},[(0,s.Wm)(F,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"col-12 flex column"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"flex items-start justify-between row col-12 1absolute-top-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{class:"col-6",style:{height:"20px"}}),(0,s.Wm)(M,{flat:"","no-caps":"","text-color":"grey",icon:"more_vert",round:""})])),_:1}),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(3,(e=>(0,s.Wm)(c,{class:"q-pa-md",key:e},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{style:{height:"16px"},class:"col-12"})])),_:2},1024))),64))])),_:1}),(0,s._)("div",V,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(e=>(0,s.Wm)(c,{class:"q-pa-sm col-2",key:e},{default:(0,s.w5)((()=>[(0,s.Wm)($,{size:"20px",color:"grey",round:""})])),_:2},1024))),64))])])),_:1})]))),64))])])),_:1})):((0,s.wg)(),(0,s.j4)(B,{key:0,style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md q-mt-md"},{default:(0,s.w5)((()=>[(0,s._)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.projects,((l,o)=>((0,s.wg)(),(0,s.iD)("div",{key:o,style:{"min-width":"250px"},class:"col-lg-3 col-md-6 col-sm-6 col-xs-12 q-pa-md"},[(0,s.Wm)(N,{flat:"",class:"q-pa-sm",bordered:"",style:{position:"relative !important"}},{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s.Wm)(r,{style:{"max-width":"70% !important",color:"black"},to:`/projects/${l.id}`},{default:(0,s.w5)((()=>[(0,s._)("p",f,(0,n.zw)(l.name),1)])),_:2},1032,["to"]),(0,s.Wm)(d),(0,s.Wm)(M,{class:"",dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{style:{"min-width":"75px"}},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(c,{onClick:t=>e.deleteProject({id:l.id}),style:{},clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[R]]),(0,s.Wm)(Q),(0,s.wy)((0,s.Wm)(c,{onClick:e=>{a.body=l,a.dialogue=!0},clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[R]])])),_:2},1024)])),_:2},1024)])),_:2},1024)]),(0,s.Wm)(A,{class:"q-pa-sm flex justify-start text-overflow"},{default:(0,s.w5)((()=>[(0,s._)("div",g,[(0,s.Wm)(r,{style:{width:"100%"},to:`/projects/${l.id}`},{default:(0,s.w5)((()=>[w,(0,s._)("p",b,(0,n.zw)(l.plannedEndDate.split("T")[0]),1),_,(0,s._)("p",x,(0,n.zw)(l.priority),1)])),_:2},1032,["to"]),y,(0,s._)("div",W,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.leaderUsers,(o=>((0,s.wg)(),(0,s.iD)("div",{class:"q-mr-xs q-mt-xs q-mb-xs",key:o.id},[(0,s.Wm)(H,{size:"40px"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,{onClick:t[0]||(t[0]=e=>a.confirmDeleteLeaderDialogue=!0),round:"",size:"5px",icon:"close",color:"negative",class:"absolute-top-right"}),(0,s.Wm)(I,{modelValue:a.confirmDeleteLeaderDialogue,"onUpdate:modelValue":t[1]||(t[1]=e=>a.confirmDeleteLeaderDialogue=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{onConfirm:()=>e.deleteProjectLeader({id:l.id,leaders:[o.userId]})},null,8,["onConfirm"])])),_:2},1032,["modelValue"]),o.avatar?((0,s.wg)(),(0,s.iD)("img",{key:0,src:o.avatar},null,8,q)):((0,s.wg)(),(0,s.iD)("img",v)),(0,s.Wm)(T,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(o.name),1)])),_:2},1024)])),_:2},1024)])))),128)),(0,s._)("div",{class:(0,n.C_)(["flex justify-center items-start q-mt-xs",l.leaderUsers.length>2&&"q-ml-xs"])},[(0,s.Wm)(M,{onClick:e=>i.getLeaderOptions(l),round:"",size:"15px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{modelValue:a.leaders,"onUpdate:modelValue":t[3]||(t[3]=e=>a.leaders=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,s.w5)((e=>[(0,s.Wm)(Y,{rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:a.leaders,"onUpdate:modelValue":t[2]||(t[2]=e=>a.leaders=e),options:a.options,label:"Choose leaders",disable:0===a.options.length,hint:0===a.options.length?"All users has been added":""},{option:(0,s.w5)((e=>[(0,s.Wm)(c,(0,n.vs)((0,s.F4)(e.itemProps)),{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"avatar-list"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{class:"q-mr-xs",size:"30px"},{default:(0,s.w5)((()=>[k])),_:1}),(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","disable","hint"]),(0,s.wy)((0,s.Wm)(M,{class:"q-mt-xs q-mb-xs",onClick:e=>i.addProjectLeaders(l.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===a.leaders.length},null,8,["onClick","disable"]),[[R]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])],2)]),j,(0,s._)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.memberUsers,(o=>((0,s.wg)(),(0,s.j4)(H,{class:"q-mr-xs",key:o.id,size:"40px"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,{onClick:t[4]||(t[4]=e=>a.confirmDeleteMemberDialogue=!0),round:"",size:"5px",icon:"close",color:"negative",class:"absolute-top-right"}),(0,s.Wm)(I,{maximized:"",modelValue:a.confirmDeleteMemberDialogue,"onUpdate:modelValue":t[5]||(t[5]=e=>a.confirmDeleteMemberDialogue=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{onConfirm:t=>e.deleteProjectMember({id:l.id,members:[o.userId]})},null,8,["onConfirm"])])),_:2},1032,["modelValue"]),o.avatar?((0,s.wg)(),(0,s.iD)("img",{key:0,src:o.avatar},null,8,C)):((0,s.wg)(),(0,s.iD)("img",P)),(0,s.Wm)(T,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(o.name),1)])),_:2},1024)])),_:2},1024)))),128)),(0,s._)("div",{class:(0,n.C_)(["flex justify-center items-start",l.memberUsers.length>2&&"q-ml-xs"])},[(0,s.Wm)(M,{onClick:e=>i.getUserOptions(l),round:"",size:"15px","text-color":"black",unelevated:"",color:"grey-4",icon:"add"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{modelValue:a.members,"onUpdate:modelValue":t[7]||(t[7]=e=>a.members=e),style:{"min-width":"15rem !important"},cover:!1,offset:[0,10]},{default:(0,s.w5)((e=>[(0,s.Wm)(Y,{ref:"clientRef",rules:[e=>null!==e||"This field is required"],"bg-color":"white",outlined:"",counter:"",multiple:"","use-chips":"",modelValue:a.members,"onUpdate:modelValue":t[6]||(t[6]=e=>a.members=e),options:a.options,label:"Choose members",disable:0===a.options.length,hint:0===a.options.length?"All users has been added":""},{option:(0,s.w5)((e=>[(0,s.Wm)(c,(0,n.vs)((0,s.F4)(e.itemProps)),{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"avatar-list"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{class:"q-mr-xs",size:"30px"},{default:(0,s.w5)((()=>[Z])),_:1}),(0,s.Wm)(K,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["rules","modelValue","options","disable","hint"]),(0,s.wy)((0,s.Wm)(M,{onClick:e=>i.addProjectMembers(l.id),"no-caps":"",flat:"",label:"submit",color:"primary",disable:0===a.members.length},null,8,["onClick","disable"]),[[R]])])),_:2},1032,["modelValue"])])),_:2},1032,["onClick"])],2)])])])),_:2},1024)])),_:2},1024)])))),128))]),(0,s.Wm)(I,{seamless:"",position:"right",modelValue:a.dialogue,"onUpdate:modelValue":t[9]||(t[9]=e=>a.dialogue=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{onCloseDialogue:t[8]||(t[8]=e=>a.dialogue=!1),actionType:"Edit",body:a.body},null,8,["body"])])),_:1},8,["modelValue"])])),_:1}))}var z=l(93617),L=l(42374),M=l(81887);const S={computed:{...(0,z.rn)("projectStore",["projects"]),...(0,z.rn)("userStore",["users"])},components:{modal:L.Z,confirmDelete:M.Z},data(){return{loading:!1,dialogue:!1,confirmDeleteMemberDialogue:!1,confirmDeleteLeaderDialogue:!1,id:"",body:{},options:[],members:[],leaders:[]}},methods:{...(0,z.nv)("projectStore",["getProjects","deleteProject","addProjectMember","deleteProjectMember","addProjectLeader","deleteProjectLeader"]),...(0,z.nv)("userStore",["getUsers"]),printitincons(){console.log("worked")},async addProjectMembers(e){let t=[];for(let l=0;l<this.members.length;l++)t.push(this.members[l].id);await this.addProjectMember({id:e,members:t}),this.members=[]},async addProjectLeaders(e){let t=[];for(let l=0;l<this.leaders.length;l++)t.push(this.leaders[l].id);await this.addProjectLeader({id:e,leaders:t}),this.leaders=[]},getUserOptions(e){let t=[],l=[];this.options=[],setTimeout((()=>{if(e){for(let s=0;s<this.users.length;s++){for(let t=0;t<e.memberUsers.length;t++)Number(e.memberUsers[t].userId)===Number(this.users[s].id)&&l.push({id:this.users[s].id,label:this.users[t].name});t.push({id:this.users[s].id,label:this.users[s].name})}this.options=t.filter((({id:e})=>!l.some((({id:t})=>t===e))))}}),200)},getLeaderOptions(e){let t=[],l=[];this.options=[],setTimeout((()=>{if(e){for(let s=0;s<this.users.length;s++){for(let t=0;t<e.leaderUsers.length;t++)Number(e.leaderUsers[t].userId)===Number(this.users[s].id)&&l.push({id:this.users[s].id,label:this.users[t].name});t.push({id:this.users[s].id,label:this.users[s].name})}this.options=t.filter((({id:e})=>!l.some((({id:t})=>t===e))))}}),200)}},async mounted(){this.loading=!0,await this.getProjects(),await this.getUsers(),this.loading=!1}};var I=l(24379),T=l(10151),H=l(62025),K=l(2165),Y=l(20811),O=l(27011),A=l(83414),N=l(52035),E=l(24554),B=l(65869),F=l(25589),$=l(75096),R=l(46778),G=l(5363),J=l(61289),X=l(63314),ee=l(2350),te=l(54103),le=l(67030),se=l(60677),oe=l(7518),ae=l.n(oe);S.render=Q,S.__scopeId="data-v-d110e0e6";const ie=S;ae()(S,"components",{QPage:I.Z,QCard:T.Z,QSpace:H.Z,QBtn:K.Z,QMenu:Y.Z,QList:O.Z,QItem:A.Z,QItemSection:N.Z,QIcon:E.Z,QSeparator:B.Z,QCardSection:F.Z,QAvatar:$.Z,QDialog:R.Z,QTooltip:G.Z,QPopupEdit:J.Z,QSelect:X.Z,QItemLabel:ee.Z,QSkeleton:te.ZP,QChip:le.Z}),ae()(S,"directives",{ClosePopup:se.Z});const re={components:{breadcrmps:d.Z,Projects:ie,modal:L.Z},data(){return{dialogue:!1}},setup(){return{crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Projects",icon:"work",path:"/projects"}]}}};re.render=r;const de=re;ae()(re,"components",{QPage:I.Z,QBtn:K.Z,QDialog:R.Z})}}]);