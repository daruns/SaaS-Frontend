"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[4715],{74715:(e,t,i)=>{i.r(t),i.d(t,{default:()=>H});var o=i(83673);const a={class:"full-width flex justify-between items-center header-height-standard q-px-md",style:{"border-bottom":"1px solid lightgrey"}},s=(0,o._)("div",{class:"text-h4"},"Overtime Types",-1),l={class:"flex items-center"};function n(e,t,i,n,r,d){const u=(0,o.up)("q-btn"),p=(0,o.up)("tbl"),m=(0,o.up)("modal"),c=(0,o.up)("q-dialog"),h=(0,o.up)("q-scroll-area"),y=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(y,{class:"q-py-none q-my-none"},{default:(0,o.w5)((()=>[(0,o._)("div",a,[s,(0,o._)("div",l,[(0,o.Wm)(u,{onClick:t[0]||(t[0]=e=>r.dialogue=!0),color:"primary",label:"Add "+n.tab[0].toUpperCase()+n.tab.substr(1,n.tab.length),unelevated:"",rounded:"","no-caps":""},null,8,["label"])])]),(0,o.Wm)(h,{style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p),(0,o.Wm)(c,{seamless:"",position:"right",modelValue:r.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>r.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{onCloseDialogue:t[1]||(t[1]=e=>r.dialogue=!1),type:n.tab,actionType:"Add",id:{}},null,8,["type"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var r=i(62323);const d={style:{"font-size":"20px"}},u={style:{"font-size":"20px"}},p={key:0,style:{"font-size":"20px"}},m={key:1,style:{"font-size":"20px"}};function c(e,t,i,a,s,l){const n=(0,o.up)("q-td"),c=(0,o.up)("q-icon"),h=(0,o.up)("q-item-section"),y=(0,o.up)("q-item"),f=(0,o.up)("q-separator"),g=(0,o.up)("q-list"),w=(0,o.up)("q-menu"),b=(0,o.up)("q-btn"),v=(0,o.up)("q-tr"),T=(0,o.up)("q-table"),q=(0,o.up)("modal"),_=(0,o.up)("q-dialog"),W=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(T,{rows:l.data,columns:s.columns,"row-key":"id",loading:s.loading,"rows-per-page-options":[20,50,100,0],flat:"",class:"bg-secondary q-pa-md"},{body:(0,o.w5)((t=>[(0,o.Wm)(v,{class:(0,r.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{class:"items-center justify-start",key:"name",props:t},{default:(0,o.w5)((()=>[(0,o._)("p",d,(0,r.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(n,{class:"items-center justify-start",key:"fund",props:t},{default:(0,o.w5)((()=>[(0,o._)("p",u,(0,r.zw)(t.row.fund),1)])),_:2},1032,["props"]),(0,o.Wm)(n,{class:"items-center justify-start",key:"duration",props:t},{default:(0,o.w5)((()=>["days"===t.row.durationType?((0,o.wg)(),(0,o.iD)("p",p,(0,r.zw)(t.row.days)+" Days",1)):(0,o.kq)("",!0),"hours"===t.row.durationType?((0,o.wg)(),(0,o.iD)("p",m,(0,r.zw)(t.row.hours)+" Hours",1)):(0,o.kq)("",!0)])),_:2},1032,["props"]),(0,o.Wm)(n,{class:"text-right",key:"duration",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(y,{onClick:i=>e.deleteOvertimeType({id:t.row.id}),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[W]]),(0,o.Wm)(f),(0,o.wy)((0,o.Wm)(y,{onClick:e=>l.editOvertimeType(t.row),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[W]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,o.Wm)(_,{onCloseDialogue:t[1]||(t[1]=e=>s.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:s.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>s.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{onCloseDialogue:t[0]||(t[0]=e=>s.dialogue=!1),body:s.body,id:s.id,actionType:"Edit"},null,8,["body","id"])])),_:1},8,["modelValue"])])}var h=i(93617);function y(e,t,i,a,s,l){const n=(0,o.up)("q-toolbar-title"),d=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),p=(0,o.up)("q-input"),m=(0,o.up)("q-card-section"),c=(0,o.up)("q-card"),h=(0,o.up)("q-layout"),y=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(h,{style:{width:"500px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(i.actionType)+" Overtime Type ",1)])),_:1}),(0,o.wy)((0,o.Wm)(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[y]])])),_:1}),(0,o.Wm)(m,{class:"q-gutter-sm scroll"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{ref:"nameRef",outlined:"",modelValue:s.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the name"]},null,8,["modelValue","rules"]),(0,o.Wm)(p,{ref:"fundRef",outlined:"",modelValue:s.credentials.fund,"onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.fund=e),modelModifiers:{number:!0},label:"Salary to be Reduced",type:"number"},null,8,["modelValue"]),(0,o.Wm)(p,{ref:"hoursRef",outlined:"",modelValue:s.credentials.hours,"onUpdate:modelValue":t[2]||(t[2]=e=>s.credentials.hours=e),modelModifiers:{number:!0},label:"Hours",type:"number","lazy-rules":"",rules:[e=>e&&e>0||"Please type the hours"]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(u,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{loading:s.loading,onClick:l.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var f=i(49549);const g={components:{VueTelInput:f.VueTelInput},props:["actionType","body"],data(){return{show:!0,id:null,loading:!1,credentials:{name:null,fund:0,days:0,hours:0,durationType:"hours",urgent:!1}}},computed:{},methods:{toggleShow(){this.show=!this.show},...(0,h.nv)("hrmStore",["createOvertimeType","updateOvertimeType","getOvertimeTypes"]),async submit(){if(this.$refs.nameRef.validate(),"hours"===this.credentials.durationType&&this.$refs.hoursRef.validate(),"days"===this.credentials.durationType&&this.$refs.daysRef.validate(),!(this.$refs.nameRef.hasError||"hours"===this.credentials.durationType&&this.$refs.hoursRef.hasError||"days"===this.credentials.durationType&&this.$refs.daysRef.hasError)){this.loading=!0;let t={name:this.credentials.name,fund:Number(this.credentials.fund),days:Number(this.credentials.days),hours:Number(this.credentials.hours),durationType:this.credentials.durationType,urgent:this.credentials.urgent};try{"Add"===this.actionType?(await this.createOvertimeType(t),this.$q.notify({type:"positive",message:"Department created",color:"positive",position:"top",timeout:"500"})):(t["id"]=Number(this.id),console.log(t),await this.updateOvertimeType(t),this.getOvertimeTypes(),this.$q.notify({type:"positive",message:"Department updated",color:"positive",position:"top",timeout:"500"}))}catch(e){return this.$q.notify({type:"negative",message:"Something went wrong while Department creating",color:"negative",position:"top",timeout:"500"}),this.loading=!0,this.$emit("closeDialogue"),null}this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){this.show=!1,"Edit"===this.actionType&&(this.id=this.body.id,this.credentials.name=this.body.name,this.credentials.fund=Number(this.body.fund),this.credentials.days=Number(this.body.days),this.credentials.hours=Number(this.body.hours),this.credentials.durationType=this.body.durationType,this.credentials.urgent=1===this.body.urgent||!1)}};var w=i(19214),b=i(10151),v=i(39570),T=i(13747),q=i(2165),_=i(25589),W=i(64689),x=i(60677),k=i(7518),Q=i.n(k);g.render=y;const Z=g;Q()(g,"components",{QLayout:w.Z,QCard:b.Z,QToolbar:v.Z,QToolbarTitle:T.Z,QBtn:q.Z,QCardSection:_.Z,QInput:W.Z}),Q()(g,"directives",{ClosePopup:x.Z});const C={computed:{...(0,h.rn)("hrmStore",["overtimeTypes"]),data(){return this.overtimeTypes}},data(){return{body:null,id:null,dialogue:!1,loading:!1,columns:[{name:"name",label:"Name",align:"left",field:"name"},{name:"fund",label:"Salary Deduction",align:"left",field:"fund"},{name:"duration",label:"Duration Limit",align:"left",field:"duration"},{name:"actions",label:"Actions",align:"right",field:"actions"}]}},components:{modal:Z},methods:{...(0,h.nv)("hrmStore",["getDesignations","getOvertimeTypes","deleteOvertimeType"]),editOvertimeType(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getOvertimeTypes(),this.loading=!1}};var D=i(57678),V=i(18186),z=i(83884),O=i(20811),S=i(27011),$=i(83414),R=i(52035),I=i(24554),N=i(65869),U=i(46778);C.render=c;const j=C;Q()(C,"components",{QTable:D.Z,QTr:V.Z,QTd:z.Z,QBtn:q.Z,QMenu:O.Z,QList:S.Z,QItem:$.Z,QItemSection:R.Z,QIcon:I.Z,QSeparator:N.Z,QDialog:U.Z}),Q()(C,"directives",{ClosePopup:x.Z});var P=i(61959);const A={components:{tbl:j,modal:Z},data(){return{dialogue:!1}},setup(){return{tab:(0,P.iH)("overtimeType")}}};var E=i(24379),B=i(47704);A.render=n;const H=A;Q()(A,"components",{QPage:E.Z,QBtn:q.Z,QScrollArea:B.Z,QDialog:U.Z})}}]);