"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[3556],{43556:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var l=a(83673);const o={class:"full-width flex justify-between items-center header-height-standard q-px-md",style:{"border-bottom":"1px solid lightgrey"}},s=(0,l._)("div",{class:"text-h4"},"LeaveTypes",-1),i={class:"flex items-center"};function n(e,t,a,n,d,r){const u=(0,l.up)("q-btn"),p=(0,l.up)("tbl"),m=(0,l.up)("modal"),c=(0,l.up)("q-dialog"),y=(0,l.up)("q-scroll-area"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{class:"q-py-none q-my-none"},{default:(0,l.w5)((()=>[(0,l._)("div",o,[s,(0,l._)("div",i,[(0,l.Wm)(u,{onClick:t[0]||(t[0]=e=>d.dialogue=!0),color:"primary",label:"Add "+n.tab[0].toUpperCase()+n.tab.substr(1,n.tab.length),unelevated:"",rounded:"","no-caps":""},null,8,["label"])])]),(0,l.Wm)(y,{style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(p),(0,l.Wm)(c,{seamless:"",position:"right",modelValue:d.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{onCloseDialogue:t[1]||(t[1]=e=>d.dialogue=!1),type:n.tab,actionType:"Add",id:{}},null,8,["type"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var d=a(62323);const r={style:{"font-size":"20px"}},u={style:{"font-size":"20px"}},p={key:0,style:{"font-size":"20px"}},m={key:1,style:{"font-size":"20px"}},c={key:0,style:{"font-size":"20px"}};function y(e,t,a,o,s,i){const n=(0,l.up)("q-td"),y=(0,l.up)("q-icon"),h=(0,l.up)("q-item-section"),f=(0,l.up)("q-item"),g=(0,l.up)("q-separator"),b=(0,l.up)("q-list"),w=(0,l.up)("q-menu"),v=(0,l.up)("q-btn"),T=(0,l.up)("q-tr"),q=(0,l.up)("q-table"),W=(0,l.up)("modal"),_=(0,l.up)("q-dialog"),k=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(q,{rows:i.data,columns:s.columns,"row-key":"id",loading:s.loading,"rows-per-page-options":[20,50,100,0],flat:"",class:"bg-secondary q-pa-md"},{body:(0,l.w5)((t=>[(0,l.Wm)(T,{class:(0,d.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"items-center justify-start",key:"name",props:t},{default:(0,l.w5)((()=>[(0,l._)("p",r,(0,d.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,l.Wm)(n,{class:"items-center justify-start",key:"fund",props:t},{default:(0,l.w5)((()=>[(0,l._)("p",u,(0,d.zw)(t.row.fund),1)])),_:2},1032,["props"]),(0,l.Wm)(n,{class:"items-center justify-start",key:"duration",props:t},{default:(0,l.w5)((()=>["days"===t.row.durationType?((0,l.wg)(),(0,l.iD)("p",p,(0,d.zw)(t.row.days)+" Days",1)):(0,l.kq)("",!0),"hours"===t.row.durationType?((0,l.wg)(),(0,l.iD)("p",m,(0,d.zw)(t.row.hours)+" Hours",1)):(0,l.kq)("",!0)])),_:2},1032,["props"]),(0,l.Wm)(n,{class:"items-center justify-start",key:"urgent",props:t},{default:(0,l.w5)((()=>[t.row.urgent?((0,l.wg)(),(0,l.iD)("p",c,[(0,l.Wm)(y,{name:"done"})])):(0,l.kq)("",!0)])),_:2},1032,["props"]),(0,l.Wm)(n,{class:"text-right",key:"urgent",props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{style:{"min-width":"75px"}},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(f,{onClick:a=>e.deleteLeaveType({id:t.row.id}),style:{},clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[k]]),(0,l.Wm)(g),(0,l.wy)((0,l.Wm)(f,{onClick:e=>i.editLeaveType(t.row),clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[k]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,l.Wm)(_,{onCloseDialogue:t[1]||(t[1]=e=>s.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:s.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>s.dialogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{onCloseDialogue:t[0]||(t[0]=e=>s.dialogue=!1),body:s.body,id:s.id,actionType:"Edit"},null,8,["body","id"])])),_:1},8,["modelValue"])])}var h=a(93617);const f=(0,l._)("div",null,"Duration Limit Type:",-1),g={class:"q-gutter-sm"};function b(e,t,a,o,s,i){const n=(0,l.up)("q-toolbar-title"),r=(0,l.up)("q-btn"),u=(0,l.up)("q-toolbar"),p=(0,l.up)("q-input"),m=(0,l.up)("q-radio"),c=(0,l.up)("q-checkbox"),y=(0,l.up)("q-card-section"),h=(0,l.up)("q-card"),b=(0,l.up)("q-layout"),w=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(b,{style:{width:"500px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(a.actionType)+" Leave Type ",1)])),_:1}),(0,l.wy)((0,l.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[w]])])),_:1}),(0,l.Wm)(y,{class:"q-gutter-sm scroll"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{ref:"nameRef",outlined:"",modelValue:s.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the name"]},null,8,["modelValue","rules"]),(0,l.Wm)(p,{ref:"fundRef",outlined:"",modelValue:s.credentials.fund,"onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.fund=e),modelModifiers:{number:!0},label:"Salary to be Reduced per day",type:"number"},null,8,["modelValue"]),f,(0,l._)("div",g,[(0,l.Wm)(m,{modelValue:s.credentials.durationType,"onUpdate:modelValue":t[2]||(t[2]=e=>s.credentials.durationType=e),val:"days",label:"Days"},null,8,["modelValue"]),(0,l.Wm)(m,{modelValue:s.credentials.durationType,"onUpdate:modelValue":t[3]||(t[3]=e=>s.credentials.durationType=e),val:"hours",label:"Hours"},null,8,["modelValue"])]),"days"==s.credentials.durationType?((0,l.wg)(),(0,l.j4)(p,{key:0,ref:"daysRef",outlined:"",modelValue:s.credentials.days,"onUpdate:modelValue":t[4]||(t[4]=e=>s.credentials.days=e),modelModifiers:{number:!0},label:"Days per year",type:"number","lazy-rules":"",rules:[e=>e&&e>0||"Please type the days"]},null,8,["modelValue","rules"])):(0,l.kq)("",!0),"hours"==s.credentials.durationType?((0,l.wg)(),(0,l.j4)(p,{key:1,ref:"hoursRef",outlined:"",modelValue:s.credentials.hours,"onUpdate:modelValue":t[5]||(t[5]=e=>s.credentials.hours=e),modelModifiers:{number:!0},label:"Hours per day",type:"number","lazy-rules":"",rules:[e=>e&&e>0||"Please type the hours"]},null,8,["modelValue","rules"])):(0,l.kq)("",!0),(0,l.Wm)(c,{ref:"urgentRef",outlined:"",modelValue:s.credentials.urgent,"onUpdate:modelValue":t[6]||(t[6]=e=>s.credentials.urgent=e),label:"Urgent Leaves allowed? (employees can request leave even if their balance is zero!)"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(u,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{loading:s.loading,onClick:i.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var w=a(49549);const v={components:{VueTelInput:w.VueTelInput},props:["actionType","body"],data(){return{show:!0,id:null,loading:!1,credentials:{name:null,fund:0,days:0,hours:0,durationType:"days",urgent:!1}}},computed:{},methods:{toggleShow(){this.show=!this.show},...(0,h.nv)("hrmStore",["createLeaveType","updateLeaveType","getLeaveTypes"]),async submit(){if(this.$refs.nameRef.validate(),"hours"===this.credentials.durationType&&this.$refs.hoursRef.validate(),"days"===this.credentials.durationType&&this.$refs.daysRef.validate(),!(this.$refs.nameRef.hasError||"hours"===this.credentials.durationType&&this.$refs.hoursRef.hasError||"days"===this.credentials.durationType&&this.$refs.daysRef.hasError)){this.loading=!0;let t={name:this.credentials.name,fund:Number(this.credentials.fund),days:Number(this.credentials.days),hours:Number(this.credentials.hours),durationType:this.credentials.durationType,urgent:this.credentials.urgent};try{"Add"===this.actionType?(await this.createLeaveType(t),this.$q.notify({type:"positive",message:"Department created",color:"positive",position:"top",timeout:"500"})):(t["id"]=Number(this.id),console.log(t),await this.updateLeaveType(t),this.getLeaveTypes(),this.$q.notify({type:"positive",message:"Department updated",color:"positive",position:"top",timeout:"500"}))}catch(e){return this.$q.notify({type:"negative",message:"Something went wrong while Department creating",color:"negative",position:"top",timeout:"500"}),this.loading=!0,this.$emit("closeDialogue"),null}this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){this.show=!1,"Edit"===this.actionType&&(this.id=this.body.id,this.credentials.name=this.body.name,this.credentials.fund=Number(this.body.fund),this.credentials.days=Number(this.body.days),this.credentials.hours=Number(this.body.hours),this.credentials.durationType=this.body.durationType,this.credentials.urgent=1===this.body.urgent||!1)}};var T=a(19214),q=a(10151),W=a(39570),_=a(13747),k=a(2165),x=a(25589),V=a(64689),Q=a(77991),Z=a(66271),C=a(60677),D=a(7518),L=a.n(D);v.render=b;const z=v;L()(v,"components",{QLayout:T.Z,QCard:q.Z,QToolbar:W.Z,QToolbarTitle:_.Z,QBtn:k.Z,QCardSection:x.Z,QInput:V.Z,QRadio:Q.Z,QCheckbox:Z.Z}),L()(v,"directives",{ClosePopup:C.Z});const R={computed:{...(0,h.rn)("hrmStore",["leaveTypes"]),data(){return this.leaveTypes}},data(){return{body:null,id:null,dialogue:!1,loading:!1,columns:[{name:"name",label:"Name",align:"left",field:"name"},{name:"fund",label:"Salary Deduction",align:"left",field:"fund"},{name:"duration",label:"Duration Limit",align:"left",field:"duration"},{name:"urgent",label:"Is Urgent",align:"left",field:"name"},{name:"actions",label:"Actions",align:"right",field:"actions"}]}},components:{modal:z},methods:{...(0,h.nv)("hrmStore",["getDesignations","getLeaveTypes","deleteLeaveType"]),editLeaveType(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getLeaveTypes(),this.loading=!1}};var U=a(57678),S=a(18186),$=a(83884),I=a(24554),j=a(20811),N=a(27011),P=a(83414),A=a(52035),E=a(65869),B=a(46778);R.render=y;const H=R;L()(R,"components",{QTable:U.Z,QTr:S.Z,QTd:$.Z,QIcon:I.Z,QBtn:k.Z,QMenu:j.Z,QList:N.Z,QItem:P.Z,QItemSection:A.Z,QSeparator:E.Z,QDialog:B.Z}),L()(R,"directives",{ClosePopup:C.Z});var M=a(61959);const F={components:{tbl:H,modal:z},data(){return{dialogue:!1}},setup(){return{tab:(0,M.iH)("leaveType")}}};var G=a(24379),J=a(47704);F.render=n;const K=F;L()(F,"components",{QPage:G.Z,QBtn:k.Z,QScrollArea:J.Z,QDialog:B.Z})}}]);