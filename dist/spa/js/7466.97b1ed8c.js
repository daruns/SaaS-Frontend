"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[7466],{99209:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var o=a(83673);const l={class:"full-width flex justify-between items-center q-px-md header-height-standard",style:{"border-bottom":"1px solid lightgrey"}},n=(0,o._)("div",{class:"text-h4"},"Quote",-1),s={class:"flex items-center"},d={class:"q-px-md"};function r(e,t,a,r,i,u){const p=(0,o.up)("q-btn"),m=(0,o.up)("breadcrumps"),c=(0,o.up)("q-tab"),f=(0,o.up)("q-tabs"),b=(0,o.up)("tbl"),w=(0,o.up)("q-tab-panel"),y=(0,o.up)("q-tab-panels"),g=(0,o.up)("modal"),q=(0,o.up)("q-dialog"),W=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(W,{class:"q-py-none q-my-none"},{default:(0,o.w5)((()=>[(0,o._)("div",l,[n,(0,o._)("div",s,[(0,o.Wm)(p,{onClick:t[0]||(t[0]=e=>i.prompt=!0),color:"primary",label:"Create Record",unelevated:"",rounded:"","no-caps":""})])]),(0,o.Wm)(m,{class:"q-pa-md",map:r.crumps},null,8,["map"]),(0,o._)("div",d,[(0,o.Wm)(f,{modelValue:i.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>i.tab=e),dense:"",class:"text-grey q-mt-md bg-white rounded-borders bordered","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{"no-caps":"",name:"Sent",label:"Sent"}),(0,o.Wm)(c,{"no-caps":"",name:"Not paid",label:"Not paid"}),(0,o.Wm)(c,{"no-caps":"",name:"Paid",label:"Paid"})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{class:"bg-secondary",modelValue:i.tab,"onUpdate:modelValue":t[2]||(t[2]=e=>i.tab=e),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{name:"Sent",class:"q-pa-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{type:"Sent"})])),_:1}),(0,o.Wm)(w,{class:"bg-secondary",name:"Not paid"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{type:"Not paid"})])),_:1}),(0,o.Wm)(w,{class:"bg-secondary",name:"Paid"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{type:"Paid"})])),_:1})])),_:1},8,["modelValue"])]),(0,o.Wm)(q,{seamless:"",position:"right",modelValue:i.prompt,"onUpdate:modelValue":t[4]||(t[4]=e=>i.prompt=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onCloseDialogue:t[3]||(t[3]=e=>i.prompt=!1),action:"Add",quoteType:i.tab},null,8,["quoteType"])])),_:1},8,["modelValue"])])),_:1})}var i=a(46303),u=a(62323);const p={class:"text-h6",style:{"font-size":"15px",margin:"0 !important"}};function m(e,t,a,l,n,s){const d=(0,o.up)("router-link"),r=(0,o.up)("q-td"),i=(0,o.up)("q-icon"),m=(0,o.up)("q-item-section"),c=(0,o.up)("q-item"),f=(0,o.up)("q-separator"),b=(0,o.up)("q-list"),w=(0,o.up)("q-menu"),y=(0,o.up)("q-btn"),g=(0,o.up)("q-tr"),q=(0,o.up)("q-table"),W=(0,o.up)("modal"),_=(0,o.up)("q-dialog"),Q=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(q,{rows:s.data,columns:n.columns,"row-key":"id",loading:n.loading,flat:"",class:"bg-secondary q-pt-md"},{body:(0,o.w5)((t=>[(0,o.Wm)(g,{class:(0,u.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{key:"quoteNumber",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{style:{color:"black"},to:`/finance/quote/${t.row.id}`},{default:(0,o.w5)((()=>[(0,o._)("p",p,(0,u.zw)(t.row.quoteNumber),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,o.Wm)(r,{key:"client",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(t.row.client.name),1)])),_:2},1032,["props"]),(0,o.Wm)(r,{key:"date",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(s.dateConversion(t.row.date)),1)])),_:2},1032,["props"]),(0,o.Wm)(r,{key:"dueDate",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(s.dateConversion(t.row.dueDate)),1)])),_:2},1032,["props"]),(0,o.Wm)(r,{key:"status",props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(t.row.status),1)])),_:2},1032,["props"]),(0,o.Wm)(r,{key:"actions",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{style:{"z-index":"10"},dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(c,{onClick:a=>e.deleteQuote(t.row.id),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[Q]]),(0,o.Wm)(f),"Paid"!==t.row.status?(0,o.wy)(((0,o.wg)(),(0,o.j4)(c,{key:0,onClick:e=>s.edit(t.row),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"])),[[Q]]):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,o.Wm)(_,{seamless:"",position:"right",modelValue:n.prompt,"onUpdate:modelValue":t[1]||(t[1]=e=>n.prompt=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{onCloseDialogue:t[0]||(t[0]=e=>n.prompt=!1),action:n.action,body:n.body},null,8,["action","body"])])),_:1},8,["modelValue"])])}var c=a(93617),f=a(25616),b=a(30112);const w={props:["type"],data(){return{prompt:!1,loading:!1,action:"",body:{},columns:[{name:"quoteNumber",align:"left",label:"Quote number",field:"quoteNumber"},{name:"client",align:"left",label:"Client",field:"client"},{name:"date",align:"left",label:"Quote date",field:"date"},{name:"dueDate",align:"left",label:"Due date",field:"dueDate"},{name:"status",align:"left",label:"Status",field:"status"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},computed:{...(0,c.rn)("financeStore",["sentQuotes","acceptedQuotes","rejectedQuotes"]),data(){return"Sent"===this.type?this.sentQuotes:"Accepted"===this.type?this.acceptedQuotes:this.rejectedQuotes}},components:{modal:b.Z},methods:{...(0,c.nv)("financeStore",["getQuotes","deleteQuote"]),rowColor(e){if(e.rowIndex%2!==0)return"background: #fff;"},dateConversion(e){let t=new Date(e);return t.setHours(t.getHours()-3),f.ZP.formatDate(t,"YYYY-MM-DD HH:mm")},edit(e){this.body=e,this.action="Edit",this.prompt=!0}},async mounted(){await this.getQuotes()}};var y=a(57678),g=a(18186),q=a(83884),W=a(2165),_=a(20811),Q=a(27011),h=a(83414),k=a(52035),Z=a(24554),v=a(65869),x=a(46778),C=a(60677),D=a(7518),V=a.n(D);w.render=m;const S=w;V()(w,"components",{QTable:y.Z,QTr:g.Z,QTd:q.Z,QBtn:W.Z,QMenu:_.Z,QList:Q.Z,QItem:h.Z,QItemSection:k.Z,QIcon:Z.Z,QSeparator:v.Z,QDialog:x.Z}),V()(w,"directives",{ClosePopup:C.Z});const P={components:{breadcrumps:i.Z,tbl:S,modal:b.Z},data(){return{tab:"Sent",prompt:!1}},setup(){return{crumps:[{id:1,name:"OneConnect",icon:"home",path:"/"},{id:2,name:"Quote",icon:"receipt",path:"/finance/quote"}]}}};var z=a(24379),T=a(57547),N=a(3269),U=a(5906),j=a(86602);P.render=r;const I=P;V()(P,"components",{QPage:z.Z,QBtn:W.Z,QTabs:T.Z,QTab:N.Z,QTabPanels:U.Z,QTabPanel:j.Z,QDialog:x.Z})}}]);