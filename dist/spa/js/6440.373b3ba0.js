"use strict";(self["webpackChunkoc_front_end"]=self["webpackChunkoc_front_end"]||[]).push([[6440],{16440:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var o=a(83673);const l={class:"full-width flex justify-between items-center header-height-standard q-px-md",style:{"border-bottom":"1px solid lightgrey"}},n=(0,o._)("div",{class:"text-h4"},"Departments",-1),i={class:"flex items-center"};function s(e,t,a,s,d,r){const u=(0,o.up)("q-btn"),m=(0,o.up)("tbl"),p=(0,o.up)("modal"),c=(0,o.up)("q-dialog"),h=(0,o.up)("q-scroll-area"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,{class:"q-py-none q-my-none"},{default:(0,o.w5)((()=>[(0,o._)("div",l,[n,(0,o._)("div",i,[(0,o.Wm)(u,{onClick:t[0]||(t[0]=e=>d.dialogue=!0),color:"primary",label:"Add "+s.tab[0].toUpperCase()+s.tab.substr(1,s.tab.length),unelevated:"",rounded:"","no-caps":""},null,8,["label"])])]),(0,o.Wm)(h,{style:{"max-height":"auto !important","min-height":"auto !important",height:"calc(100vh - 131px)"},class:"q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(m),(0,o.Wm)(c,{seamless:"",position:"right",modelValue:d.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>d.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{onCloseDialogue:t[1]||(t[1]=e=>d.dialogue=!1),type:s.tab,actionType:"Add",id:{}},null,8,["type"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}var d=a(62323);const r={style:{"font-size":"20px"}};function u(e,t,a,l,n,i){const s=(0,o.up)("q-td"),u=(0,o.up)("q-icon"),m=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),c=(0,o.up)("q-separator"),h=(0,o.up)("q-list"),g=(0,o.up)("q-menu"),f=(0,o.up)("q-btn"),w=(0,o.up)("q-tr"),y=(0,o.up)("q-table"),b=(0,o.up)("modal"),q=(0,o.up)("q-dialog"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(y,{rows:i.data,columns:n.columns,"row-key":"id",loading:n.loading,flat:"",class:"bg-secondary q-pa-md"},{body:(0,o.w5)((t=>[(0,o.Wm)(w,{class:(0,d.C_)(t.rowIndex%2!==0&&"bg-white"),props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"items-center justify-start",key:"name",props:t},{default:(0,o.w5)((()=>[(0,o._)("p",r,(0,d.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(s,{class:"text-right",key:"name",props:t},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{dense:"",round:"",flat:"",icon:"more_vert"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{"min-width":"75px"}},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(p,{onClick:a=>e.deleteDepartment({id:t.row.id}),style:{},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"delete",color:"negative",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]]),(0,o.Wm)(c),(0,o.wy)((0,o.Wm)(p,{onClick:e=>i.editDepartment(t.row),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"edit",color:"warning",size:"xs"})])),_:1})])),_:2},1032,["onClick"]),[[_]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["class","props"])])),_:1},8,["rows","columns","loading"]),(0,o.Wm)(q,{onCloseDialogue:t[1]||(t[1]=e=>n.dialogue=!1),inProfile:!1,seamless:"",position:"right",modelValue:n.dialogue,"onUpdate:modelValue":t[2]||(t[2]=e=>n.dialogue=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{onCloseDialogue:t[0]||(t[0]=e=>n.dialogue=!1),body:n.body,id:n.id,actionType:"Edit"},null,8,["body","id"])])),_:1},8,["modelValue"])])}var m=a(93617);function p(e,t,a,l,n,i){const s=(0,o.up)("q-toolbar-title"),r=(0,o.up)("q-btn"),u=(0,o.up)("q-toolbar"),m=(0,o.up)("q-input"),p=(0,o.up)("q-card-section"),c=(0,o.up)("q-card"),h=(0,o.up)("q-layout"),g=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(h,{style:{width:"500px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{style:{"max-width":"500px","min-height":"100vh"},flat:"",square:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"q-pa-md bg-grey-3",style:{position:"sticky !important",top:"0","z-index":"15",height:"63px !important"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,d.zw)(a.actionType)+" Department ",1)])),_:1}),(0,o.wy)((0,o.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[g]])])),_:1}),(0,o.Wm)(p,{class:"q-gutter-sm scroll"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{ref:"nameRef",outlined:"",modelValue:n.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.credentials.name=e),label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type the company name"]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(u,{class:"bg-grey-3 submitBtnClass",style:{position:"sticky !important",bottom:"0","z-index":"5"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{loading:n.loading,onClick:i.submit,class:"full-width",color:"primary",label:"Submit","no-caps":""},null,8,["loading","onClick"])])),_:1})])),_:1})}var c=a(49549);const h={components:{VueTelInput:c.VueTelInput},props:["actionType","body"],data(){return{show:!0,id:null,loading:!1,credentials:{name:""}}},computed:{},methods:{toggleShow(){this.show=!this.show},...(0,m.nv)("hrmStore",["createDepartment","updateDepartment","getDepartments","getOneDepartment"]),async submit(){if(this.$refs.nameRef.validate(),!this.$refs.nameRef.hasError){this.loading=!0;let e={name:this.credentials.name};console.log(this.credentials.name),"Add"===this.actionType?(await this.createDepartment(e),this.$q.notify({type:"positive",message:"Department created",color:"positive",position:"top",timeout:"500"})):(e["id"]=Number(this.id),console.log(e),await this.updateDepartment(e),this.getDepartments(),this.$route.params.id&&await this.getOneDepartment(this.$route.params.id),this.$q.notify({type:"positive",message:"Department updated",color:"positive",position:"top",timeout:"500"})),this.loading=!1,this.$emit("closeDialogue")}}},async mounted(){this.show=!1,"Edit"===this.actionType&&(this.id=this.body.id,this.credentials.name=this.body.name)}};var g=a(19214),f=a(10151),w=a(39570),y=a(13747),b=a(2165),q=a(25589),_=a(64689),W=a(63314),v=a(60677),x=a(7518),D=a.n(x);h.render=p;const Q=h;D()(h,"components",{QLayout:g.Z,QCard:f.Z,QToolbar:w.Z,QToolbarTitle:y.Z,QBtn:b.Z,QCardSection:q.Z,QInput:_.Z,QSelect:W.Z}),D()(h,"directives",{ClosePopup:v.Z});const Z={computed:{...(0,m.rn)("hrmStore",["departments"]),data(){return this.departments}},data(){return{body:null,id:null,dialogue:!1,loading:!1,columns:[{name:"name",label:"Name",align:"left",field:"name"},{name:"actions",label:"Actions",align:"right1",field:"actions"}]}},components:{modal:Q},methods:{...(0,m.nv)("hrmStore",["getDepartments","deleteDepartment"]),editDepartment(e){if(!0===this.dialogue)return this.dialogue=!1,void setTimeout((()=>{this.body=e,this.dialogue=!0}),200);this.body=e,this.dialogue=!0},rowColor(e){if(e.rowIndex%2!==0||0!==e.rowIndex)return"background: #fff;"}},async mounted(){this.loading=!0,await this.getDepartments(),this.loading=!1}};var k=a(57678),C=a(18186),T=a(83884),V=a(20811),S=a(27011),I=a(83414),z=a(52035),$=a(24554),A=a(65869),P=a(46778);Z.render=u;const U=Z;D()(Z,"components",{QTable:k.Z,QTr:C.Z,QTd:T.Z,QBtn:b.Z,QMenu:V.Z,QList:S.Z,QItem:I.Z,QItemSection:z.Z,QIcon:$.Z,QSeparator:A.Z,QDialog:P.Z}),D()(Z,"directives",{ClosePopup:v.Z});var j=a(61959);const B={components:{tbl:U,modal:Q},data(){return{dialogue:!1}},setup(){return{tab:(0,j.iH)("department")}}};var E=a(24379),N=a(47704);B.render=s;const R=B;D()(B,"components",{QPage:E.Z,QBtn:b.Z,QScrollArea:N.Z,QDialog:P.Z})}}]);